"use strict";(self.webpackChunk_nand2tetris_web=self.webpackChunk_nand2tetris_web||[]).push([[356],{8582:function(t,n,e){e.d(n,{M:function(){return c}});var i=e(1026),r=e(7878),u=e(8365),a=e(4408),s=e(1585),o=e(4625),c=function(t){var n=t.className,e=void 0===n?"":n,c=t.out,h=t.cmp,v=t.zeroState,d=u.lA.parse(c),f=u.lA.parse(h);if((0,o.dZ)(d))return(0,r.jsxs)("details",{children:[(0,r.jsx)("summary",{children:"Failed to parse output"}),(0,r.jsx)("pre",{children:(0,a.j)((0,o.UG)(d))}),(0,r.jsx)("code",{children:(0,r.jsx)("pre",{children:c})})]});if((0,o.dZ)(f))return(0,r.jsxs)("details",{children:[(0,r.jsx)("summary",{children:"Failed to parse compare"}),(0,r.jsxs)("code",{children:[(0,r.jsx)("pre",{children:(0,a.j)((0,o.UG)(f))}),(0,r.jsx)("pre",{children:h})]})]});var p=(0,o.Ok)(f),Z=(0,o.Ok)(d),m=0,b=(0,s.w)(0,Math.min(p.length,Z.length)).map((function(t){var n,e,r=null!==(n=p[t])&&void 0!==n?n:[],u=null!==(e=Z[t])&&void 0!==e?e:[];return(0,s.w)(0,Math.max(r.length,u.length)).map((function(t,n){var e,i;return[null!==(e=r[n])&&void 0!==e?e:"",null!==(i=u[n])&&void 0!==i?i:""]})).map((function(t){var n=(0,i.Z)(t,2),e=n[0],r=n[1],u={cmp:null!==e&&void 0!==e?e:'"',out:null!==r&&void 0!==r?r:'"',pass:null!==(null===e||void 0===e?void 0:e.trim().match(/^\*+$/))||(null===r||void 0===r?void 0:r.trim())===(null===e||void 0===e?void 0:e.trim())};return u.pass||(m+=1),u}))}));return(0,r.jsxs)("div",{className:"scroll-x "+e,children:[m>0&&(0,r.jsxs)("p",{children:[m," failure",1===m?"":"s"]}),b.length>0?(0,r.jsx)("table",{style:{fontFamily:"var(--font-family-monospace)",marginBottom:"none"},children:(0,r.jsx)("tbody",{children:b.map((function(t,n){return(0,r.jsx)("tr",{children:t.map((function(t,n){var e=t.cmp,i=t.out,u=t.pass;return(0,r.jsx)(l,{cmp:e,out:i,pass:u},n)}))},n)}))})}):null!==v&&void 0!==v?v:(0,r.jsx)("p",{children:"Execute test script to compare output."})]})},l=function(t){var n=t.cmp,e=t.out;return t.pass?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("td",{children:n})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("td",{children:[(0,r.jsx)("ins",{children:n}),(0,r.jsx)("br",{}),(0,r.jsx)("del",{children:e})]})})}},691:function(t,n,e){e.d(n,{J_:function(){return d}});var i=e(726),r=e(1092),u=e(7791),a=e(4625),s=e(8090),o=e(3118),c=e(6329);function l(t,n){if(void 0!==n){if(n>=t)return n-t+1;if(t>0&&0===n)return 1;throw new Error("Bus specification has start > end (".concat(t," > ").concat(n,")"))}}function h(t,n){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)((0,r.Z)().mark((function t(n,e){var i,u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,o._c)(n)&&void 0!==e){t.next=2;break}return t.abrupt("return",(0,o.cT)(n));case 2:return t.prev=2,t.next=5,e.readFile("".concat(n,".hdl"));case 5:return i=t.sent,u=s.Gq.parse(i),c=(0,a.IY)(u)?d((0,a.Ok)(u),e):(0,a.UG)(new Error("HDL Was not parsed")),t.abrupt("return",c);case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",(0,a.UG)(new Error("Could not load chip ".concat(n,".hdl"))));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}function d(t,n){return f.apply(this,arguments)}function f(){return(f=(0,u.Z)((0,r.Z)().mark((function t(n,e){var u,s,v,d,f,p,Z;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("BUILTIN"!==n.parts){t.next=2;break}return t.abrupt("return",(0,o.cT)(n.name.toString()));case 2:u=new c.Af(n.ins.map((function(t){var n=t.pin,e=t.width;return{pin:n.toString(),width:e}})),n.outs.map((function(t){var n=t.pin,e=t.width;return{pin:n.toString(),width:e}})),n.name.toString(),[],n.clocked),s=(0,i.Z)(n.parts),t.prev=4,s.s();case 6:if((v=s.n()).done){t.next=24;break}return d=v.value,t.next=10,h(d.name.toString(),e);case 10:if(f=t.sent,!(0,a.dZ)(f)){t.next=13;break}return t.abrupt("return",f);case 13:p=(0,a.Ok)(f),Z=d.wires.map((function(t){var n,e,i,r,u=t.lhs,a=t.rhs;return{to:{name:u.pin.toString(),start:null!==(n=u.start)&&void 0!==n?n:0,width:l(null!==(e=u.start)&&void 0!==e?e:0,u.end)},from:{name:a.pin.toString(),start:null!==(i=a.start)&&void 0!==i?i:0,width:l(null!==(r=a.start)&&void 0!==r?r:0,a.end)}}})),t.prev=15,u.wire(p,Z),t.next=22;break;case 19:return t.prev=19,t.t0=t.catch(15),t.abrupt("return",(0,a.UG)(t.t0));case 22:t.next=6;break;case 24:t.next=29;break;case 26:t.prev=26,t.t1=t.catch(4),s.e(t.t1);case 29:return t.prev=29,s.f(),t.finish(29);case 32:return t.abrupt("return",(0,a.Ok)(u));case 33:case"end":return t.stop()}}),t,null,[[4,26,29,32],[15,19]])})))).apply(this,arguments)}},3300:function(t,n,e){e.d(n,{N1:function(){return S},Z9:function(){return P},ar:function(){return D},lL:function(){return A},m1:function(){return x},zp:function(){return M}});var i=e(7538),r=e(3943),u=e(1026),a=e(9422),s=e(7169),o=e(3243),c=e(7597),l=e(4649),h=e(1092),v=e(7791),d=e(2951),f=e(1976),p=e(7591),Z=e(4337),m=e(6329),b=e(3116),y=e(134),g=e(326),k=e(9600),w=e(5838),x=function(t){(0,p.Z)(e,t);var n=(0,Z.Z)(e);function e(){return(0,d.Z)(this,e),n.call(this,16,"ROM")}return(0,f.Z)(e,[{key:"load",value:function(){var t=(0,v.Z)((0,h.Z)().mark((function t(n,e){var i=this;return(0,h.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,k.zD)(n,e);case 3:t.sent.map((function(t,n){return i.at(n).busVoltage=t})),t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new Error("ROM32K Failed to load file ".concat(e));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(n,e){return t.apply(this,arguments)}}()}]),e}(b.FH),A=function(t){(0,p.Z)(e,t);var n=(0,Z.Z)(e);function e(){return(0,d.Z)(this,e),n.call(this,13,"Screen")}return(0,f.Z)(e)}(b.FH);(0,l.Z)(A,"OFFSET",w.qJ);var S=function(t){(0,p.Z)(e,t);var n=(0,Z.Z)(e);function e(){return(0,d.Z)(this,e),n.call(this,[],["out[16]"],"Keyboard")}return(0,f.Z)(e,[{key:"setKey",value:function(t){this.out().busVoltage=65535&t}},{key:"clearKey",value:function(){this.out().busVoltage=0}}]),e}(m.Af);(0,l.Z)(S,"OFFSET",w.sd);var M=function(t){(0,p.Z)(e,t);var n=(0,Z.Z)(e);function e(){var t;return(0,d.Z)(this,e),t=n.call(this,["in[16]","load","address[15])"],["out[16]"],"Memory"),(0,l.Z)((0,s.Z)(t),"ram",new b.xs),(0,l.Z)((0,s.Z)(t),"screen",new A),(0,l.Z)((0,s.Z)(t),"keyboard",new S),(0,l.Z)((0,s.Z)(t),"address",0),t.parts.add(t.keyboard),t.parts.add(t.screen),t.parts.add(t.ram),t}return(0,f.Z)(e,[{key:"tick",value:function(){var t=this.in("load").voltage();if(this.address=this.in("address").busVoltage,t){var n=this.in().busVoltage;this.address>=S.OFFSET||(this.address>=A.OFFSET?this.screen.at(this.address-A.OFFSET).busVoltage=n:this.ram.at(this.address).busVoltage=n)}}},{key:"tock",value:function(){this.eval()}},{key:"eval",value:function(){if(this.ram){this.address=this.in("address").busVoltage;var t,n,e=0;if(this.address>=S.OFFSET)e=null!==(t=null===(n=this.keyboard)||void 0===n?void 0:n.out().busVoltage)&&void 0!==t?t:0;else if(this.address>=A.OFFSET){var i,r;e=null!==(i=null===(r=this.screen)||void 0===r?void 0:r.at(this.address-A.OFFSET).busVoltage)&&void 0!==i?i:0}else{var u,a;e=null!==(u=null===(a=this.ram)||void 0===a?void 0:a.at(this.address).busVoltage)&&void 0!==u?u:0}this.out().busVoltage=e}}},{key:"in",value:function(t){if(null!==t&&void 0!==t&&t.startsWith("RAM16K")){var n,i,r,u=(0,g.o5)(null!==(n=null===(i=t.match((0,a.Z)(/\[(\d+)\]/,{idx:1})))||void 0===i||null===(r=i.groups)||void 0===r?void 0:r.idx)&&void 0!==n?n:"0");return this.ram.at(u)}if(null!==t&&void 0!==t&&t.startsWith("Screen")){var s,l,h,v=(0,g.o5)(null!==(s=null===(l=t.match((0,a.Z)(/\[(\d+)\]/,{idx:1})))||void 0===l||null===(h=l.groups)||void 0===h?void 0:h.idx)&&void 0!==s?s:"0");return this.screen.at(v)}return(0,o.Z)((0,c.Z)(e.prototype),"in",this).call(this,t)}},{key:"get",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.startsWith("RAM16K")?this.at(16383&n):t.startsWith("Screen")?this.at(n&8191+A.OFFSET):t.startsWith("Keyboard")?this.at(S.OFFSET):t.startsWith("Memory")?this.at(n):(0,o.Z)((0,c.Z)(e.prototype),"get",this).call(this,t,n)}},{key:"at",value:function(t){return t>=S.OFFSET?this.keyboard.out():t>=A.OFFSET?this.screen.at(t-A.OFFSET):this.ram.at(t)}}]),e}(m.tI),P=function(t){(0,p.Z)(e,t);var n=(0,Z.Z)(e);function e(){var t;return(0,d.Z)(this,e),t=n.call(this,["inM[16]","instruction[16]","reset"],["outM[16]","writeM","addressM[15]","pc[15]"]),(0,l.Z)((0,s.Z)(t),"_state",(0,y.Zu)()),t}return(0,f.Z)(e,[{key:"state",get:function(){return this._state}},{key:"tick",value:function(){var t,n=(0,y.aL)(this.cpuInput(),this._state),e=(0,u.Z)(n,2),i=e[0],r=e[1];this._state=i,this.out("writeM").pull(r?m.lj:m.yE),this.out("outM").busVoltage=null!==(t=this._state.ALU)&&void 0!==t?t:0}},{key:"tock",value:function(){var t,n,e,i;if(this._state){var r=(0,y.Ff)(this.cpuInput(),this._state),a=(0,u.Z)(r,2),s=a[0],o=a[1];this._state=o,this.out("addressM").busVoltage=null!==(t=s.addressM)&&void 0!==t?t:0,this.out("outM").busVoltage=null!==(n=s.outM)&&void 0!==n?n:0,this.out("writeM").pull(s.writeM?m.lj:m.yE),this.out("pc").busVoltage=null!==(e=null===(i=this._state)||void 0===i?void 0:i.PC)&&void 0!==e?e:0}}},{key:"cpuInput",value:function(){return{inM:this.in("inM").busVoltage,instruction:this.in("instruction").busVoltage,reset:1===this.in("reset").busVoltage}}},{key:"get",value:function(t,n){return null!==t&&void 0!==t&&t.startsWith("ARegister")?new m.qP("ARegister",this._state.A):null!==t&&void 0!==t&&t.startsWith("DRegister")?new m.qP("DRegister",this._state.D):null!==t&&void 0!==t&&t.startsWith("PC")?new m.qP("PC",this._state.PC):(0,o.Z)((0,c.Z)(e.prototype),"get",this).call(this,t,n)}},{key:"reset",value:function(){this._state=(0,y.Zu)(),(0,o.Z)((0,c.Z)(e.prototype),"reset",this).call(this)}}]),e}(m.tI),V=new WeakMap,E=new WeakMap,O=new WeakMap,D=function(t){(0,p.Z)(e,t);var n=(0,Z.Z)(e);function e(){var t;return(0,d.Z)(this,e),t=n.call(this,["reset"],[]),(0,i.Z)((0,s.Z)(t),V,{writable:!0,value:new M}),(0,i.Z)((0,s.Z)(t),E,{writable:!0,value:new x}),(0,i.Z)((0,s.Z)(t),O,{writable:!0,value:new P}),t.wire((0,r.Z)((0,s.Z)(t),O),[{from:{name:"reset",start:0},to:{name:"reset",start:0}},{from:{name:"instruction",start:0},to:{name:"instruction",start:0}},{from:{name:"outM",start:0},to:{name:"inM",start:0}},{from:{name:"writeM",start:0},to:{name:"writeM",start:0}},{from:{name:"addressM",start:0},to:{name:"addressM",start:0}}]),t.wire((0,r.Z)((0,s.Z)(t),E),[{from:{name:"pc",start:0},to:{name:"address",start:0}},{from:{name:"instruction",start:0},to:{name:"out",start:0}}]),t.wire((0,r.Z)((0,s.Z)(t),V),[{from:{name:"inM",start:0},to:{name:"in",start:0}},{from:{name:"writeM",start:0},to:{name:"load",start:0}},{from:{name:"addressM",start:0},to:{name:"address",start:0}},{from:{name:"outM",start:0},to:{name:"out",start:0}}]),t}return(0,f.Z)(e,[{key:"eval",value:function(){(0,o.Z)((0,c.Z)(e.prototype),"eval",this).call(this)}},{key:"get",value:function(t,n){return t.startsWith("PC")||t.startsWith("ARegister")||t.startsWith("DRegister")?(0,r.Z)(this,O).get(t):t.startsWith("RAM16K")?(0,r.Z)(this,V).get(t,n):(0,o.Z)((0,c.Z)(e.prototype),"get",this).call(this,t,n)}},{key:"load",value:function(t,n){return(0,r.Z)(this,E).load(t,n)}}]),e}(m.Af)},3118:function(t,n,e){e.d(n,{JU:function(){return T},zZ:function(){return z},cT:function(){return K},_c:function(){return q}});var i=e(1026),r=e(4625),u=e(2951),a=e(1976),s=e(7591),o=e(4337),c=e(6329);var l=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a","b"],["out"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n){return[1===t&&1===n?c.lj:c.yE]}(this.in("a").voltage(),this.in("b").voltage()),n=(0,i.Z)(t,1)[0];this.out().pull(n)}}]),e}(c.Af),h=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a[16]","b[16]"],["out[16]"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n){return[t&n&65535]}(this.in("a").busVoltage,this.in("b").busVoltage),n=(0,i.Z)(t,1)[0];this.out().busVoltage=n}}]),e}(c.Af);var v=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["in","sel"],["a","b"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n){return[n===c.yE&&t===c.lj?c.lj:c.yE,n===c.lj&&t===c.lj?c.lj:c.yE]}(this.in("in").voltage(),this.in("sel").voltage()),n=(0,i.Z)(t,2),e=n[0],r=n[1];this.out("a").pull(e),this.out("b").pull(r)}}]),e}(c.Af),d=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["in","sel[2]"],["a","b","c","d"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n){return[0===n&&t===c.lj?c.lj:c.yE,1===n&&t===c.lj?c.lj:c.yE,2===n&&t===c.lj?c.lj:c.yE,3===n&&t===c.lj?c.lj:c.yE]}(this.in("in").voltage(),this.in("sel").busVoltage),n=(0,i.Z)(t,4),e=n[0],r=n[1],u=n[2],a=n[3];this.out("a").pull(e),this.out("b").pull(r),this.out("c").pull(u),this.out("d").pull(a)}}]),e}(c.Af),f=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["in","sel[3]"],["a","b","c","d","e","f","g","h"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n){return[0===n&&t===c.lj?c.lj:c.yE,1===n&&t===c.lj?c.lj:c.yE,2===n&&t===c.lj?c.lj:c.yE,3===n&&t===c.lj?c.lj:c.yE,4===n&&t===c.lj?c.lj:c.yE,5===n&&t===c.lj?c.lj:c.yE,6===n&&t===c.lj?c.lj:c.yE,7===n&&t===c.lj?c.lj:c.yE]}(this.in("in").voltage(),this.in("sel").busVoltage),n=(0,i.Z)(t,8),e=n[0],r=n[1],u=n[2],a=n[3],s=n[4],o=n[5],l=n[6],h=n[7];this.out("a").pull(e),this.out("b").pull(r),this.out("c").pull(u),this.out("d").pull(a),this.out("e").pull(s),this.out("f").pull(o),this.out("g").pull(l),this.out("h").pull(h)}}]),e}(c.Af);function p(t,n,e){return[e===c.yE?t:n]}function Z(t,n,e,i,r){var u=1&r;return 0===(2&r)?p(t,n,u):p(e,i,u)}var m=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a","b","sel"],["out"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n,e){return[e===c.yE?t:n]}(this.in("a").voltage(),this.in("b").voltage(),this.in("sel").voltage()),n=(0,i.Z)(t,1)[0];this.out().pull(n)}}]),e}(c.Af),b=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a[16]","b[16]","sel"],["out[16]"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=p(this.in("a").busVoltage,this.in("b").busVoltage,this.in("sel").voltage()),n=(0,i.Z)(t,1)[0];this.out().busVoltage=n}}]),e}(c.Af),y=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a[16]","b[16]","c[16]","d[16]","sel[2]"],["out[16]"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=Z(this.in("a").busVoltage,this.in("b").busVoltage,this.in("c").busVoltage,this.in("d").busVoltage,this.in("sel").busVoltage),n=(0,i.Z)(t,1)[0];this.out().busVoltage=n}}]),e}(c.Af),g=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a[16]","b[16]","c[16]","d[16]","e[16]","f[16]","g[16]","h[16]","sel[3]"],["out[16]"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n,e,i,r,u,a,s,o){var c=3&o;return 0===(4&o)?Z(t,n,e,i,c):Z(r,u,a,s,c)}(this.in("a").busVoltage,this.in("b").busVoltage,this.in("c").busVoltage,this.in("d").busVoltage,this.in("e").busVoltage,this.in("f").busVoltage,this.in("g").busVoltage,this.in("h").busVoltage,this.in("sel").busVoltage),n=(0,i.Z)(t,1)[0];this.out().busVoltage=n}}]),e}(c.Af),k=e(326);var w=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a","b"],["out"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n){return[1===t&&1===n?c.yE:c.lj]}(this.in("a").voltage(),this.in("b").voltage()),n=(0,i.Z)(t,1)[0];this.out().pull(n)}}]),e}(c.Af),x=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a[16]","b[16]"],["out[16]"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=this.in("a").busVoltage,n=this.in("b").busVoltage;this.out().busVoltage=(0,k.C2)(t,n)}}]),e}(c.Af);var A=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["in"],["out"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=this.in("in").voltage(),n=[t===c.yE?c.lj:c.yE],e=(0,i.Z)(n,1)[0];this.out().pull(e)}}]),e}(c.Af),S=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["in[16]"],["out[16]"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=[65535&~this.in().busVoltage],n=(0,i.Z)(t,1)[0];this.out().busVoltage=n}}]),e}(c.Af);function M(t,n){return[1===t||1===n?c.lj:c.yE]}var P=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a","b"],["out"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=M(this.in("a").voltage(),this.in("b").voltage()),n=(0,i.Z)(t,1)[0];this.out().pull(n)}}]),e}(c.Af),V=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a[16]","b[16]"],["out[16]"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n){return[65535&(t|n)]}(this.in("a").busVoltage,this.in("b").busVoltage),n=(0,i.Z)(t,1)[0];this.out().busVoltage=n}}]),e}(c.Af),E=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["in[8]"],["out"],"Or8way")}return(0,a.Z)(e,[{key:"eval",value:function(){var t=this.in().busVoltage,n=[0===(255&t)?c.yE:c.lj],e=(0,i.Z)(n,1)[0];this.out().pull(e)}}]),e}(c.Af);var O=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a","b"],["out"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n){return[t===c.lj&&n===c.yE||t===c.yE&&n===c.lj?c.lj:c.yE]}(this.in("a").voltage(),this.in("b").voltage()),n=(0,i.Z)(t,1)[0];this.out().pull(n)}}]),e}(c.Af),D=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a[16]","b[16]"],["out[16]"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n){return[65535&(t^n)]}(this.in("a").busVoltage,this.in("b").busVoltage),n=(0,i.Z)(t,1)[0];this.out().busVoltage=n}}]),e}(c.Af);function j(t,n){return[t+n&65535]}var C=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a[16]","b[16]"],["out[16]"],"Add16")}return(0,a.Z)(e,[{key:"eval",value:function(){var t=j(this.in("a").busVoltage,this.in("b").busVoltage),n=(0,i.Z)(t,1)[0];this.out().busVoltage=n}}]),e}(c.Af),L=e(6693),R=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["x[16]","y[16]","zx","nx","zy","ny","f","no"],["out[16]"],"ALU")}return(0,a.Z)(e,[{key:"eval",value:function(){var t=this.in("x").busVoltage,n=this.in("y").busVoltage,e=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage<<0),r=(0,L.Bb)(e,t,n),u=(0,i.Z)(r,1)[0];this.out().busVoltage=u}}]),e}(c.Af),T=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["x[16]","y[16]","zx","nx","zy","ny","f","no"],["out[16]","zr","ng"],"ALU")}return(0,a.Z)(e,[{key:"eval",value:function(){var t=this.in("x").busVoltage,n=this.in("y").busVoltage,e=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage<<0),r=(0,L.Bb)(e,t,n),u=(0,i.Z)(r,2),a=u[0],s=u[1],o=s===L.vU.Negative?c.lj:c.yE,l=s===L.vU.Zero?c.lj:c.yE;this.out("out").busVoltage=a,this.out("ng").pull(o),this.out("zr").pull(l)}},{key:"op",value:function(){var t=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage<<0);return t}}]),e}(c.Af);function I(t,n){return[1===t&&0===n||0===t&&1===n?c.lj:c.yE,1===t&&1===n?c.lj:c.yE]}var F=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a","b"],["sum","carry"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=I(this.in("a").voltage(),this.in("b").voltage()),n=(0,i.Z)(t,2),e=n[0],r=n[1];this.out("sum").pull(e),this.out("carry").pull(r)}}]),e}(c.Af);var _=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["a","b","c"],["sum","carry"])}return(0,a.Z)(e,[{key:"eval",value:function(){var t=function(t,n,e){var r=I(t,n),u=(0,i.Z)(r,2),a=u[0],s=u[1],o=I(a,e),c=(0,i.Z)(o,2),l=c[0],h=M(s,c[1]);return[l,(0,i.Z)(h,1)[0]]}(this.in("a").voltage(),this.in("b").voltage(),this.in("c").voltage()),n=(0,i.Z)(t,2),e=n[0],r=n[1];this.out("sum").pull(e),this.out("carry").pull(r)}}]),e}(c.Af);var B=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(){return(0,u.Z)(this,e),n.call(this,["in[16]"],["out[16]"],"Inc16")}return(0,a.Z)(e,[{key:"eval",value:function(){var t=this.in().busVoltage,n=j(t,1),e=(0,i.Z)(n,1)[0];this.out().busVoltage=e}}]),e}(c.Af),W=e(3300),N=e(7039),U=function(t){(0,s.Z)(e,t);var n=(0,o.Z)(e);function e(t){return(0,u.Z)(this,e),n.call(this,["in"],["out"],t,["t"])}return(0,a.Z)(e,[{key:"tick",value:function(){var t=this.in().voltage();this.pin("t").pull(t)}},{key:"tock",value:function(){var t=this.pin("t").voltage();this.out().pull(t)}}]),e}(c.tI),J=e(3116),z=new Map([["Nand",w],["Nand16",x],["Not",A],["Not16",S],["And",l],["And16",h],["Or",P],["Or16",V],["Or8Way",E],["XOr",O],["XOr16",D],["Xor",O],["Xor16",D],["Mux",m],["Mux16",b],["Mux4Way16",y],["Mux8Way16",g],["DMux",v],["DMux4Way",d],["DMux8Way",f],["HalfAdder",F],["FullAdder",_],["Add16",C],["Inc16",B],["ALU",T],["ALUNoStat",R],["DFF",U],["Bit",N.sU],["Register",N.aX],["ARegister",N.aX],["DRegister",N.aX],["PC",N.PC],["RAM8",J.HX],["RAM64",J.IH],["RAM512",J.OB],["RAM4K",J.rS],["RAM16K",J.xs],["ROM32K",W.m1],["Screen",W.lL],["Keyboard",W.N1],["CPU",W.Z9],["Computer",W.ar],["Memory",W.zp],["ARegister",N.l0],["DRegister",N.l0]].map((function(t){var n=(0,i.Z)(t,2),e=n[0],r=n[1];return[e,function(){var t=new r;return t.name=e,t}]})));function q(t){return z.has(t)}function K(t){var n=z.get(t);return n?(0,r.Ok)(n()):(0,r.UG)(new Error("Chip ".concat(t," not in builtin registry")))}},7039:function(t,n,e){e.d(n,{PC:function(){return p},aX:function(){return d},l0:function(){return f},sU:function(){return v}});var i=e(3243),r=e(7597),u=e(2951),a=e(1976),s=e(7169),o=e(7591),c=e(4337),l=e(4649),h=e(6329),v=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t){var i;return(0,u.Z)(this,e),i=n.call(this,["in","load"],["out"],t),(0,l.Z)((0,s.Z)(i),"bit",h.yE),i}return(0,a.Z)(e,[{key:"tick",value:function(){this.in("load").voltage()===h.lj&&(this.bit=this.in().voltage())}},{key:"tock",value:function(){var t;this.out().pull(null!==(t=this.bit)&&void 0!==t?t:0)}},{key:"reset",value:function(){this.bit=h.yE}}]),e}(h.tI),d=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t){var i;return(0,u.Z)(this,e),i=n.call(this,["in[16]","load"],["out[16]"],t),(0,l.Z)((0,s.Z)(i),"bits",0),i}return(0,a.Z)(e,[{key:"tick",value:function(){this.in("load").voltage()===h.lj&&(this.bits=65535&this.in().busVoltage)}},{key:"tock",value:function(){this.out().busVoltage=65535&this.bits}},{key:"get",value:function(t,n){return t===this.name?this.out():(0,i.Z)((0,r.Z)(e.prototype),"get",this).call(this,t,n)}},{key:"reset",value:function(){this.bits=0}}]),e}(h.tI),f=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(){return(0,u.Z)(this,e),n.apply(this,arguments)}return(0,a.Z)(e)}(d),p=function(t){(0,o.Z)(e,t);var n=(0,c.Z)(e);function e(t){var i;return(0,u.Z)(this,e),i=n.call(this,["in[16]","load","inc","reset"],["out[16]"],t),(0,l.Z)((0,s.Z)(i),"bits",0),i}return(0,a.Z)(e,[{key:"tick",value:function(){this.in("reset").voltage()===h.lj?this.bits=0:this.in("load").voltage()===h.lj?this.bits=65535&this.in().busVoltage:this.in("inc").voltage()===h.lj&&(this.bits+=1)}},{key:"tock",value:function(){this.out().busVoltage=65535&this.bits}},{key:"get",value:function(t,n){return t===this.name?this.out():(0,i.Z)((0,r.Z)(e.prototype),"get",this).call(this,t,n)}},{key:"reset",value:function(){this.bits=0}}]),e}(h.tI)},3116:function(t,n,e){e.d(n,{FH:function(){return v},HX:function(){return f},IH:function(){return p},OB:function(){return Z},rS:function(){return m},xs:function(){return b}});var i=e(2951),r=e(1976),u=e(7169),a=e(7591),s=e(4337),o=e(4649),c=e(6329),l=e(5541),h=e(5838),v=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(t,r){var a;return(0,i.Z)(this,e),a=n.call(this,["in[16]","load","address[".concat(t,"]")],["out[16]"],r),(0,o.Z)((0,u.Z)(a),"width",void 0),(0,o.Z)((0,u.Z)(a),"_memory",void 0),(0,o.Z)((0,u.Z)(a),"_nextData",0),(0,o.Z)((0,u.Z)(a),"_address",0),a.width=t,a._memory=new h.zp(Math.pow(2,a.width)),a}return(0,r.Z)(e,[{key:"memory",get:function(){return this._memory}},{key:"address",get:function(){return this._address}},{key:"tick",value:function(){var t=this.in("load").voltage();this._address=this.in("address").busVoltage,t&&(this._nextData=this.in().busVoltage,this._memory.set(this._address,this._nextData))}},{key:"tock",value:function(){var t,n;this.out().busVoltage=null!==(t=null===(n=this._memory)||void 0===n?void 0:n.get(this._address))&&void 0!==t?t:0}},{key:"eval",value:function(){var t,n,e=this.in("address").busVoltage;this.out().busVoltage=null!==(t=null===(n=this._memory)||void 0===n?void 0:n.get(e))&&void 0!==t?t:0}},{key:"at",value:function(t){var n=this;return(0,l.hu)(t<this._memory.size,(function(){return"Request out of bounds (".concat(t," >= ").concat(n._memory.size,")")})),new d("".concat(this.name,"[").concat(t,"]"),t,this._memory)}}]),e}(c.tI),d=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(t,r,a){var s;return(0,i.Z)(this,e),s=n.call(this,t),(0,o.Z)((0,u.Z)(s),"index",void 0),(0,o.Z)((0,u.Z)(s),"ram",void 0),s.index=r,s.ram=a,s}return(0,r.Z)(e,[{key:"busVoltage",get:function(){return this.ram.get(this.index)},set:function(t){this.ram.set(this.index,t)}}]),e}(c.Gc),f=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(t){return(0,i.Z)(this,e),n.call(this,3,t)}return(0,r.Z)(e)}(v),p=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(t){return(0,i.Z)(this,e),n.call(this,6,t)}return(0,r.Z)(e)}(v),Z=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(t){return(0,i.Z)(this,e),n.call(this,9,t)}return(0,r.Z)(e)}(v),m=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(t){return(0,i.Z)(this,e),n.call(this,12,t)}return(0,r.Z)(e)}(v),b=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(t){return(0,i.Z)(this,e),n.call(this,14,t)}return(0,r.Z)(e)}(v)},6329:function(t,n,e){e.d(n,{Af:function(){return L},Gc:function(){return S},P9:function(){return R},lj:function(){return x},qP:function(){return V},tI:function(){return I},yE:function(){return A}});var i,r=e(3243),u=e(7597),a=e(7538),s=e(3943),o=e(1092),c=e(7791),l=e(1026),h=e(9422),v=e(7169),d=e(7591),f=e(4337),p=e(726),Z=e(649),m=e(2951),b=e(1976),y=e(4649),g=e(5541),k=e(1585),w=e(6531),x=1,A=0,S=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,m.Z)(this,t),(0,y.Z)(this,"name",void 0),(0,y.Z)(this,"width",void 0),(0,y.Z)(this,"state",void 0),(0,y.Z)(this,"next",[]),this.name=n,this.width=e,this.state=(0,k.w)(0,this.width).map((function(){return A}))}return(0,b.Z)(t,[{key:"ensureWidth",value:function(t){(0,g.hu)(t<=16,"Cannot widen past 16 to ".concat(t," bits")),this.width<t&&(this.width=t,this.state=[].concat((0,Z.Z)(this.state),(0,Z.Z)((0,k.w)(this.width,t).map((function(){return A})))))}},{key:"connect",value:function(t){this.next.push(t),t.busVoltage=this.busVoltage}},{key:"pull",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,g.hu)(n>=0&&n<this.width,"Bit out of bounds: ".concat(this.name,"@").concat(n)),this.state[n]=t,this.next.forEach((function(e){return e.pull(t,n)}))}},{key:"voltage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,g.hu)(t>=0&&t<this.width),this.state[t]}},{key:"busVoltage",get:function(){var t=this;return(0,k.w)(0,this.width).reduce((function(n,e){return n|t.state[e]<<e}),0)},set:function(t){var n,e=this,i=(0,p.Z)((0,k.w)(0,this.width));try{for(i.s();!(n=i.n()).done;){var r=n.value;this.state[r]=(t&1<<r)>>r}}catch(u){i.e(u)}finally{i.f()}this.next.forEach((function(t){return t.busVoltage=e.busVoltage}))}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.voltage(t)===A?x:A;this.pull(n,t)}}]),t}(),M=function(t){(0,d.Z)(e,t);var n=(0,f.Z)(e);function e(t,i){var r,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,m.Z)(this,e),r=n.call(this,t.name),(0,y.Z)((0,v.Z)(r),"bus",void 0),(0,y.Z)((0,v.Z)(r),"start",void 0),(0,y.Z)((0,v.Z)(r),"width",void 0),r.bus=t,r.start=i,r.width=u,(0,g.hu)(i>=0&&i+u<=t.width,"Mismatched InSubBus dimensions on ".concat(t.name," (").concat(u," + ").concat(i," > ").concat(t.width,")")),r.connect(t),r}return(0,b.Z)(e,[{key:"pull",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,g.hu)(n>=0&&n<this.width),this.bus.pull(t,this.start+n)}},{key:"voltage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,g.hu)(t>=0&&t<this.width),this.bus.voltage(this.start+t)}},{key:"busVoltage",get:function(){return this.bus.busVoltage>>this.start&F(this.width)},set:function(t){var n=this.bus.busVoltage&~F(this.width+this.start),e=this.bus.busVoltage&F(this.start),i=(t&F(this.width))<<this.start;this.bus.busVoltage=n|i|e}},{key:"connect",value:function(t){(0,g.hu)(this.start+this.width<=t.width,"Mismatched InSubBus connection dimensions (From ".concat(t.name," to ").concat(this.name,")")),this.bus=t}}]),e}(S),P=function(t){(0,d.Z)(e,t);var n=(0,f.Z)(e);function e(t,i){var r,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,m.Z)(this,e),r=n.call(this,t.name),(0,y.Z)((0,v.Z)(r),"bus",void 0),(0,y.Z)((0,v.Z)(r),"start",void 0),(0,y.Z)((0,v.Z)(r),"width",void 0),r.bus=t,r.start=i,r.width=u,(0,g.hu)(i>=0&&u<=t.width,"Mismatched OutSubBus dimensions"),r.connect(t),r}return(0,b.Z)(e,[{key:"busVoltage",get:function(){return this.bus.busVoltage&F(this.width)},set:function(t){this.bus.busVoltage=(t&F(this.width+this.start))>>this.start}},{key:"connect",value:function(t){(0,g.hu)(this.width<=t.width,"Mismatched OutSubBus connection dimensions"),this.bus=t}}]),e}(S),V=function(t){(0,d.Z)(e,t);var n=(0,f.Z)(e);function e(t,i){var r;return(0,m.Z)(this,e),r=n.call(this,t,16),(0,y.Z)((0,v.Z)(r),"value",void 0),r.value=i,r}return(0,b.Z)(e,[{key:"pullHigh",value:function(){}},{key:"pullLow",value:function(){}},{key:"voltage",value:function(){return 1&this.busVoltage}},{key:"busVoltage",get:function(){return this.value},set:function(t){}}]),e}(S),E=new V("true",65535),O=new V("false",0);function D(t){var n,e=null===(n=t.match((0,h.Z)(/([a-zA-Z]+)(\[(\d+)\])?/,{pin:1,w:3})))||void 0===n?void 0:n.groups,i=e.pin,r=e.w;return{pin:i,width:r?Number(r):1}}i=Symbol.iterator;var j=function(){function t(){(0,m.Z)(this,t),(0,y.Z)(this,"map",new Map)}return(0,b.Z)(t,[{key:"insert",value:function(t){var n=t.name;(0,g.hu)(!this.map.has(n),"Pins already has ".concat(n,"!")),this.map.set(n,t)}},{key:"emplace",value:function(t,n){if(this.has(t))return this.get(t);var e=new S(t,n);return this.insert(e),e}},{key:"has",value:function(t){return this.map.has(t)}},{key:"get",value:function(t){return this.map.get(t)}},{key:"entries",value:function(){return this.map.values()}},{key:i,value:function(){return this.map[Symbol.iterator]()}}]),t}(),C=0,L=function(){function t(n,e,i){var r=this,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];(0,m.Z)(this,t),(0,y.Z)(this,"name",void 0),(0,y.Z)(this,"id",C++),(0,y.Z)(this,"ins",new j),(0,y.Z)(this,"outs",new j),(0,y.Z)(this,"pins",new j),(0,y.Z)(this,"parts",new Set),(0,y.Z)(this,"clockedPins",void 0),this.name=i;var s,o=(0,p.Z)(n);try{for(o.s();!(s=o.n()).done;){var c=s.value,l=void 0!==c.pin?c:D(c),h=l.pin,v=l.width,d=void 0===v?1:v;this.ins.insert(new S(h,d))}}catch(T){o.e(T)}finally{o.f()}var f,Z=(0,p.Z)(e);try{for(Z.s();!(f=Z.n()).done;){var b=f.value,g=void 0!==b.pin?b:D(b),k=g.pin,x=g.width,A=void 0===x?1:x;this.outs.insert(new S(k,A))}}catch(T){Z.e(T)}finally{Z.f()}var M,P=(0,p.Z)(u);try{for(P.s();!(M=P.n()).done;){var V=M.value,E=void 0!==V.pin?V:D(V),O=E.pin,L=E.width,R=void 0===L?1:L;this.pins.insert(new S(O,R))}}catch(T){P.e(T)}finally{P.f()}this.clockedPins=new Set(a),w.S.get().$.subscribe((function(){return r.eval()}))}return(0,b.Z)(t,[{key:"clocked",get:function(){if(this.clockedPins.size>0)return!0;var t,n=(0,p.Z)(this.parts);try{for(n.s();!(t=n.n()).done;){if(t.value.clocked)return!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"reset",value:function(){var t,n=(0,p.Z)(this.ins);try{for(n.s();!(t=n.n()).done;){var e=(0,l.Z)(t.value,2);e[0];e[1].busVoltage=0}}catch(u){n.e(u)}finally{n.f()}var i,r=(0,p.Z)(this.parts);try{for(r.s();!(i=r.n()).done;){i.value.reset()}}catch(u){r.e(u)}finally{r.f()}this.eval()}},{key:"in",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"in";return(0,g.hu)(this.hasIn(t),"No in pin ".concat(t)),this.ins.get(t)}},{key:"out",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"out";return(0,g.hu)(this.hasOut(t),"No in pin ".concat(t)),this.outs.get(t)}},{key:"hasIn",value:function(t){return this.ins.has(t)}},{key:"hasOut",value:function(t){return this.outs.has(t)}},{key:"pin",value:function(t){return(0,g.hu)(this.pins.has(t)),this.pins.get(t)}},{key:"get",value:function(t,n){return this.ins.has(t)?this.ins.get(t):this.outs.has(t)?this.outs.get(t):this.pins.has(t)?this.pins.get(t):this.getBuiltin(t,n)}},{key:"getBuiltin",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(_.includes(t)){var e,i=(0,p.Z)(this.parts);try{for(i.s();!(e=i.n()).done;){var r=e.value,u=r.get(t,n);if(u)return u}}catch(a){i.e(a)}finally{i.f()}}}},{key:"isOutPin",value:function(t){return this.outs.has(t)}},{key:"wire",value:function(t,n){this.parts.add(t);var e,i=(0,p.Z)(n);try{for(i.s();!(e=i.n()).done;){var r=e.value,u=r.to,a=r.from;t.isOutPin(u.name)?this.wireOutPin(t,u,a):this.wireInPin(t,u,a)}}catch(s){i.e(s)}finally{i.f()}}},{key:"findPin",value:function(t,n){return"true"===t.toLowerCase()||"1"===t?E:"false"===t.toLowerCase()||"0"===t?O:this.ins.has(t)?this.ins.get(t):this.outs.has(t)?this.outs.get(t):this.pins.emplace(t,n)}},{key:"wireOutPin",value:function(t,n,e){var i,r,u,a=(0,g.kP)(t.outs.get(n.name),(function(){return"Cannot wire to missing pin ".concat(n.name)}));null!==(i=n.width)&&void 0!==i||(n.width=a.width);var s=this.findPin(e.name,null!==(r=e.width)&&void 0!==r?r:n.width),o=this.pins.has(s.name);if(null!==(u=e.width)&&void 0!==u||(e.width=s.width),s instanceof V)throw new Error("Cannot wire to constant bus");o&&s instanceof S&&s.ensureWidth(e.start+e.width),(e.start>0||e.width!==s.width)&&(s=new M(s,e.start,e.width)),(n.start>0||n.width!==s.width)&&(s=new P(s,n.start,n.width)),a.connect(s)}},{key:"wireInPin",value:function(t,n,e){var i,r,u,a=(0,g.kP)(t.ins.get(n.name),(function(){return"Cannot wire to missing pin ".concat(n.name)}));null!==(i=n.width)&&void 0!==i||(n.width=a.width);var s=this.findPin(e.name,null!==(r=e.width)&&void 0!==r?r:n.width);null!==(u=e.width)&&void 0!==u||(e.width=s.width),(n.start>0||n.width!==s.width)&&(a=new M(a,n.start,n.width)),["true","false"].includes(s.name)||(e.start>0||e.width!==s.width)&&(a=new P(a,e.start,e.width)),s.connect(a)}},{key:"eval",value:function(){var t,n=(0,p.Z)(this.parts);try{for(n.s();!(t=n.n()).done;){t.value.eval()}}catch(e){n.e(e)}finally{n.f()}}},{key:"tick",value:function(){this.eval()}},{key:"tock",value:function(){this.eval()}},{key:"remove",value:function(){var t,n=(0,p.Z)(this.parts);try{for(n.s();!(t=n.n()).done;){t.value.remove()}}catch(e){n.e(e)}finally{n.f()}}},{key:"load",value:function(){var t=(0,c.Z)((0,o.Z)().mark((function t(n,e){var i,r,u;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=(0,p.Z)(this.parts),t.prev=1,i.s();case 3:if((r=i.n()).done){t.next=10;break}if("ROM32K"!==(u=r.value).name){t.next=8;break}return t.next=8,u.load(n,e);case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),i.e(t.t0);case 15:return t.prev=15,i.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[1,12,15,18]])})));return function(n,e){return t.apply(this,arguments)}}()}]),t}(),R=function(t){(0,d.Z)(e,t);var n=(0,f.Z)(e);function e(){var t;return(0,m.Z)(this,e),(t=n.call(this,[],[])).outs.insert(O),t}return(0,b.Z)(e)}(L),T=new WeakMap,I=function(t){(0,d.Z)(e,t);var n=(0,f.Z)(e);function e(){var t;(0,m.Z)(this,e);for(var i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return t=n.call.apply(n,[this].concat(r)),(0,a.Z)((0,v.Z)(t),T,{writable:!0,value:w.S.get().$.subscribe((function(n){n.level===A?t.tock():t.tick()}))}),t}return(0,b.Z)(e,[{key:"clocked",get:function(){return!0}},{key:"remove",value:function(){(0,s.Z)(this,T).unsubscribe(),(0,r.Z)((0,u.Z)(e.prototype),"remove",this).call(this)}}]),e}(L);function F(t){return Math.pow(2,t)-1}var _=["Register","ARegister","DRegister","PC","RAM8","RAM64","RAM512","RAM4K","RAM16K","ROM32K","Screen","Keyboard","Memory"]},6531:function(t,n,e){e.d(n,{S:function(){return h}});var i,r=e(2951),u=e(1976),a=e(4649),s=e(1496),o=e(9810),c=e(5541),l=e(6329),h=function(){function t(){(0,r.Z)(this,t),(0,a.Z)(this,"level",l.yE),(0,a.Z)(this,"ticks",0),(0,a.Z)(this,"subject",new s.X({level:this.level,ticks:this.ticks})),(0,a.Z)(this,"frameSubject",new o.x),(0,a.Z)(this,"$",this.subject),(0,a.Z)(this,"frame$",this.frameSubject)}return(0,u.Z)(t,[{key:"isHigh",get:function(){return this.level===l.lj}},{key:"isLow",get:function(){return this.level===l.yE}},{key:"next",value:function(){this.subject.next({level:this.level,ticks:this.ticks})}},{key:"reset",value:function(){this.level=l.yE,this.ticks=0,this.next()}},{key:"tick",value:function(){(0,c.hu)(this.level===l.yE,"Can only tick up from LOW"),this.level=l.lj,this.next()}},{key:"tock",value:function(){(0,c.hu)(this.level===l.lj,"Can only tock down from HIGH"),this.level=l.yE,this.ticks+=1,this.next()}},{key:"toggle",value:function(){this.level===l.lj?this.tock():this.tick()}},{key:"eval",value:function(){this.tick(),this.tock()}},{key:"frame",value:function(){this.frameSubject.next()}},{key:"toString",value:function(){return"".concat(this.ticks).concat(this.level===l.lj?"+":"")}}],[{key:"get",value:function(){return void 0===i&&(i=new t),i}}]),t}()},6693:function(t,n,e){e.d(n,{Bb:function(){return s},PH:function(){return i},Uc:function(){return r},lK:function(){return u},vU:function(){return a}});var i={asm:{0:42,1:63,"-1":58,D:12,A:48,M:48,"!D":13,"!A":49,"-D":15,"-A":51,"D+1":31,"A+1":55,"D-1":14,"A-1":50,"D+A":2,"D-A":19,"D-M":19,"A-D":7,"D&A":0,"D&M":0,"D|A":21,"D|M":21},op:{42:"0",63:"1",58:"-1",12:"D",48:"A",13:"!D",49:"!A",15:"-D",51:"-A",31:"D+1",55:"A+1",14:"D-1",50:"A-1",2:"D+A",19:"D-A",7:"A-D",0:"D&A",21:"D|A"}},r={asm:{"":0,M:1,D:2,MD:3,A:4,AM:5,AD:6,AMD:7},op:{0:"",1:"M",2:"D",3:"MD",4:"A",5:"AM",6:"AD",7:"AMD"}},u={asm:{"":0,JGT:1,JEQ:2,JGE:3,JLT:4,JNE:5,JLE:6,JMP:7},op:{0:"",1:"JGT",2:"JEQ",3:"JGE",4:"JLT",5:"JNE",6:"JLE",7:"JMP"}},a={1:"Positive",0:"Zero",15:"Negative",Positive:1,Zero:0,Negative:15};function s(t,n,e){var i=0;switch(t){case 42:i=0;break;case 63:i=1;break;case 58:i=-1;break;case 12:i=n;break;case 48:i=e;break;case 13:i=~n;break;case 49:i=~e;break;case 15:i=-n;break;case 51:i=-e;break;case 31:i=n+1;break;case 55:i=e+1;break;case 14:i=n-1;break;case 50:i=e-1;break;case 2:i=n+e;break;case 19:i=n-e;break;case 7:i=e-n;break;case 0:i=n&e;break;case 21:i=n|e}return[i&=65535,0===i?a.Zero:32768&i?a.Negative:a.Positive]}},134:function(t,n,e){e.d(n,{Ff:function(){return M},Jx:function(){return A},Z9:function(){return D},Zu:function(){return v},aL:function(){return S}});var i=e(2951),r=e(1976),u=e(7538),a=e(4649),s=e(2648),o=e(3943),c=e(1026),l=e(6693),h=e(5838);function v(){return{A:0,D:0,PC:0,ALU:0,flag:l.vU.Zero}}var d=32768,f=36864,p=36864,Z=36864,m=4032,b=32800,y=32784,g=32776,k=32769,w=32770,x=32772;function A(t){function n(n){return(t&n)===n}return{c:n(d),x1:n(f),x2:n(p),am:n(Z),op:(t&m)>>6,d1:n(b),d2:n(y),d3:n(g),j1:n(k),j2:n(w),j3:n(x)}}function S(t,n){var e=t.inM,i=t.instruction,r=n.A,u=n.D,a=n.PC,s=A(i),o=s.am?e:r,h=(0,l.Bb)(s.op,u,o),v=(0,c.Z)(h,2);return[{A:r,D:u,PC:a+1,ALU:v[0],flag:v[1]},s.d3]}function M(t,n){var e=t.inM,i=t.instruction,r=t.reset,u=n.A,a=n.D,s=n.PC,o=n.ALU,c=n.flag,h=A(i),v=h.j1&&c===l.vU.Positive,d=h.j2&&c===l.vU.Zero,f=h.j3&&c===l.vU.Negative;s=r?0:v||d||f?u:s,h.d2&&(a=o),h.c?h.d1&&(u=o):u=32767&i;var p=h.am?e:u,Z=(0,l.Bb)(h.op,a,p);return o=Z[0],c=Z[1],[{addressM:u,outM:o,writeM:h.d3},{A:u,D:a,ALU:o,flag:c,PC:s}]}var P=new WeakMap,V=new WeakMap,E=new WeakMap,O=new WeakMap,D=function(){function t(n){var e=n.RAM,r=void 0===e?new h.zp(32767):e,s=n.ROM;(0,i.Z)(this,t),(0,a.Z)(this,"RAM",void 0),(0,a.Z)(this,"ROM",void 0),(0,u.Z)(this,P,{writable:!0,value:0}),(0,u.Z)(this,V,{writable:!0,value:0}),(0,u.Z)(this,E,{writable:!0,value:0}),(0,u.Z)(this,O,{writable:!0,value:{A:0,D:0,PC:0,ALU:0,flag:l.vU.Zero}}),this.RAM=r,this.ROM=s}return(0,r.Z)(t,[{key:"state",get:function(){return(0,o.Z)(this,O)}},{key:"PC",get:function(){return(0,o.Z)(this,P)}},{key:"A",get:function(){return(0,o.Z)(this,V)}},{key:"D",get:function(){return(0,o.Z)(this,E)}},{key:"reset",value:function(){(0,s.Z)(this,P,0),(0,s.Z)(this,V,0),(0,s.Z)(this,E,0)}},{key:"tick",value:function(){var t=function(t,n){var e=S(t,n),i=(0,c.Z)(e,2),r=i[0];return i[1],M(t,r)}({inM:this.RAM.get((0,o.Z)(this,V)),instruction:this.ROM.get((0,o.Z)(this,P)),reset:!1},{A:(0,o.Z)(this,V),D:(0,o.Z)(this,E),PC:(0,o.Z)(this,P),ALU:(0,o.Z)(this,E),flag:l.vU.Zero}),n=(0,c.Z)(t,2),e=n[0],i=e.addressM,r=e.outM,u=e.writeM,a=n[1],h=a.A,v=a.D,d=a.PC;(0,s.Z)(this,V,h),(0,s.Z)(this,E,v),(0,s.Z)(this,P,d),u&&this.RAM.set(i,r)}}]),t}()},5838:function(t,n,e){e.d(n,{I2:function(){return m},qJ:function(){return b},sd:function(){return y},zp:function(){return k}});var i=e(649),r=e(1092),u=e(7791),a=e(2951),s=e(1976),o=e(4649),c=e(7538),l=e(2648),h=e(3943),v=e(5541),d=e(9810),f=e(7693),p=e(326),Z=e(9600),m=["bin","dec","hex","asm"],b=16384,y=24576,g=new WeakMap,k=function(){function t(n){(0,a.Z)(this,t),(0,c.Z)(this,g,{writable:!0,value:void 0}),(0,o.Z)(this,"updates",new d.x),(0,l.Z)(this,g,new Int16Array(n))}return(0,s.Z)(t,[{key:"size",get:function(){return(0,h.Z)(this,g).length}},{key:"get",value:function(t){var n;return t<0||t>=this.size?65535:null!==(n=(0,h.Z)(this,g)[t])&&void 0!==n?n:0}},{key:"set",value:function(t,n){t>=0&&t<this.size&&((0,h.Z)(this,g)[t]=65535&n)}},{key:"update",value:function(t,n,e){var i;switch(e){case"asm":i=(0,f.op)(n);break;case"bin":i=(0,p.C$)(n);break;case"hex":i=(0,p.Af)(n);break;default:i=(0,p.o5)(n)}isFinite(i)&&i<=65535&&(this.set(t,i),this.updates.next())}},{key:"load",value:function(){var t=(0,u.Z)((0,r.Z)().mark((function t(n,e){var i=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Z.zD)(n,e);case 3:t.sent.map((function(t,n){return i.set(n,t)})),t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new Error("Memory Failed to load file ".concat(e));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(n,e){return t.apply(this,arguments)}}()},{key:"range",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;return(0,i.Z)((0,h.Z)(this,g).slice(t,n))}},{key:"map",value:(0,r.Z)().mark((function t(n){var e,i,u,a=arguments;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>1&&void 0!==a[1]?a[1]:0,i=a.length>2&&void 0!==a[2]?a[2]:this.size,(0,v.hu)(e<i),u=e;case 4:if(!(u<i)){t.next=10;break}return t.next=7,n(u,this.get(u));case 7:u++,t.next=4;break;case 10:case"end":return t.stop()}}),t,this)}))}]),t}()},9600:function(t,n,e){e.d(n,{zD:function(){return y}});var i=e(1092),r=e(7791),u=e(4625),a=e(726),s=e(5541),o=e(5640),c=e(6693),l=e(5838),h=e(7693),v=e(1510),d='\nASM <: Base {\n  Root := ASM\n  ASM = Instruction*\n  \n  Instruction = Label|AInstruction|CInstruction\n  \n  Label = OpenParen identifier closeParen\n  AInstruction = at (identifier | decNumber)\n  CInstruction = assign? op jmp?\n  \n  assign = (\n      "AMD"\n      | "AM"\n      | "AD"\n      | "MD"\n      | "M"\n      | "D"\n      | "A"\n      ) equal\n      \n  op =\n      | "0" | "1" | "-1"\n      | "!D" | "!A" | "!M"\n      | "-D" | "-A" | "-M"\n      | "D+1" | "A+1" | "M+1"\n      | "D-1" | "A-1" | "M-1"\n      | "D+A" | "D+M"\n      | "D-A" | "D-M"\n      | "A-D" | "M-D"\n      | "D&A" | "D&M"\n      | "D|A" | "D|M"\n      | "D" | "A" | "M"\n\n\n  jmp = semi ("JGT" | "JEQ" | "JGE" | "JLT" | "JNE" | "JLE" | "JMP")\n}',f=o.Z.grammar(d,v.y1),p=f.extendSemantics(v.rJ);function Z(t){return void 0!==t.label}p.addAttribute("root",{Root:function(t){return this.asm}}),p.addAttribute("asm",{Root:function(t){return{instructions:t.child(0).children.map((function(t){return t.instruction}))}}}),p.addAttribute("instruction",{AInstruction:function(t,n){try{return{type:"A",label:n.name}}catch(e){}try{return{type:"A",value:n.value}}catch(e){}throw new Error("AsmAInstruction must have either a name or a value")},CInstruction:function(t,n,e){var i,r,u,a,s=null===(i=t.child(0))||void 0===i||null===(r=i.child(0))||void 0===r?void 0:r.sourceString,o=n.sourceString.replace("M","A"),l=null===(u=e.child(0))||void 0===u||null===(a=u.child(1))||void 0===a?void 0:a.sourceString,h=t.sourceString.includes("M")||n.sourceString.includes("M"),v={type:"C",op:c.PH.asm[o],isM:h};return l&&(v.jump=c.lK.asm[l]),s&&(v.store=c.Uc.asm[s]),v},Label:function(t,n,e){return{type:"L",label:n.name}}});var m={grammar:d,semantics:p,parser:f,parse:(0,v.Pz)(f,p),passes:{fillLabel:function(t){var n,e=16,i=new Map([["R0",0],["R1",1],["R2",2],["R3",3],["R4",4],["R5",5],["R6",6],["R7",7],["R8",8],["R9",9],["R10",10],["R11",11],["R12",12],["R13",13],["R14",14],["R15",15],["SP",0],["LCL",1],["ARG",2],["THIS",3],["THAT",4],["SCREEN",l.qJ],["KBD",l.sd]]),r=[],u=0,o=(0,a.Z)(t.instructions);try{for(o.s();!(n=o.n()).done;){var c=n.value;if("L"!==c.type)u+=1,"A"===c.type&&Z(c)&&r.push(c);else{if(i.has(c.label))throw new Error("ASM Duplicate label ".concat(c.label));i.set(c.label,u)}}}catch(h){o.e(h)}finally{o.f()}r.forEach((function(t){var n,r=(n=t.label,i.has(n)||(i.set(n,e),e+=1),(0,s.kP)(i.get(n),"Label not in symbols: ".concat(n)));t.value=r,delete t.label}))},emit:function(t){return t.instructions.map((function(t){if("A"===t.type){if(Z(t))throw new Error("ASM Emitting unfilled A instruction");return t.value}if("C"===t.type)return(0,h.p)(t.isM,t.op,t.store,t.jump)})).filter((function(t){return void 0!==t}))}}},b=e(326);function y(t,n){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)((0,i.Z)().mark((function t(n,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.endsWith(".hack")){t.next=2;break}return t.abrupt("return",x(n,e));case 2:if(!e.endsWith(".asm")){t.next=4;break}return t.abrupt("return",k(n,e));case 4:throw new Error("Cannot load file without hack or asm extension ".concat(e));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t,n){return w.apply(this,arguments)}function w(){return w=(0,r.Z)((0,i.Z)().mark((function t(n,e){var r,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.readFile(e);case 2:return r=t.sent,a=(0,u.Wg)(m.parse(r)),m.passes.fillLabel(a),t.abrupt("return",m.passes.emit(a));case 6:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}function x(t,n){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)((0,i.Z)().mark((function t(n,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.readFile(e);case 2:return t.abrupt("return",t.sent.split("\n").filter((function(t){return""!==t.trim()})).map(b.C$));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},1510:function(t,n,e){e.d(n,{eP:function(){return a},rJ:function(){return o},y1:function(){return s},Pz:function(){return c}});var i=e(5640),r=e(326),u=e(4625),a="Unknown parse error",s={Base:i.Z.grammar('\nBase {\n  Root = Value*\n\n  At = at\n  Bang = bang\n  Bar = bar\n  CloseAngle = closeAngle\n  CloseBrace = closeBrace\n  CloseParen = closeParen\n  CloseSquare = closeSquare\n  Comma = comma\n  Dollar = dollar\n  Dot = dot\n  DoubleQuote = doubleQuote\n  Equal = equal\n  OpenAngle = openAngle\n  OpenBrace = openBrace\n  OpenParen = openParen\n  OpenSquare = openSquare\n  Percent = percent\n  Semi = semi\n  Underscore = underscore\n\n  at = "@"\n  bang = "!"\n  bar = "|"\n  closeAngle = ">"\n  closeBrace = "}"\n  closeParen = ")"\n  closeSquare = "]"\n  comma = ","\n  dollar = "$"\n  dot = "."\n  doubleQuote = "\\""\n  equal = "="\n  minus = "-"\n  newline = "\\r"? "\\n"\n  openAngle = "<"\n  openBrace = "{"\n  openParen = "("\n  openSquare = "["\n  percent = "%"\n  semi = ";"\n  underscore = "_"\n\n  Value = identifier | number | boolean\n\n  boolean = true | false\n  True = true\n  False = false\n  true = "true"\n  false = "false"\n\n  Name = identifier\n  identifier = (letter|underscore) (alnum|underscore|dot|dollar)*\n\n  Number = number\n  number = hexNumber | decNumber | binNumber\n  binNumber = ("%B") ("0"|"1")+\n  hexNumber = ("%X") hexDigit+\n  decNumber = ("%D")? (wholeDec | realDec)\n  wholeDec = minus? digit+\n  realDec = minus? digit* "." digit+\n\n  String = DoubleQuote (~doubleQuote any)* doubleQuote\n  \n  spaces := (lineComment | comment | space)*\n  commentStart = "/*"\n  commentEnd = "*/"\n  comment = commentStart (~commentEnd any)* commentEnd\n  lineCommentStart = "//"\n  lineComment = lineCommentStart (~"\\n" any)* "\\n"\n\n  List<elem, sep> = NonemptyListOf<elem, sep> sep?\n  EmptyList<elem, sep> = EmptyList<elem, sep> sep?\n}')},o=s.Base.createSemantics();function c(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t.root};return function(i){try{var r,s,o=t.match(i);if(o.succeeded()){var c=n(o),l=e(c);return(0,u.Ok)(l)}return(0,u.UG)({message:null!==(r=o.message)&&void 0!==r?r:a,shortMessage:null!==(s=o.shortMessage)&&void 0!==s?s:a})}catch(h){return(0,u.UG)(h)}}}o.extendOperation("asIteration",{List:function(t,n){return t.asIteration()}}),o.addAttribute("value",{decNumber:function(t,n){return(0,r.o5)(n.sourceString)},wholeDec:function(t,n){return(0,r.o5)(n.sourceString)},binNumber:function(t,n){return(0,r.C$)(n.sourceString)},hexNumber:function(t,n){return(0,r.Af)(n.sourceString)},Number:function(t){return t.value},Name:function(t){return t.name},identifier:function(t,n){return this.sourceString}}),o.addAttribute("name",{identifier:function(t,n){return this.sourceString},Name:function(t){var n;return null===(n=this.child(0))||void 0===n?void 0:n.name}}),o.addAttribute("String",{String:function(t,n,e){return n.sourceString}})},8365:function(t,n,e){e.d(n,{lA:function(){return o}});var i=e(5640),r=e(1510),u="\nCmp <: Base {\n  Root := line*\n  line = bar cell+ newline?\n  cell = cellvalue bar\n  cellvalue = (~(bar|newline) any)*\n}",a=i.Z.grammar(u,r.y1),s=a.extendSemantics(r.rJ);s.addAttribute("cell",{cell:function(t,n){return t.sourceString}}),s.addAttribute("line",{line:function(t,n,e){return n.children.map((function(t){return t.cell}))}}),s.addAttribute("root",{Root:function(t){return t.children.map((function(t){return t.line}))}});var o={grammar:u,semantics:s,parser:a,parse:(0,r.Pz)(a,s)}},8090:function(t,n,e){e.d(n,{Gq:function(){return o}});var i=e(5640),r=e(1510),u='\nHdl <: Base{\n  Root := Chip\n  Chip = "CHIP" Name OpenBrace ChipBody CloseBrace\n  ChipBody = InList? OutList? PartList ClockedList?\n  InList = "IN" PinList Semi\n  OutList = "OUT" PinList Semi\n  PartList = BuiltinPart | Parts\n  PinList = List<PinDecl, Comma>\n  PinDecl = Name PinWidth?\n  PinWidth = OpenSquare decNumber CloseSquare\n  BuiltinPart = "BUILTIN" Semi\n  Parts = "PARTS:" Part*\n  Part = Name "(" Wires ")" Semi\n  Wires = List<Wire, Comma>\n  Wire = WireSide Equal (WireSide | True | False) \n  WireSide = Name SubBus? \n  SubBus = OpenSquare decNumber subBusRest? CloseSquare\n  subBusRest = ".." decNumber\n  ClockedList = "CLOCKED" SimplePinList Semi\n  SimplePinList = List<Name, Comma>\n}',a=i.Z.grammar(u,r.y1),s=a.extendSemantics(r.rJ);s.addAttribute("SubBus",{SubBus:function(t,n,e,i){var r,u,a,s=n.value;return{start:s,end:null!==(r=null===(u=e.child(0))||void 0===u||null===(a=u.child(1))||void 0===a?void 0:a.value)&&void 0!==r?r:s}}}),s.addAttribute("WireSide",{WireSide:function(t,n){var e,i,r=t.name,u=null!==(e=null===(i=n.child(0))||void 0===i?void 0:i.SubBus)&&void 0!==e?e:{start:void 0,end:void 0};return{pin:r,start:u.start,end:u.end}}}),s.addAttribute("Wire",{Wire:function(t,n,e){var i=e.isTerminal()?{pin:e.sourceString}:e.WireSide;return{lhs:t.WireSide,rhs:i}}}),s.addAttribute("Wires",{Wires:function(t){return t.asIteration().children.map((function(t){return t.Wire}))}}),s.addAttribute("Part",{Part:function(t,n,e,i,r){return{name:t.name,wires:e.Wires}}}),s.addAttribute("Parts",{Parts:function(t,n){return n.children.map((function(t){return t.Part}))},BuiltinPart:function(t,n){return"BUILTIN"}}),s.addAttribute("PartList",{PartList:function(t){return t.Parts}}),s.addAttribute("Clocked",{ClockedList:function(t,n,e){var i;return null!==(i=n.asIteration().children.map((function(t){return t.sourceString})))&&void 0!==i?i:[]}}),s.addAttribute("PinDecl",{PinDecl:function(t,n){var e,i,r;return{pin:t.name,width:null!==(e=null===(i=n.child(0))||void 0===i||null===(r=i.child(1))||void 0===r?void 0:r.value)&&void 0!==e?e:1}}}),s.addAttribute("PinList",{PinList:function(t){return t.asIteration().children.map((function(t){return t.PinDecl}))}}),s.addAttribute("Chip",{Chip:function(t,n,e,i,r){var u,a,s,o,c,l,h,v;return{name:n.name,ins:null!==(u=null===(a=i.child(0).child(0))||void 0===a||null===(s=a.child(1))||void 0===s?void 0:s.PinList)&&void 0!==u?u:[],outs:null!==(o=null===(c=i.child(1).child(0))||void 0===c||null===(l=c.child(1))||void 0===l?void 0:l.PinList)&&void 0!==o?o:[],parts:null!==(h=i.child(2).PartList)&&void 0!==h?h:[],clocked:null===(v=i.child(3).child(0))||void 0===v?void 0:v.Clocked}}}),s.addAttribute("Root",{Root:function(t){var n;return null===(n=t.child(0))||void 0===n?void 0:n.Chip}});var o={parser:a,grammar:u,semantics:s,parse:(0,r.Pz)(a,s,(function(t){return t.Chip}))}},9647:function(t,n,e){e.d(n,{qH:function(){return o}});var i=e(5640),r=e(1510),u='\nTst <: Base {\n  Root := Tst\n  Tst = (TstStatement | TstRepeat | TstWhile)+\n\n  TstRepeat = Repeat Number? OpenBrace TstStatement+ CloseBrace\n  TstWhile = While Condition OpenBrace TstStatement+ CloseBrace\n  TstStatement = List<TstOperation, ","> (Semi | Bang)\n\n  TstOperation =\n    | TstFileOperation\n    | TstOutputListOperation\n    | TstEvalOperation\n    | TstSetOperation\n    | TstOutputOperation\n    | TstEchoOperation\n    | TstClearEchoOperation\n    | TstLoadROMOperation\n\n  TstLoadROMOperation = ROM32K Load FileName\n  TstFileOperation = FileOperation FileName\n  TstOutputListOperation = "output-list" OutputFormat+\n  OutputFormat = Name Index? percent FormatStyle wholeDec dot wholeDec dot wholeDec\n  TstSetOperation = Set Name Index? Number\n  Index = OpenSquare wholeDec? CloseSquare\n  Condition = Value CompareOp Value\n  TstEvalOperation = Eval | Tick | Tock\n  TstOutputOperation = Output\n  TstEchoOperation = Echo String\n  TstClearEchoOperation = ClearEcho\n\n  FileName = Name\n  FileOperation = "load" | "output-file" | "compare-to"\n\n  Set = "set"\n  Eval = "eval"\n  Tick = "tick"\n  Tock = "tock"\n  Echo = "echo"\n  Repeat = "repeat"\n  ClearEcho = "clear-echo"\n  Output = "output"\n  OutputList = "output-list"\n  FormatStyle = "B"|"D"|"S"|"X"\n  ROM32K = "ROM32K"\n  Load = "load"\n  While = "while"\n\n  CompareOp = "<>" | "<=" | ">=" | "=" | "<" | ">"\n}',a=i.Z.grammar(u,r.y1),s=a.extendSemantics(r.rJ);s.extendAttribute("value",{Index:function(t,n,e){var i,r;return null!==(i=null===n||void 0===n||null===(r=n.child(0))||void 0===r?void 0:r.value)&&void 0!==i?i:-1}}),s.extendAttribute("name",{FileName:function(t){return t.name}}),s.addAttribute("index",{Index:function(t,n,e){var i,r;return null!==(i=null===(r=n.child(0))||void 0===r?void 0:r.value)&&void 0!==i?i:0}}),s.addAttribute("format",{OutputFormat:function(t,n,e,i,r,u,a,s,o){var c,l,h=t.name,v=i.sourceString,d=r.value,f=a.value,p=o.value;return{id:h,builtin:void 0!==(null===n||void 0===n?void 0:n.child(0)),address:null!==(c=null===n||void 0===n||null===(l=n.child(0))||void 0===l?void 0:l.value)&&void 0!==c?c:-1,style:v,width:f,lpad:d,rpad:p}}}),s.addAttribute("operation",{TstEvalOperation:function(t){return{op:t.sourceString}},TstOutputOperation:function(t){return{op:"output"}},TstOutputListOperation:function(t,n){return{op:"output-list",spec:n.children.map((function(t){return t.format}))}},TstSetOperation:function(t,n,e,i){var r,u,a={op:"set",id:n.name,value:i.value},s=null===(r=e.child(0))||void 0===r||null===(u=r.child(1))||void 0===u?void 0:u.child(0);return s&&(a.index=s.value),a},TstEchoOperation:function(t,n){return{op:"echo",message:n.String}},TstClearEchoOperation:function(t){return{op:"clear-echo"}},TstLoadROMOperation:function(t,n,e){return{op:"loadRom",file:e.name}},TstFileOperation:function(t,n){return{op:t.sourceString,file:n.sourceString}}}),s.addAttribute("condition",{Condition:function(t,n,e){var i=t.value,r=n.sourceString;return{left:i,right:e.value,op:r}}}),s.addAttribute("statement",{TstWhile:function(t,n,e,i,r){return{statements:i.children.map((function(t){return t.statement})),condition:n.condition,span:{start:t.source.startIdx,end:n.source.endIdx}}},TstRepeat:function(t,n,e,i,r){var u,a;return{statements:i.children.map((function(t){return t.statement})),count:null!==(u=null===(a=n.child(0))||void 0===a?void 0:a.value)&&void 0!==u?u:-1,span:{start:t.source.startIdx,end:n.source.endIdx}}},TstStatement:function(t,n){var e={ops:t.asIteration().children.map((function(t){return t.operation})),span:{start:this.source.startIdx,end:this.source.endIdx}};return"!"===n.sourceString&&(e.break=!0),e}}),s.addAttribute("tst",{Tst:function(t){return{lines:t.children.map((function(t){return t.statement}))}}}),s.addAttribute("root",{Root:function(t){return t.tst}});var o={grammar:u,semantics:s,parser:a,parse:(0,r.Pz)(a,s)}},3389:function(t,n,e){e.d(n,{l1:function(){return A}});var i=e(7169),r=e(3243),u=e(7597),a=e(7591),s=e(4337),o=e(726),c=e(1092),l=e(7791),h=e(2951),v=e(1976),d=e(4649),f=e(5541),p=e(9956),Z=e(6329),m=e(6531),b=e(9422),y=e(326),g=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"%B1.1.1",i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;if((0,h.Z)(this,t),(0,d.Z)(this,"variable",void 0),(0,d.Z)(this,"fmt",void 0),(0,d.Z)(this,"lPad",void 0),(0,d.Z)(this,"rPad",void 0),(0,d.Z)(this,"len",void 0),(0,d.Z)(this,"index",void 0),(0,d.Z)(this,"builtin",void 0),this.variable=n,e.startsWith("%")&&void 0===i&&void 0===r&&void 0===u){var o,c=null===(o=e.match((0,b.Z)(/^%([BDXS])(\d+)\.(\d+)\.(\d+)$/,{fmt:1,lPad:2,len:3,rPad:4})))||void 0===o?void 0:o.groups,l=c.fmt,v=c.lPad,p=c.rPad,Z=c.len;this.fmt=l,this.lPad=parseInt(v),this.rPad=parseInt(p),this.len=parseInt(Z),this.builtin=!1,this.index=-1}else(0,f.hu)(["B","X","D","S"].includes(e[0])),this.fmt=e[0],this.len=null!==i&&void 0!==i?i:3,this.lPad=null!==r&&void 0!==r?r:1,this.rPad=null!==u&&void 0!==u?u:1,this.builtin=null!==a&&void 0!==a&&a,this.index=null!==s&&void 0!==s?s:-1}return(0,v.Z)(t,[{key:"header",value:function(t){var n="".concat(this.variable);if(this.builtin){var e=this.index>=0?this.index:"";n="".concat(n,"[").concat(e,"]")}return n.length>this.len+this.lPad+this.rPad?n.substring(0,this.len+this.lPad+this.rPad):this.padCenter(n)}},{key:"print",value:function(t){var n=t.getVar(this.variable,this.index);if("S"===this.fmt)return this.padLeft(n);var e=(0,{B:y.Ly,D:y.E_,X:y.$v}[this.fmt])(n);return"D"===this.fmt?this.padRight(e):this.padCenter(e.slice(e.length-this.len))}},{key:"padCenter",value:function(t){var n=this.lPad+this.len+this.rPad,e=Math.floor((n-t.length)/2),i=n-e-t.length,r=e+t.length,u=r+i;return t=(t=t.padStart(r)).padEnd(u)}},{key:"padLeft",value:function(t){t=t.substring(0,this.len);var n=this.rPad+this.len,e=this.lPad+n;return t=(t=t.padEnd(n)).padStart(e)}},{key:"padRight",value:function(t){t=t.substring(0,this.len);var n=this.lPad+this.len,e=this.rPad+n;return t=(t=t.padStart(n)).padEnd(e)}}]),t}(),k=function(){function t(){(0,h.Z)(this,t),(0,d.Z)(this,"instructions",[]),(0,d.Z)(this,"_outputList",[]),(0,d.Z)(this,"_log",""),(0,d.Z)(this,"fs",new p.Wd),(0,d.Z)(this,"_steps",void 0),(0,d.Z)(this,"_step",void 0),(0,d.Z)(this,"breakpoints",new Map)}return(0,v.Z)(t,[{key:"setFileSystem",value:function(t){return this.fs=t,this}},{key:"echo",value:function(t){}},{key:"clearEcho",value:function(){}},{key:"load",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0);case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},{key:"compareTo",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0);case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},{key:"outputFile",value:function(t){}},{key:"outputList",value:function(t){this._outputList=t}},{key:"addInstruction",value:function(t){this.instructions.push(t)}},{key:"reset",value:function(){var t=this;this._steps=(0,c.Z)().mark((function n(){var e,i,r;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=(0,o.Z)(t.instructions),n.prev=1,e.s();case 3:if((i=e.n()).done){n.next=8;break}return r=i.value,n.delegateYield(r.steps(t),"t0",6);case 6:n.next=3;break;case 8:n.next=13;break;case 10:n.prev=10,n.t1=n.catch(1),e.e(n.t1);case 13:return n.prev=13,e.f(),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,10,13,16]])}))(),this._log=""}},{key:"steps",get:function(){if(void 0===this._steps&&this.reset(),void 0===this._steps)throw new Error("Reset did not initialize steps");return this._steps}},{key:"currentStep",get:function(){var t;return null===(t=this._step)||void 0===t?void 0:t.value}},{key:"step",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._step=this.steps.next(),this._step.done){t.next=5;break}return t.next=4,this._step.value.do(this);case 4:return t.abrupt("return",!1);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"run",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.step();case 2:if(t.sent){t.next=6;break}t.next=0;break;case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"addBreakpoint",value:function(t,n){this.breakpoints.set(t,n)}},{key:"clearBreakpoints",value:function(){this.breakpoints.clear()}},{key:"output",value:function(){var t=this,n=this._outputList.map((function(n){return n.print(t)}));this._log+="|".concat(n.join("|"),"|\n")}},{key:"header",value:function(){var t=this,n=this._outputList.map((function(n){return n.header(t)}));this._log+="|".concat(n.join("|"),"|\n")}},{key:"log",value:function(){return this._log}}]),t}();function w(t){return void 0!==t.ops}function x(t){return void 0!==t.condition}var A=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(){var t;(0,h.Z)(this,e);for(var r=arguments.length,u=new Array(r),a=0;a<r;a++)u[a]=arguments[a];return t=n.call.apply(n,[this].concat(u)),(0,d.Z)((0,i.Z)(t),"chip",new Z.P9),(0,d.Z)((0,i.Z)(t),"clock",m.S.get()),t}return(0,v.Z)(e,[{key:"with",value:function(t){return this.chip=t,this}},{key:"hasVar",value:function(t){return"time"===t||(t="".concat(t),this.chip.hasIn(t)||this.chip.hasOut(t))}},{key:"getVar",value:function(t,n){if("time"===(t="".concat(t)))return this.clock.toString();var e=this.chip.get(t,n);return e?e instanceof Z.Gc?e.busVoltage:e.voltage():0}},{key:"setVar",value:function(t,n,e){var i=this.chip.get(t,e);i instanceof Z.Gc?i.busVoltage=n:null===i||void 0===i||i.pull(0===n?Z.yE:Z.lj)}},{key:"eval",value:function(){this.chip.eval()}},{key:"tick",value:function(){this.chip.eval(),this.clock.tick()}},{key:"tock",value:function(){this.chip.eval(),this.clock.tock()}},{key:"load",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.chip.load(this.fs,n);case 2:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"run",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clock.reset(),t.next=3,(0,r.Z)((0,u.Z)(e.prototype),"run",this).call(this);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}],[{key:"from",value:function(t){var n,i=new e,r=(0,o.Z)(t.lines);try{for(r.s();!(n=r.n()).done;){var u=n.value;if(w(u))i.addInstruction(e.makeLineStatement(u));else{var a=x(u)?new D(new O(u.condition.left,u.condition.right,u.condition.op)):new E(u.count);a.span=u.span,i.addInstruction(a);var s,c=(0,o.Z)(u.statements);try{for(c.s();!(s=c.n()).done;){var l=s.value;a.addInstruction(e.makeLineStatement(l))}}catch(h){c.e(h)}finally{c.f()}}}}catch(h){r.e(h)}finally{r.f()}return i}},{key:"makeLineStatement",value:function(t){var n=new V;n.span=t.span;var i,r=(0,o.Z)(t.ops);try{for(r.s();!(i=r.n()).done;){var u=i.value,a=e.makeInstruction(u);void 0!==a&&n.addInstruction(a)}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"makeInstruction",value:function(t){var n=t.op;switch(n){case"tick":return new T;case"tock":return new I;case"eval":return new R;case"output":return new M;case"set":return new S(t.id,t.value,t.index);case"output-list":return new P(t.spec);case"echo":return new j(t.message);case"clear-echo":return new C;case"loadRom":return new L(t.file);case"load":case"output-file":case"compare-to":return;default:(0,f.qV)(n,"Unknown tst operation ".concat(n))}}}]),e}(k),S=function(){function t(n,e,i){(0,h.Z)(this,t),(0,d.Z)(this,"variable",void 0),(0,d.Z)(this,"value",void 0),(0,d.Z)(this,"index",void 0),this.variable=n,this.value=e,this.index=i}return(0,v.Z)(t,[{key:"do",value:function(t){t.setVar(this.variable,this.value,this.index)}},{key:"steps",value:(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}(),M=function(){function t(){(0,h.Z)(this,t)}return(0,v.Z)(t,[{key:"do",value:function(t){t.output()}},{key:"steps",value:(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}(),P=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,h.Z)(this,t),(0,d.Z)(this,"outputs",[]);var e,i=(0,o.Z)(n);try{for(i.s();!(e=i.n()).done;){var r=e.value;this.addOutput(r)}}catch(u){i.e(u)}finally{i.f()}}return(0,v.Z)(t,[{key:"addOutput",value:function(t){this.outputs.push(new g(t.id,t.style,t.width,t.lpad,t.rpad,t.builtin,t.address))}},{key:"do",value:function(t){t.outputList(this.outputs),t.header()}},{key:"steps",value:(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}(),V=function(){function t(){(0,h.Z)(this,t),(0,d.Z)(this,"instructions",[]),(0,d.Z)(this,"span",void 0)}return(0,v.Z)(t,[{key:"addInstruction",value:function(t){this.instructions.push(t)}},{key:"do",value:function(t){var n,e=(0,o.Z)(this.instructions);try{for(e.s();!(n=e.n()).done;){n.value.do(t)}}catch(i){e.e(i)}finally{e.f()}}},{key:"steps",value:(0,c.Z)().mark((function t(n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}(),E=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(t){var r;return(0,h.Z)(this,e),r=n.call(this),(0,d.Z)((0,i.Z)(r),"repeat",void 0),r.repeat=t,r}return(0,v.Z)(e,[{key:"do",value:function(){}},{key:"innerSteps",value:(0,c.Z)().mark((function t(n){var e,i,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=(0,o.Z)(this.instructions),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=8;break}return r=i.value,t.delegateYield(r.steps(n),"t0",6);case 6:t.next=3;break;case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(1),e.e(t.t1);case 13:return t.prev=13,e.f(),t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[1,10,13,16]])}))},{key:"steps",value:(0,c.Z)().mark((function t(n){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==this.repeat){t.next=9;break}return t.next=3,this;case 3:return t.delegateYield(this.innerSteps(n),"t0",5);case 5:t.next=3;break;case 7:t.next=17;break;case 9:e=0;case 10:if(!(e<this.repeat)){t.next=17;break}return t.next=13,this;case 13:return t.delegateYield(this.innerSteps(n),"t1",14);case 14:e++,t.next=10;break;case 17:case"end":return t.stop()}}),t,this)}))}]),e}(V),O=function(){function t(n,e,i){(0,h.Z)(this,t),(0,d.Z)(this,"x",void 0),(0,d.Z)(this,"y",void 0),(0,d.Z)(this,"op",void 0),this.x=n,this.y=e,this.op=i}return(0,v.Z)(t,[{key:"check",value:function(t){var n=t.hasVar(this.x)?t.getVar(this.x):this.x,e=t.hasVar(this.y)?t.getVar(this.y):this.y;if("string"===typeof n||"string"===typeof e)switch(this.op){case"=":return"".concat(n)==="".concat(e);case"<>":return"".concat(n)!=="".concat(e)}else switch(this.op){case"<":return n<e;case"<=":return n<=e;case">":return n>e;case">=":return n>=e;case"=":return n===e;case"<>":return n!==e}return!1}}]),t}(),D=function(t){(0,a.Z)(e,t);var n=(0,s.Z)(e);function e(t){var r;return(0,h.Z)(this,e),r=n.call(this),(0,d.Z)((0,i.Z)(r),"condition",void 0),r.condition=t,r}return(0,v.Z)(e,[{key:"steps",value:(0,c.Z)().mark((function t(n){var e,i,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.condition.check(n)){t.next=21;break}return t.next=3,this;case 3:e=(0,o.Z)(this.instructions),t.prev=4,e.s();case 6:if((i=e.n()).done){t.next=11;break}return r=i.value,t.delegateYield(r.steps(n),"t0",9);case 9:t.next=6;break;case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(4),e.e(t.t1);case 16:return t.prev=16,e.f(),t.finish(16);case 19:t.next=0;break;case 21:case"end":return t.stop()}}),t,this,[[4,13,16,19]])}))}]),e}(V),j=function(){function t(n){(0,h.Z)(this,t),(0,d.Z)(this,"content",void 0),this.content=n}return(0,v.Z)(t,[{key:"do",value:function(t){t.echo(this.content)}},{key:"steps",value:(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}(),C=function(){function t(){(0,h.Z)(this,t)}return(0,v.Z)(t,[{key:"do",value:function(t){t.clearEcho()}},{key:"steps",value:(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}(),L=function(){function t(n){(0,h.Z)(this,t),(0,d.Z)(this,"file",void 0),this.file=n}return(0,v.Z)(t,[{key:"do",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.fs.pushd("/samples"),t.next=3,n.load(this.file);case 3:n.fs.popd();case 4:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"steps",value:(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}(),R=function(){function t(){(0,h.Z)(this,t),(0,d.Z)(this,"_chipTestInstruction_",!0)}return(0,v.Z)(t,[{key:"do",value:function(t){t.eval()}},{key:"steps",value:(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}(),T=function(){function t(){(0,h.Z)(this,t),(0,d.Z)(this,"_chipTestInstruction_",!0)}return(0,v.Z)(t,[{key:"do",value:function(t){t.tick()}},{key:"steps",value:(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}(),I=function(){function t(){(0,h.Z)(this,t),(0,d.Z)(this,"_chipTestInstruction_",!0)}return(0,v.Z)(t,[{key:"do",value:function(t){t.tock()}},{key:"steps",value:(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:case"end":return t.stop()}}),t,this)}))}]),t}()},7693:function(t,n,e){e.d(n,{a:function(){return u},op:function(){return a},p:function(){return s}});var i=e(9422),r=e(6693);function u(t){return 32768&t?function(t){var n=(4096&(t&=65535))>>12,e=(4032&t)>>6,i=(56&t)>>3,u=7&t;if(void 0===r.PH.op[e])return"#ERR";var a=r.PH.op[e];n&&(a=a.replace(/A/g,"M"));var s=r.Uc.op[i],o=r.lK.op[u],c=a;s&&(c="".concat(s,"=").concat(c));o&&(c="".concat(c,";").concat(o));return c}(t):function(t){return"@"+(32767&t).toString(10)}(t)}function a(t){return"@"===t[0]?function(t){return parseInt(t.substring(1),10)}(t):function(t){var n,e=t.match((0,i.Z)(/(?:([AMD]{1,3})=)?([-!01ADM&|]{1,3})(?:;(JGT|JLT|JGE|JLE|JEQ|JMP))?/,{assign:1,operation:2,jump:3})),u=null!==(n=null===e||void 0===e?void 0:e.groups)&&void 0!==n?n:{},a=u.assign,o=u.operation,c=u.jump,l=o.includes("M")||a.includes("M"),h=r.Uc.asm[null!==a&&void 0!==a?a:""],v=r.lK.asm[null!==c&&void 0!==c?c:""],d=r.PH.asm[null!==o&&void 0!==o?o:""];return s(l,d,h,v)}(t)}function s(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=57344,u=t?4096:0,a=n<<6,s=(null!==e&&void 0!==e?e:0)<<3,o=null!==i&&void 0!==i?i:0;return r+u+a+s+o}},326:function(t,n,e){e.d(n,{$v:function(){return l},Af:function(){return s},C$:function(){return c},C2:function(){return f},E_:function(){return v},Ly:function(){return h},nN:function(){return d},o5:function(){return o}});var i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];function r(t){var n;return null!==(n=i[t])&&void 0!==n?n:"X"}function u(t){switch(t){case 0:return"0000";case 1:return"0001";case 2:return"0010";case 3:return"0011";case 4:return"0100";case 5:return"0101";case 6:return"0110";case 7:return"0111";case 8:return"1000";case 9:return"1001";case 10:return"1010";case 11:return"1011";case 12:return"1100";case 13:return"1101";case 14:return"1110";case 15:return"1111";default:return"erro"}}function a(t,n){return 65535&parseInt(t.replace(/[^\d+-.xa-fA-F]/g,""),n)}function s(t){return a(t,16)}function o(t){return a(t,10)}function c(t){return a(t,2)}function l(t){var n=r((61440&t)>>12),e=r((3840&t)>>8),i=r((240&t)>>4),u=r(15&t);return"0x".concat(n).concat(e).concat(i).concat(u)}function h(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,e=u((61440&t)>>12),i=u((3840&t)>>8),r=u((240&t)>>4),a=u(15&t);return"".concat(e).concat(i).concat(r).concat(a).substring(16-n)}function v(t){return 32768===(t&=65535)?"-32768":32768&t?"-".concat(t=1+~t&32767):"".concat(t)}function d(t){return"".concat(t&=65535)}function f(t,n){var e=~((t&=65535)&(n&=65535));return e&=65535}}}]);
//# sourceMappingURL=356.6fa983c3.chunk.js.map
"use strict";(self.webpackChunk_nand2tetris_web=self.webpackChunk_nand2tetris_web||[]).push([[537],{2675:(e,t,n)=>{n.d(t,{K:()=>d});var r=n(1391),s=n(8878),a=n(8029),i=n(782);const l=(0,s.lazy)((()=>Promise.all([n.e(983),n.e(265),n.e(965)]).then(n.bind(n,8965)))),o=({error:e})=>e?(0,i.jsxs)("details",{className:"ErrorPanel",open:!0,children:[(0,i.jsx)("summary",{role:"button",className:"secondary",children:(0,i.jsx)(r.x6,{id:"1tSpqV"})}),(0,i.jsx)("pre",{children:(0,i.jsx)("code",{children:null===e||void 0===e?void 0:e.message})})]}):(0,i.jsx)(i.Fragment,{}),c=({value:e,onChange:t,language:n,disabled:r=!1})=>{const[a,l]=(0,s.useState)(e);return(0,i.jsx)("textarea",{"data-testid":`editor-${n}`,disabled:r,value:a,onChange:e=>{var n;const r=null===(n=e.target)||void 0===n?void 0:n.value;l(r),t(r)}})},d=({className:e="",style:t={},disabled:n=!1,value:r,error:d,onChange:u,onCursorPositionChange:h,grammar:m,language:g,highlight:p,highlightType:x="highlight",customDecorations:f=[],dynamicHeight:v=!1,alwaysRecenter:b=!0,lineNumberTransform:j})=>{const{monaco:y}=(0,s.useContext)(a.BR);return(0,i.jsx)("div",{className:`Editor ${v?"dynamic-height":""} ${e}`,style:t,children:y.canUse&&y.wants?(0,i.jsx)(s.Suspense,{fallback:"Loading...",children:(0,i.jsx)(l,{value:r,onChange:u,onCursorPositionChange:h,language:g,error:d,disabled:n,highlight:p,highlightType:x,customDecorations:f,dynamicHeight:v,alwaysRecenter:b,lineNumberTransform:j})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{value:r,onChange:u,language:g,disabled:n}),(0,i.jsx)(o,{error:d})]})})}},5168:(e,t,n)=>{n.d(t,{p:()=>a,Z:()=>s});var r=n(782);const s=e=>{var t;return(0,r.jsxs)("article",{className:["panel",null!==(t=e.className)&&void 0!==t?t:"",e.isEditorPanel?"editor":""].join(" "),children:[e.header&&(0,r.jsx)("header",{children:e.header}),(0,r.jsx)("main",{children:e.children}),e.footer&&(0,r.jsx)("footer",{children:e.footer})]})},a=e=>{var t;return(0,r.jsxs)("details",{className:null!==(t=e.className)&&void 0!==t?t:"",open:e.open,style:e.style,children:[(0,r.jsx)("summary",{children:(0,r.jsx)("div",{className:"flex row align-baseline",children:e.summary})}),e.children]})}},1384:(e,t,n)=>{n.d(t,{o:()=>a,w:()=>i});var r=n(8878),s=n(782);const a=e=>{const t=(0,r.useId)(),n=`tab-${t}`,a=`panel-${t}`;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{role:"tab",id:n,"aria-controls":a,style:e.style,children:(0,s.jsxs)("label",{children:[e.title,(0,s.jsx)("input",{type:"radio",name:e.parent,"aria-controls":a,value:n,checked:e.checked,onChange:t=>{var n;return 1==t.target.checked&&(null===(n=e.onSelect)||void 0===n?void 0:n.call(e))}})]})}),(0,s.jsx)("div",{role:"tabpanel",id:a,"aria-labelledby":n,children:e.children})]})},i=e=>{var t,n,a,i;const l=(0,r.useId)(),[o,c]=(0,r.useState)(0),d=null!==(t=null===(n=e.tabIndex)||void 0===n?void 0:n.value)&&void 0!==t?t:o,u=null!==(a=null===(i=e.tabIndex)||void 0===i?void 0:i.set)&&void 0!==a?a:c;return(0,s.jsx)("section",{role:"tablist",style:{"--tab-count":e.children.length},children:r.Children.map(e.children,((e,t)=>(0,r.cloneElement)(e,{checked:t===d,parent:l,idx:t,onSelect:()=>{var n,r;u(t),null===(n=e.props)||void 0===n||null===(r=n.onSelect)||void 0===r||r.call(n)}})))})}},9267:(e,t,n)=>{n.d(t,{B:()=>j});var r=n(1391),s=n(5874),a=n(7365),i=n(172),l=n(1296),o=n(9646),c=n(7022),d=n(910),u=n(7589),h=n(6554),m=n(1091),g=n(8878),p=n(8029),x=n(2675),f=n(5168),v=n(1384),b=n(782);const j=({runner:e,tst:[t,n,j],cmp:[w,k],out:[C],tstName:S,setPath:N,disabled:F=!1,defaultTst:E,defaultCmp:L,showName:T=!1,showLoad:I=!0,showClear:H=!1,speed:R,onSpeedChange:D,prefix:A})=>{var M,z;const{fs:K,setStatus:$}=(0,g.useContext)(d.L),{filePicker:P,tracking:U}=(0,g.useContext)(p.BR),[W,B]=(0,g.useState)(!0),_=(0,g.useRef)();(0,g.useEffect)((()=>(_.current=new class extends m.M{async reset(){var t;await(null===(t=e.current)||void 0===t?void 0:t.reset()),B(!0)}finishFrame(){var t;super.finishFrame(),null===(t=e.current)||void 0===t||t.finishFrame()}async tick(){var t,n;return B(!0),null!==(t=await(null===(n=e.current)||void 0===n?void 0:n.tick()))&&void 0!==t&&t}toggle(){var t;null===(t=e.current)||void 0===t||t.toggle()}},()=>{var e;null===(e=_.current)||void 0===e||e.stop()})),[e]);const q=(0,g.useCallback)((e=>{U.trackEvent("tab","change",e)}),[U]),[O,V]=(0,g.useState)(!1),Z=(0,i.s)(),[G,Y]=(0,o.b)(null!==S&&void 0!==S?S:""),X=(0,g.useCallback)((async()=>{var e;const t=await P.select({suffix:".tst"}),r=await(0,l.g9)(K,t.path);if((0,s.ys)(r))return void $("Failed to load test");null===N||void 0===N||N(t.path),Y(null!==(e=t.path.split("/").pop())&&void 0!==e?e:"");const{tst:a,cmp:i}=(0,s.oA)(r);null===n||void 0===n||n(a),null===k||void 0===k||k(null!==i&&void 0!==i?i:"")}),[P,$,K]),[J,Q]=(0,g.useState)();(0,g.useEffect)((()=>{Q((0,a._)(w,C))}),[C,w]);const ee=(0,b.jsx)("dialog",{open:Z.isOpen,children:(0,b.jsxs)("article",{children:[(0,b.jsx)("header",{children:"Warning"}),(0,b.jsxs)("main",{children:[(0,b.jsxs)("p",{children:["The test script can be edited during this IDE session. In the next session, the original script will be restored.",(0,b.jsx)("br",{})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,b.jsx)("input",{type:"checkbox",checked:O,onChange:e=>{V(e.target.checked)}}),(0,b.jsx)("p",{children:"Do not show this again"})]}),(0,b.jsx)("p",{children:(0,b.jsx)("br",{})}),(0,b.jsx)("button",{onClick:()=>{O&&localStorage.setItem("skipTestEditWarning","true"),Z.close()},children:"Ok"})]})]})});return(0,b.jsx)(f.Z,{className:"_test_panel",header:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.x6,{id:"NnH3pK"}),T&&(""==G?": Default":`: ${G}`)]}),ee,(0,b.jsx)("div",{className:"flex-1",children:_.current&&(0,b.jsx)(c.T,{prefix:(0,b.jsxs)(b.Fragment,{children:[A,H&&(0,b.jsx)("button",{className:"flex-0",onClick:()=>{n(null!==E&&void 0!==E?E:""),k(null!==L&&void 0!==L?L:"")},children:"Clear"}),I&&(0,b.jsx)("button",{className:"flex-0",onClick:X,"data-tooltip":"Load a test script","data-placement":"bottom",children:"\ud83d\udcc2"})]}),runner:_.current,disabled:F,speed:R,onSpeedChange:D})})]}),children:(0,b.jsxs)(v.w,{children:[(0,b.jsx)(v.o,{title:"Test Script",onSelect:()=>q("tst"),children:(0,b.jsx)(x.K,{value:t,onChange:e=>{n(e),B(!1)},grammar:h.uG.parser,language:"tst",disabled:!0,highlight:W?j:void 0})}),(0,b.jsx)(v.o,{title:"Compare File",onSelect:()=>q("cmp"),children:(0,b.jsx)(x.K,{value:w,onChange:k,grammar:u.dl.parser,language:"cmp",lineNumberTransform:e=>"",disabled:!0})}),(0,b.jsxs)(v.o,{title:"Output File",onSelect:()=>q("out"),children:[""==C&&(0,b.jsx)("p",{children:"Execute test script to generate output."}),(0,b.jsx)(x.K,{value:C,onChange:()=>{},language:"cmp",disabled:!0,lineNumberTransform:e=>""})]}),(0,b.jsxs)(v.o,{title:"Diff Table",onSelect:()=>q("diff"),children:[""==C&&(0,b.jsx)("p",{children:"Execute test script to compare output."}),(null!==(M=null===J||void 0===J?void 0:J.failureNum)&&void 0!==M?M:0)>0&&(0,b.jsxs)("p",{children:[null===J||void 0===J?void 0:J.failureNum," comparison failure",1===(null===J||void 0===J?void 0:J.failureNum)?"":"s",". Scroll down for details"]}),(0,b.jsx)(x.K,{value:null!==(z=null===J||void 0===J?void 0:J.text)&&void 0!==z?z:"",onChange:()=>{},language:"",disabled:!0,lineNumberTransform:e=>{var t;return null!==(t=null===J||void 0===J?void 0:J.lineNumbers[e-1])&&void 0!==t?t:""},customDecorations:null===J||void 0===J?void 0:J.decorations.map((e=>({span:e.span,cssClass:y(e.type)})))})]})]})})};function y(e){switch(e){case"error-line":return"diff-highlight-error-line";case"error-cell":return"diff-highlight-error-cell";case"correct-line":return"diff-highlight-correct-line";case"correct-cell":return"diff-highlight-correct-cell";default:return""}}},7437:(e,t,n)=>{n.d(t,{s:()=>o});var r=n(782),s=n(8878),a=n(6537);const i={Enter:128,Backspace:129,ArrowLeft:130,ArrowUp:131,ArrowRight:132,ArrowDown:133,Home:134,End:135,PageUp:136,PageDown:137,Insert:138,Delete:139,Escape:140,F1:141,F2:142,F3:143,F4:144,F5:145,F6:146,F7:147,F8:148,F9:149,F10:150,F11:151,F12:152},l={ArrowLeft:"L-arrow",ArrowUp:"U-arrow",ArrowRight:"R-arrow",ArrowDown:"D-arrow"};const o=({keyboard:e,update:t})=>{const[n,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)(e.getKey());let m=0;const g=(0,s.useRef)(null),p=e=>{if(!n)return;d(function(e){return l[e]??e}(e.key)),g.current?.blur();const r=function(e){const t=i[e.key];if(void 0!==t)return t;if(1===e.key.length){const t=e.key.charCodeAt(0);if(t>=32&&t<=126)return t}return 0}(e);r&&e.preventDefault(),r!==m&&(f(r),t?.())},x=r=>{g.current?.blur(),n&&(e.getKey()&&r.preventDefault(),m=0,e.clearKey(),t?.(),h(e.getKey()),d(""))},f=t=>{0!==t&&(e.setKey(t),h(e.getKey()),m=t)};return(0,s.useEffect)((()=>(window.addEventListener("keydown",p),window.addEventListener("keyup",x),()=>{window.removeEventListener("keydown",p),window.removeEventListener("keyup",x)}))),(0,r.jsx)("article",{className:"panel",children:(0,r.jsxs)("div",{className:"flex row align-baseline",children:[(0,r.jsx)("button",{onClick:()=>{o(!n)},ref:g,className:"flex-0",style:{whiteSpace:"pre"},children:(n?"Disable":"Enable")+" Keyboard"}),(0,r.jsx)("div",{className:"flex-1"})," ",(0,r.jsxs)("div",{className:"flex-4",children:["Key: ",c]}),(0,r.jsx)("div",{className:"flex-4",children:(0,r.jsx)(a.d,{name:"Char code",bits:u})})]})})}},64:(e,t,n)=>{n.d(t,{ce:()=>w,Ay:()=>k});var r=n(782),s=n(135),a=n(8878),i=n(7076),l=n(9547),o=n(7496),c=n(7844),d=n(6513),u=n(8281);var h=n(9646);const m=0,g=1,p=e=>{const[t,n]=(0,a.useState)(e.mode??m),[s,i]=(0,h.b)(e.value),l=()=>{return(0,r.jsxs)("div",{style:{cursor:"text",...(e="full",t="inline",void 0===e&&void 0!==u.UL[t]&&(e=t),{..."inline"===t?{display:"inline-block"}:{},width:u.UL[e]??"0"})},onClick:()=>{n(g)},children:[s,"\xa0"]});var e,t},o=(0,a.useCallback)((e=>e?.select()),[]),c=(0,a.useCallback)((t=>{n(m),i(t.value??""),e.onChange(t.value??"")}),[e,n,i]),d=()=>(0,r.jsx)("span",{style:{display:"block",position:"relative"},children:(0,r.jsx)("input",{ref:o,style:{zIndex:"10",position:"absolute",left:"0",marginTop:"-0.375rem",color:"var(--text-color)"},onFocus:e.onFocus,onBlur:({target:e})=>c(e),onKeyPress:({key:e,target:t})=>{"Enter"===e&&c(t)},type:"text",defaultValue:s})});return(()=>{switch(t){case g:return d();case m:return l();default:return(0,r.jsx)("span",{})}})()};var x=n(2144),f=n(910);function v(e,t,n){const{totalHeight:r,toleranceHeight:s,bufferedItems:a,settings:{itemHeight:i,minIndex:l,maxIndex:o}}=t,c=l+Math.floor((e-s)/i),d=function(e,t,n,r,s){const a=Math.max(0,e,n);return[...s(a,Math.min(t,n+r-1)-a)]}(l,o,c,a,n),u=Math.max((c-l)*i,0);return{scrollTop:e,topPaddingHeight:u,bottomPaddingHeight:Math.max(r-(u+d.length*i),0),data:d}}const b=e=>{const t=(0,a.useRef)(null),{settings:n,startState:s,reducer:i}=(0,a.useMemo)((()=>{const t=function(e){const{minIndex:t=0,maxIndex:n=Number.MAX_SAFE_INTEGER,startIndex:r=0,itemHeight:s=20,count:a=Math.max(n-t,1),tolerance:i=a}=e;return{minIndex:t,maxIndex:n,startIndex:r,itemHeight:s,count:a,tolerance:i}}(e.settings??{}),n=function(e,t){const{minIndex:n,maxIndex:r,startIndex:s,itemHeight:a,count:i,tolerance:l}=e,o=i+2*l,c=Math.max(0,s-l-n),d=i*a,u=Math.max(r-n,1)*a,h=l*a,m=c*a,g={scrollTop:0,settings:e,viewportHeight:d,totalHeight:u,toleranceHeight:h,bufferedItems:o,topPaddingHeight:m,bottomPaddingHeight:u-(m+(d+2*h)),data:[]};return{...g,...v(m+h,g,t)}}(t,e.get),r=(s=e.get,(e,t)=>({...e,...v(t,e,s)}));var s;return{settings:t,reducer:r,startState:n}}),[e.settings,e.get]),[l,o]=(0,a.useReducer)(i,s);(0,a.useEffect)((()=>{null!==t.current&&o(t.current.scrollTop)}),[n,e.row]);const c=(0,a.useCallback)((e=>{e&&(e.scrollTop=t.current?t.current.scrollTop:n.startIndex*n.itemHeight),t.current=e}),[t,n.startIndex,n.itemHeight]),d=l.data.map((t=>(0,r.jsx)("div",{style:{height:`${n.itemHeight}px`},children:e.row(t)},e.rowKey(t))));return(0,r.jsxs)("div",{ref:c,style:{height:`${l.viewportHeight}px`,overflowY:"scroll",overflowAnchor:"none"},className:e.className??"",onScroll:e=>o(e.target.scrollTop),children:[(0,r.jsx)("div",{style:{height:`${l.topPaddingHeight}px`}}),d,(0,r.jsx)("div",{style:{height:`${l.bottomPaddingHeight}px`}})]})},j=({memory:e,jmp:t={value:0},highlight:n=-1,editable:s=!1,justifyLeft:i=!1,count:l,maxSize:o,offset:d=0,cellLabels:u,format:h=c.FN,onChange:m=()=>{},onFocus:g=()=>{}})=>{const p=(0,a.useMemo)((()=>({count:Math.min(e.size,l??25),maxIndex:o??e.size,itemHeight:34,startIndex:t.value})),[e.size,t]),x=(0,a.useCallback)(((t,n)=>e.range(t+d,t+d+n).map(((e,n)=>[n+t+d,e]))),[e]),f=(0,a.useCallback)((([t,a])=>(0,r.jsx)(y,{index:t,value:h(a),label:(u?.[t]??"").padStart(u?Math.max(...u.map((e=>e.length))):0),showLabel:void 0!=u,size:e.size,editable:s,justifyLeft:i,highlight:t===n,onChange:m,onFocus:g})),[h,s,n,m]);return(0,r.jsx)(b,{settings:p,get:x,row:f,rowKey:([e])=>e})},y=({index:e,value:t,label:n,showLabel:a=!1,size:i,highlight:l=!1,editable:o=!1,justifyLeft:d=!1,onChange:u=()=>{},onFocus:h=()=>{}})=>(0,r.jsxs)("div",{style:{display:"flex",height:"100%"},children:[a&&(0,r.jsx)("code",{style:{...(0,s.Wf)("none"),...l?{background:"var(--mark-background-color)"}:{},whiteSpace:"pre"},children:n??""}),(0,r.jsx)("code",{style:{...(0,s.Wf)("none"),...l?{background:"var(--mark-background-color)"}:{},whiteSpace:"pre"},children:i?(0,c.FN)(e).padStart(Math.ceil(Math.log10(i))," "):(0,c.FN)(e)}),(0,r.jsx)("code",{style:{flex:"1",textAlign:d?"left":"right",color:"var(--text-color)",...(0,s.Wf)("none"),...l?{background:"var(--mark-background-color)"}:{}},children:o?(0,r.jsx)(p,{value:t,highlight:l,onChange:n=>u(e,n,Number(t)),onFocus:()=>h(e)}):(0,r.jsx)("span",{style:{color:"var(--text-color)"},children:t})})]}),w=(0,a.forwardRef)((({name:e="Memory",className:t,displayEnabled:n=!0,highlight:s=-1,editable:u=!0,memory:m,format:g="dec",onSetFormat:p,excludedFormats:v=[],count:b,maxSize:y,offset:w,initialAddr:k,cellLabels:C,fileSelect:S,showClear:N=!0,onChange:F,onClear:E,loadTooltip:L},T)=>{const[I,H]=(0,h.b)(g),[R,D]=(0,a.useState)(""),[A,M]=(0,a.useState)({value:k??0}),[z,K]=(0,h.b)(s),[$,P]=(0,a.useState)(0),U=()=>{const e=!isNaN(parseInt(R))&&isFinite(parseInt(R))?Number(R):0;K(e),M({value:e}),B()},{setStatus:W}=(0,a.useContext)(f.L),B=()=>{P($+1)};(0,a.useImperativeHandle)(T,(()=>({rerender:B})));(0,d.rT)((()=>{D(""),M({value:0})}));return(0,r.jsxs)("article",{className:`panel memory ${t??e}`,children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("div",{style:{whiteSpace:"nowrap"},children:e}),(0,r.jsxs)("fieldset",{role:"group",children:[S&&(0,r.jsx)("button",{onClick:async()=>{if(F?.(),S){const{name:e,content:t}=await S();W(x.F),requestAnimationFrame((async()=>{const n=e.endsWith("hack")?l.aU:e.endsWith("asm")?l.aY:l.yt;requestAnimationFrame((async()=>{try{const r=await n(t);m.loadBytes(r),W(""),H(e.endsWith("hack")?"bin":e.endsWith("asm")?"asm":I),U()}catch(r){return void W(`Error loading memory: ${r.message}`)}}))}))}},className:"flex-0","data-tooltip":L?.value??"Load file","data-placement":L?.placement??"bottom",children:"\ud83d\udcc2"}),N&&(0,r.jsx)("button",{onClick:()=>{m.reset(),F?.(),E?.(),B()},className:"flex-0","data-tooltip":"Clear","data-placement":"bottom",children:"\ud83c\udd91"}),(0,r.jsx)("input",{style:{width:"4em",height:"100%"},placeholder:"Addr",value:R,onKeyDown:({key:e})=>"Enter"===e&&U(),onChange:({target:{value:e}})=>D(e)}),(0,r.jsx)("button",{onClick:U,className:"flex-0","data-tooltip":"Scroll to address","data-placement":"bottom",children:"\u2935\ufe0f"}),(0,r.jsx)("select",{value:I,onChange:e=>(e=>{H(e),p?.(e)})(e.target.value),children:i.hR.filter((e=>!v.includes(e))).map((e=>(0,r.jsx)("option",{children:e},e)))})]})]}),n?(0,r.jsx)(j,{jmp:A,memory:m,highlight:z,editable:u,justifyLeft:"asm"==I,count:b,format:e=>function(e,t){switch(e){case"bin":return(0,c.e5)(t);case"hex":return(0,c.uh)(t);case"asm":return(0,o.k)(t);default:return(0,c.FN)(t)}}(I,e),cellLabels:C,maxSize:y,offset:w,onChange:(e,t)=>{m.update(e,t,I??"dec"),F?.(),B()},onFocus:e=>K(e)},$):"Memory display is disabled"]})}));w.displayName="Memory";const k=w},6537:(e,t,n)=>{n.d(t,{d:()=>a});var r=n(782),s=n(7844);const a=({name:e,bits:t})=>(0,r.jsxs)("div",{children:[e,": ",(0,s.FN)(t)]})},4668:(e,t,n)=>{n.d(t,{f:()=>d});var r=n(782),s=n(2469),a=n(8878),i=n(6513);const l="white",o="black";function c(e,t,n,r){const s=4*(512*n+t),a=r===l?255:0;e[s]=a,e[s+1]=a,e[s+2]=a,e[s+3]=255}const d=({memory:e,showScaleControls:t=!1,scale:n=1,onScale:d})=>{const u=(0,a.useRef)(),[h,m]=(0,a.useState)(n),g=e=>{d?.(e),m(e)},p=(0,a.useCallback)((()=>{const t=u.current?.getContext("2d",{willReadFrequently:!0})??void 0;t&&function(e,t){const n=(0,s.Z1)(e.getImageData(0,0,512,256),"Failed to create Context2d");for(let s=0;s<512;s++)for(let e=0;e<256;e++){const i=(r=s,a=e,0===(t.get(32*a+(r/16|0))&1<<r%16)?l:o);c(n.data,s,e,i)}var r,a;e.putImageData(n,0,0)}(t,e)}),[e]),x=(0,a.useCallback)((e=>{u.current=e??void 0,p()}),[u,p]);return(0,i.Nt)(p),(0,i.rT)((()=>{u.current?.getContext("2d")?.clearRect(0,0,u.current.width,u.current.height)})),(0,r.jsxs)("article",{className:"panel",children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("div",{children:"Screen"}),t&&(0,r.jsxs)("fieldset",{role:"group",children:[(0,r.jsx)("button",{"aria-current":0===h,onClick:()=>g(0),children:"x0"}),(0,r.jsx)("button",{"aria-current":1===h,onClick:()=>g(1),children:"x1"}),(0,r.jsx)("button",{"aria-current":2===h,onClick:()=>g(2),children:"x2"})]})]}),h>0&&(0,r.jsx)("main",{style:{backgroundColor:"var(--code-background-color)"},children:(0,r.jsx)("figure",{style:{width:512*h+"px",height:256*h+"px",boxSizing:"content-box",marginInline:"auto",margin:"auto",borderTop:"2px solid gray",borderLeft:"2px solid gray",borderBottom:"2px solid lightgray",borderRight:"2px solid lightgray"},children:(0,r.jsx)("canvas",{ref:x,width:512,height:256,style:{transform:`translate(-50%, -50%) scale(${h}) translate(50%, 50%)`,imageRendering:"pixelated"}})})})]})}},6513:(e,t,n)=>{n.d(t,{Nt:()=>l,rT:()=>o,wr:()=>d});var r=n(782),s=n(8878),a=n(4641),i=n(3096);function l(e){(0,s.useEffect)((()=>{const t=i.z.get().frame$.subscribe((()=>{e()}));return()=>t.unsubscribe()}),[e])}function o(e){(0,s.useEffect)((()=>{const t=i.z.get().reset$.subscribe((()=>{e()}));return()=>t.unsubscribe()}),[e])}function c(){return(0,a.V)(i.z.get())}const d=()=>{const e=function(){const[e,t]=(0,s.useState)(c());return(0,s.useEffect)((()=>{const e=i.z.get().$.subscribe((()=>{t(c())}));return()=>e.unsubscribe()}),[]),e}();return(0,r.jsx)("span",{style:{whiteSpace:"nowrap"},children:e})}},2144:(e,t,n)=>{n.d(t,{F:()=>r});const r="Loading in progress..."},7022:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(782),s=n(8878),a=n(9646);const i=e=>{const t=function(e){const t=(0,s.useRef)((()=>{})),{initialState:n,reducers:r,actions:i}=(0,s.useMemo)((()=>((e,t)=>{const n={running:e.running,speed:e.speed,steps:e.steps},r=e.finishFrame.bind(e);return e.finishFrame=function(){r(),t.current({action:"update"})},{initialState:n,reducers:{update(t){t.running=e.running,t.speed=e.speed,t.steps=e.steps},setSteps(t,n){t.steps=n,e.steps=n},setSpeed(t,n){t.speed=n,e.speed=n}},actions:{frame(){e.frame()},start(){e.start(),t.current({action:"update"})},stop(){e.stop(),t.current({action:"update"})},reset(){e.reset(),t.current({action:"update"})}}}})(e,t)),[e,t]),[l,o]=(0,a.A)(r,n);return t.current=o,{state:l,dispatch:t.current,actions:i}}(e.runner),[n,i]=(0,a.b)(e.speed??2),l={0:[1e3,1],1:[500,1],2:[16,1],3:[16,16666],4:[16,499980]};(0,s.useEffect)((()=>{o()}),[n]);const o=()=>{const[e,r]=l[n];t.dispatch({action:"setSpeed",payload:e}),t.dispatch({action:"setSteps",payload:r})},c=(0,s.useRef)(null),d=e=>{c.current?.blur()};return(0,s.useEffect)((()=>(window.addEventListener("keydown",d),window.addEventListener("keyup",d),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",d)}))),(0,r.jsxs)("div",{className:"flex row wrap",children:[(0,r.jsxs)("fieldset",{role:"group",children:[e.prefix,(0,r.jsx)("button",{className:"flex-0",disabled:e.disabled,onClick:()=>t.actions.frame(),"data-tooltip":e.overrideTooltips?.step??"Step","data-placement":"bottom",children:"\u27a1\ufe0f"}),(0,r.jsx)("button",{className:"flex-0",ref:c,disabled:e.disabled,onClick:()=>t.state.running?t.actions.stop():t.actions.start(),"data-tooltip":t.state.running?e.overrideTooltips?.pause??"Pause":e.overrideTooltips?.run??"Run","data-placement":"bottom",children:t.state.running?"\u23f8":"\ufe0f\u23e9"}),(0,r.jsx)("button",{className:"flex-0",onClick:()=>{t.state.running&&t.actions.stop(),t.actions.reset()},"data-tooltip":e.overrideTooltips?.reset??"Reset","data-placement":"bottom",children:"\u23ee"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,fontWeight:"normal"},children:[(0,r.jsx)("span",{style:{padding:"0.2rem"},children:"Slow"}),(0,r.jsx)("input",{type:"range",min:0,max:4,step:1,value:n,disabled:t.state.running,onChange:t=>{const n=Number(t.target.value);i(n),e.onSpeedChange?.(n)},style:{width:"150px",padding:"0.2rem"},"data-tooltip":"Execution speed","data-placement":"bottom"}),(0,r.jsx)("span",{style:{padding:"0.2rem"},children:"Fast"})]}),e.children]})}},135:(e,t,n)=>{n.d(t,{Wf:()=>a});var r=n(8281);function s(e){switch(e){case"t":return[...s("tl"),...s("tr")];case"r":return[...s("tr"),...s("br")];case"b":return[...s("br"),...s("bl")];case"l":return[...s("tl"),...s("bl")];default:return[r.Hw[e]]}}function a(e="",t=""){var n;n=e,void 0!==r.Hw[n]&&(t=e,e="");const a=function(e){return r.DN[e]}(e);return s(t).reduce(((e,t)=>(""===t?e.borderRadius=a:e[`border${t}Radius`]=a,e)),{})}},8281:(e,t,n)=>{n.d(t,{DN:()=>r,Hw:()=>s,UL:()=>a});const r={none:"0px",sm:"0.125rem","":"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},s={"":"",t:"Top",r:"Right",l:"Left",b:"Bottom",tl:"TopLeft",tr:"TopRight",bl:"BottomLeft",br:"BottomRight"},a={"1/4":"25%","1/2":"50%","3/4":"75%",full:"100%"}},1091:(e,t,n)=>{n.d(t,{M:()=>s});const r=n(3096).z.get();class s{frame(){this.tick(),this.finishFrame()}finishFrame(){r.frame()}steps=1;speed=1e3;get running(){return this.#e}#e=!1;#t=0;#n=0;#r=async()=>{if(!this.#e)return;const e=Date.now(),t=e-this.#n;if(this.#n=e,this.#t+=t,this.#t>this.speed){let e=!1,t=this.steps;const n=`Timing ${t} steps`;for(console.time(n);!e&&t--;)e=await this.tick();console.timeEnd(n),this.finishFrame(),e&&this.stop(),this.#t-=this.speed}requestAnimationFrame(this.#r)};start(){this.#e=!0,this.#n=Date.now()-this.speed,this.#r(),this.toggle()}stop(){this.#e=!1,this.toggle()}}}}]);
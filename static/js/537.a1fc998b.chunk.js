"use strict";(globalThis.webpackChunk_nand2tetris_web=globalThis.webpackChunk_nand2tetris_web||[]).push([[537],{64:(e,t,n)=>{n.d(t,{ce:()=>w,Ay:()=>k});var s=n(782),r=n(135),a=n(8878),i=n(7076),l=n(9547),o=n(7496),c=n(7844),d=n(6513),u=n(8281);var h=n(9646);const p=0,m=1,g=e=>{const[t,n]=(0,a.useState)(e.mode??p),[r,i]=(0,h.b)(e.value),l=()=>{return(0,s.jsxs)("div",{style:{cursor:"text",...(e="full",t="inline",void 0===e&&void 0!==u.UL[t]&&(e=t),{..."inline"===t?{display:"inline-block"}:{},width:u.UL[e]??"0"})},onClick:()=>{n(m)},children:[r,"\xa0"]});var e,t},o=(0,a.useCallback)(e=>e?.select(),[]),c=(0,a.useCallback)(t=>{n(p),i(t.value??""),e.onChange(t.value??"")},[e,n,i]),d=()=>(0,s.jsx)("span",{style:{display:"block",position:"relative"},children:(0,s.jsx)("input",{ref:o,style:{zIndex:"10",position:"absolute",left:"0",marginTop:"-0.375rem",color:"var(--text-color)"},onFocus:e.onFocus,onBlur:({target:e})=>c(e),onKeyPress:({key:e,target:t})=>{"Enter"===e&&c(t)},type:"text",defaultValue:r})});return(()=>{switch(t){case m:return d();case p:return l();default:return(0,s.jsx)("span",{})}})()};var x=n(2144),f=n(910);function v(e,t,n){const{totalHeight:s,toleranceHeight:r,bufferedItems:a,settings:{itemHeight:i,minIndex:l,maxIndex:o}}=t,c=l+Math.floor((e-r)/i),d=function(e,t,n,s,r){const a=Math.max(0,e,n);return[...r(a,Math.min(t,n+s-1)-a)]}(l,o,c,a,n),u=Math.max((c-l)*i,0);return{scrollTop:e,topPaddingHeight:u,bottomPaddingHeight:Math.max(s-(u+d.length*i),0),data:d}}const b=e=>{const t=(0,a.useRef)(null),{settings:n,startState:r,reducer:i}=(0,a.useMemo)(()=>{const t=function(e){const{minIndex:t=0,maxIndex:n=Number.MAX_SAFE_INTEGER,startIndex:s=0,itemHeight:r=20,count:a=Math.max(n-t,1),tolerance:i=a}=e;return{minIndex:t,maxIndex:n,startIndex:s,itemHeight:r,count:a,tolerance:i}}(e.settings??{}),n=function(e,t){const{minIndex:n,maxIndex:s,startIndex:r,itemHeight:a,count:i,tolerance:l}=e,o=i+2*l,c=Math.max(0,r-l-n),d=i*a,u=Math.max(s-n,1)*a,h=l*a,p=c*a,m={scrollTop:0,settings:e,viewportHeight:d,totalHeight:u,toleranceHeight:h,bufferedItems:o,topPaddingHeight:p,bottomPaddingHeight:u-(p+(d+2*h)),data:[]};return{...m,...v(p+h,m,t)}}(t,e.get),s=(r=e.get,(e,t)=>({...e,...v(t,e,r)}));var r;return{settings:t,reducer:s,startState:n}},[e.settings,e.get]),[l,o]=(0,a.useReducer)(i,r);(0,a.useEffect)(()=>{null!==t.current&&o(t.current.scrollTop)},[n,e.row]);const c=(0,a.useCallback)(e=>{e&&(e.scrollTop=t.current?t.current.scrollTop:n.startIndex*n.itemHeight),t.current=e},[t,n.startIndex,n.itemHeight]),d=l.data.map(t=>(0,s.jsx)("div",{style:{height:`${n.itemHeight}px`},children:e.row(t)},e.rowKey(t)));return(0,s.jsxs)("div",{ref:c,style:{height:`${l.viewportHeight}px`,overflowY:"scroll",overflowAnchor:"none"},className:e.className??"",onScroll:e=>o(e.target.scrollTop),children:[(0,s.jsx)("div",{style:{height:`${l.topPaddingHeight}px`}}),d,(0,s.jsx)("div",{style:{height:`${l.bottomPaddingHeight}px`}})]})},j=({memory:e,jmp:t={value:0},highlight:n=-1,editable:r=!1,justifyLeft:i=!1,count:l,maxSize:o,offset:d=0,cellLabels:u,format:h=c.FN,onChange:p=()=>{},onFocus:m=()=>{}})=>{const g=(0,a.useMemo)(()=>({count:Math.min(e.size,l??25),maxIndex:o??e.size,itemHeight:34,startIndex:t.value}),[e.size,t]),x=(0,a.useCallback)((t,n)=>e.range(t+d,t+d+n).map((e,n)=>[n+t+d,e]),[e]),f=(0,a.useCallback)(([t,a])=>(0,s.jsx)(y,{index:t,value:h(a),label:(u?.[t]??"").padStart(u?Math.max(...u.map(e=>e.length)):0),showLabel:void 0!=u,size:e.size,editable:r,justifyLeft:i,highlight:t===n,onChange:p,onFocus:m}),[h,r,n,p]);return(0,s.jsx)(b,{settings:g,get:x,row:f,rowKey:([e])=>e})},y=({index:e,value:t,label:n,showLabel:a=!1,size:i,highlight:l=!1,editable:o=!1,justifyLeft:d=!1,onChange:u=()=>{},onFocus:h=()=>{}})=>(0,s.jsxs)("div",{style:{display:"flex",height:"100%"},children:[a&&(0,s.jsx)("code",{style:{...(0,r.Wf)("none"),...l?{background:"var(--mark-background-color)"}:{},whiteSpace:"pre"},children:n??""}),(0,s.jsx)("code",{style:{...(0,r.Wf)("none"),...l?{background:"var(--mark-background-color)"}:{},whiteSpace:"pre"},children:i?(0,c.FN)(e).padStart(Math.ceil(Math.log10(i))," "):(0,c.FN)(e)}),(0,s.jsx)("code",{style:{flex:"1",textAlign:d?"left":"right",color:"var(--text-color)",...(0,r.Wf)("none"),...l?{background:"var(--mark-background-color)"}:{}},children:o?(0,s.jsx)(g,{value:t,highlight:l,onChange:n=>u(e,n,Number(t)),onFocus:()=>h(e)}):(0,s.jsx)("span",{style:{color:"var(--text-color)"},children:t})})]}),w=(0,a.forwardRef)(({name:e="Memory",className:t,displayEnabled:n=!0,highlight:r=-1,editable:u=!0,memory:p,format:m="dec",onSetFormat:g,excludedFormats:v=[],count:b,maxSize:y,offset:w,initialAddr:k,cellLabels:C,fileSelect:S,showClear:N=!0,onChange:F,onClear:E,loadTooltip:L},T)=>{const[I,R]=(0,h.b)(m),[H,_]=(0,a.useState)(""),[A,D]=(0,a.useState)({value:k??0}),[M,z]=(0,h.b)(r),[K,P]=(0,a.useState)(0),$=()=>{const e=!isNaN(parseInt(H))&&isFinite(parseInt(H))?Number(H):0;z(e),D({value:e}),W()},{setStatus:U}=(0,a.useContext)(f.L),W=()=>{P(K+1)};(0,a.useImperativeHandle)(T,()=>({rerender:W}));(0,d.rT)(()=>{_(""),D({value:0})});return(0,s.jsxs)("article",{className:`panel memory ${t??e}`,children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("div",{style:{whiteSpace:"nowrap"},children:e}),(0,s.jsxs)("fieldset",{role:"group",children:[S&&(0,s.jsx)("button",{onClick:async()=>{if(F?.(),S){const{name:e,content:t}=await S();U(x.F),requestAnimationFrame(async()=>{const n=e.endsWith("hack")?l.aU:e.endsWith("asm")?l.aY:l.yt;requestAnimationFrame(async()=>{try{const s=await n(t);p.loadBytes(s),U(""),R(e.endsWith("hack")?"bin":e.endsWith("asm")?"asm":I),$()}catch(s){return void U({message:`Error loading memory: ${s.message}`,severity:"ERROR"})}})})}},className:"flex-0","data-tooltip":L?.value??"Load file","data-placement":L?.placement??"bottom",children:"\ud83d\udcc2"}),N&&(0,s.jsx)("button",{onClick:()=>{p.reset(),F?.(),E?.(),W()},className:"flex-0","data-tooltip":"Clear","data-placement":"bottom",children:"\ud83c\udd91"}),(0,s.jsx)("input",{style:{width:"4em",height:"100%"},placeholder:"Addr",value:H,onKeyDown:({key:e})=>"Enter"===e&&$(),onChange:({target:{value:e}})=>_(e)}),(0,s.jsx)("button",{onClick:$,className:"flex-0","data-tooltip":"Scroll to address","data-placement":"bottom",children:"\u2935\ufe0f"}),(0,s.jsx)("select",{value:I,onChange:e=>(e=>{R(e),g?.(e)})(e.target.value),children:i.hR.filter(e=>!v.includes(e)).map(e=>(0,s.jsx)("option",{children:e},e))})]})]}),n?(0,s.jsx)(j,{jmp:A,memory:p,highlight:M,editable:u,justifyLeft:"asm"==I,count:b,format:e=>function(e,t){switch(e){case"bin":return(0,c.e5)(t);case"hex":return(0,c.uh)(t);case"asm":return(0,o.k)(t);default:return(0,c.FN)(t)}}(I,e),cellLabels:C,maxSize:y,offset:w,onChange:(e,t)=>{p.update(e,t,I??"dec"),F?.(),W()},onFocus:e=>z(e)},K):"Memory display is disabled"]})});w.displayName="Memory";const k=w},135:(e,t,n)=>{n.d(t,{Wf:()=>a});var s=n(8281);function r(e){switch(e){case"t":return[...r("tl"),...r("tr")];case"r":return[...r("tr"),...r("br")];case"b":return[...r("br"),...r("bl")];case"l":return[...r("tl"),...r("bl")];default:return[s.Hw[e]]}}function a(e="",t=""){var n;n=e,void 0!==s.Hw[n]&&(t=e,e="");const a=function(e){return s.DN[e]}(e);return r(t).reduce((e,t)=>(""===t?e.borderRadius=a:e[`border${t}Radius`]=a,e),{})}},1091:(e,t,n)=>{n.d(t,{M:()=>r});const s=n(3096).z.get();class r{frame(){this.tick(),this.finishFrame()}finishFrame(){s.frame()}_steps=1;_steps_actual=1;get steps(){return this._steps}set steps(e){this._steps=e,this._steps_actual=e}_speed=60;get speed(){return this._speed}set speed(e){this._speed=e}get running(){return this.#e}#e=!1;#t=0;#n=0;#s=async()=>{if(!this.#e)return;const e=Date.now(),t=e-this.#n;if(this.#n=e,this.#t+=t,this.#t>this.speed){let e=!1,t=Math.min(this._steps,this._steps_actual);const n=performance.now();for(;!e&&t-- >0;)e=await this.tick();const s=performance.now()-n;this._steps_actual*=8/s,this._steps_actual=Math.ceil(this._steps_actual),this.finishFrame(),e&&this.stop(),this.#t-=this.speed}requestAnimationFrame(this.#s)};start(){this.#e=!0,this.#n=Date.now()-this.speed,this.#s(),this.toggle()}stop(){this.#e=!1,this.toggle()}}},1384:(e,t,n)=>{n.d(t,{o:()=>a,w:()=>i});var s=n(8878),r=n(782);const a=e=>{const t=(0,s.useId)(),n=`tab-${t}`,a=`panel-${t}`;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{role:"tab",id:n,"aria-controls":a,style:e.style,children:(0,r.jsxs)("label",{children:[e.title,(0,r.jsx)("input",{type:"radio",name:e.parent,"aria-controls":a,value:n,checked:e.checked,onChange:t=>{var n;return 1==t.target.checked&&(null===(n=e.onSelect)||void 0===n?void 0:n.call(e))}})]})}),(0,r.jsx)("div",{role:"tabpanel",id:a,"aria-labelledby":n,children:e.children})]})},i=e=>{var t,n,a,i;const l=(0,s.useId)(),[o,c]=(0,s.useState)(0),d=null!==(t=null===(n=e.tabIndex)||void 0===n?void 0:n.value)&&void 0!==t?t:o,u=null!==(a=null===(i=e.tabIndex)||void 0===i?void 0:i.set)&&void 0!==a?a:c;return(0,r.jsx)("section",{role:"tablist",style:{"--tab-count":e.children.length},children:s.Children.map(e.children,(e,t)=>(0,s.cloneElement)(e,{checked:t===d,parent:l,idx:t,onSelect:()=>{var n,s;u(t),null===(n=e.props)||void 0===n||null===(s=n.onSelect)||void 0===s||s.call(n)}}))})}},2144:(e,t,n)=>{n.d(t,{F:()=>s});const s="Loading in progress..."},2675:(e,t,n)=>{n.d(t,{K:()=>d});var s=n(1391),r=n(8878),a=n(8029),i=n(782);const l=(0,r.lazy)(()=>Promise.all([n.e(983),n.e(88),n.e(965)]).then(n.bind(n,8965))),o=({error:e})=>e?(0,i.jsxs)("details",{className:"ErrorPanel",open:!0,children:[(0,i.jsx)("summary",{role:"button",className:"secondary",children:(0,i.jsx)(s.x6,{id:"1tSpqV"})}),(0,i.jsx)("pre",{children:(0,i.jsx)("code",{children:null===e||void 0===e?void 0:e.message})})]}):(0,i.jsx)(i.Fragment,{}),c=({value:e,onChange:t,language:n,disabled:s=!1})=>{const[a,l]=(0,r.useState)(e);return(0,i.jsx)("textarea",{"data-testid":`editor-${n}`,disabled:s,value:a,onChange:e=>{var n;const s=null===(n=e.target)||void 0===n?void 0:n.value;l(s),t(s)}})},d=({className:e="",style:t={},disabled:n=!1,value:s,error:d,onChange:u,onCursorPositionChange:h,grammar:p,language:m,highlight:g,highlightType:x="highlight",customDecorations:f=[],dynamicHeight:v=!1,alwaysRecenter:b=!0,lineNumberTransform:j})=>{const{monaco:y}=(0,r.useContext)(a.BR);return(0,i.jsx)("div",{className:`Editor ${v?"dynamic-height":""} ${e}`,style:t,children:y.canUse&&y.wants?(0,i.jsx)(r.Suspense,{fallback:"Loading...",children:(0,i.jsx)(l,{value:s,onChange:u,onCursorPositionChange:h,language:m,error:d,disabled:n,highlight:g,highlightType:x,customDecorations:f,dynamicHeight:v,alwaysRecenter:b,lineNumberTransform:j})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{value:s,onChange:u,language:m,disabled:n}),(0,i.jsx)(o,{error:d})]})})}},4668:(e,t,n)=>{n.d(t,{f:()=>d});var s=n(782),r=n(2469),a=n(8878),i=n(6513);const l="white";function o(e,t,n){return 0===(e.get(32*n+(t/16|0))&1<<t%16)?l:"black"}function c(e,t,n,s){const r=4*(512*n+t),a=s===l?255:0;e[r]=a,e[r+1]=a,e[r+2]=a,e[r+3]=255}const d=({memory:e,showScaleControls:t=!1,scale:n=1,onScale:l})=>{const d=(0,a.useRef)(),[u,h]=(0,a.useState)(n),p=e=>{l?.(e),h(e)},m=(0,a.useCallback)(()=>{const t=d.current?.getContext("2d",{willReadFrequently:!0})??void 0;t&&function(e,t){const n=(0,r.Z1)(e.getImageData(0,0,512,256),"Failed to create Context2d");for(let s=0;s<512;s++)for(let e=0;e<256;e++){const r=o(t,s,e);c(n.data,s,e,r)}e.putImageData(n,0,0)}(t,e)},[e]),g=(0,a.useCallback)(e=>{d.current=e??void 0,m()},[d,m]);return(0,i.Nt)(m),(0,i.rT)(()=>{d.current?.getContext("2d")?.clearRect(0,0,d.current.width,d.current.height)}),(0,s.jsxs)("article",{className:"panel",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("div",{children:"Screen"}),t&&(0,s.jsxs)("fieldset",{role:"group",children:[(0,s.jsx)("button",{"aria-current":0===u,onClick:()=>p(0),children:"x0"}),(0,s.jsx)("button",{"aria-current":1===u,onClick:()=>p(1),children:"x1"}),(0,s.jsx)("button",{"aria-current":2===u,onClick:()=>p(2),children:"x2"})]})]}),u>0&&(0,s.jsx)("main",{style:{backgroundColor:"var(--code-background-color)"},children:(0,s.jsx)("figure",{style:{width:512*u+"px",height:256*u+"px",boxSizing:"content-box",marginInline:"auto",margin:"auto",borderTop:"2px solid gray",borderLeft:"2px solid gray",borderBottom:"2px solid lightgray",borderRight:"2px solid lightgray"},children:(0,s.jsx)("canvas",{ref:g,width:512,height:256,style:{transform:`translate(-50%, -50%) scale(${u}) translate(50%, 50%)`,imageRendering:"pixelated"}})})})]})}},5168:(e,t,n)=>{n.d(t,{p:()=>a,Z:()=>r});var s=n(782);const r=e=>{var t;return(0,s.jsxs)("article",{className:["panel",null!==(t=e.className)&&void 0!==t?t:"",e.isEditorPanel?"editor":""].join(" "),children:[e.header&&(0,s.jsx)("header",{children:e.header}),(0,s.jsx)("main",{children:e.children}),e.footer&&(0,s.jsx)("footer",{children:e.footer})]})},a=e=>{var t;return(0,s.jsxs)("details",{className:null!==(t=e.className)&&void 0!==t?t:"",open:e.open,style:e.style,children:[(0,s.jsx)("summary",{children:(0,s.jsx)("div",{className:"flex row align-baseline",children:e.summary})}),e.children]})}},6513:(e,t,n)=>{n.d(t,{Nt:()=>l,rT:()=>o,wr:()=>d});var s=n(782),r=n(8878),a=n(4641),i=n(3096);function l(e){(0,r.useEffect)(()=>{const t=i.z.get().frame$.subscribe(()=>{e()});return()=>t.unsubscribe()},[e])}function o(e){(0,r.useEffect)(()=>{const t=i.z.get().reset$.subscribe(()=>{e()});return()=>t.unsubscribe()},[e])}function c(){return(0,a.V)(i.z.get())}const d=()=>{const e=function(){const[e,t]=(0,r.useState)(c());return(0,r.useEffect)(()=>{const e=i.z.get().$.subscribe(()=>{t(c())});return()=>e.unsubscribe()},[]),e}();return(0,s.jsx)("span",{style:{whiteSpace:"nowrap"},children:e})}},6537:(e,t,n)=>{n.d(t,{d:()=>a});var s=n(782),r=n(7844);const a=({name:e,bits:t})=>(0,s.jsxs)("div",{children:[e,": ",(0,r.FN)(t)]})},7022:(e,t,n)=>{n.d(t,{T:()=>i});var s=n(782),r=n(8878),a=n(9646);const i=e=>{const t=function(e){const t=(0,r.useRef)(()=>{}),{initialState:n,reducers:s,actions:i}=(0,r.useMemo)(()=>((e,t)=>{const n={running:e.running,speed:e.speed,steps:e.steps},s=e.finishFrame.bind(e);return e.finishFrame=function(){s(),t.current({action:"update"})},{initialState:n,reducers:{update(t){t.running=e.running,t.speed=e.speed,t.steps=e.steps},setSteps(t,n){t.steps=n,e.steps=n},setSpeed(t,n){t.speed=n,e.speed=n}},actions:{frame(){e.frame()},start(){e.start(),t.current({action:"update"})},stop(){e.stop(),t.current({action:"update"})},reset(){e.reset(),t.current({action:"update"})}}}})(e,t),[e,t]),[l,o]=(0,a.A)(s,n);return t.current=o,{state:l,dispatch:t.current,actions:i}}(e.runner),[n,i]=(0,a.b)(e.speed??2),l={0:[1e3,1],1:[500,1],2:[16,1],3:[16,16666],4:[16,499980]};(0,r.useEffect)(()=>{o()},[n]);const o=()=>{const[e,s]=l[n];t.dispatch({action:"setSpeed",payload:e}),t.dispatch({action:"setSteps",payload:s})},c=(0,r.useRef)(null),d=e=>{c.current?.blur()};return(0,r.useEffect)(()=>(window.addEventListener("keydown",d),window.addEventListener("keyup",d),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",d)})),(0,s.jsxs)("div",{className:"flex row wrap",children:[(0,s.jsxs)("fieldset",{role:"group",children:[e.prefix,(0,s.jsx)("button",{className:"flex-0",disabled:e.disabled,onClick:()=>t.actions.frame(),"data-tooltip":e.overrideTooltips?.step??"Step","data-placement":"bottom",children:"\u27a1\ufe0f"}),(0,s.jsx)("button",{className:"flex-0",ref:c,disabled:e.disabled,onClick:()=>t.state.running?t.actions.stop():t.actions.start(),"data-tooltip":t.state.running?e.overrideTooltips?.pause??"Pause":e.overrideTooltips?.run??"Run","data-placement":"bottom",children:t.state.running?"\u23f8":"\ufe0f\u23e9"}),(0,s.jsx)("button",{className:"flex-0",onClick:()=>{t.state.running&&t.actions.stop(),t.actions.reset()},"data-tooltip":e.overrideTooltips?.reset??"Reset","data-placement":"bottom",children:"\u23ee"})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,fontWeight:"normal"},children:[(0,s.jsx)("span",{style:{padding:"0.2rem"},children:"Slow"}),(0,s.jsx)("input",{type:"range",min:0,max:4,step:1,value:n,disabled:t.state.running,onChange:t=>{const n=Number(t.target.value);i(n),e.onSpeedChange?.(n)},style:{width:"150px",padding:"0.2rem"},"data-tooltip":"Execution speed","data-placement":"bottom"}),(0,s.jsx)("span",{style:{padding:"0.2rem"},children:"Fast"})]}),e.children]})}},7437:(e,t,n)=>{n.d(t,{s:()=>o});var s=n(782),r=n(8878),a=n(6537);const i={Enter:128,Backspace:129,ArrowLeft:130,ArrowUp:131,ArrowRight:132,ArrowDown:133,Home:134,End:135,PageUp:136,PageDown:137,Insert:138,Delete:139,Escape:140,F1:141,F2:142,F3:143,F4:144,F5:145,F6:146,F7:147,F8:148,F9:149,F10:150,F11:151,F12:152},l={ArrowLeft:"L-arrow",ArrowUp:"U-arrow",ArrowRight:"R-arrow",ArrowDown:"D-arrow"};const o=({keyboard:e,update:t})=>{const[n,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(e.getKey());let p=0;const m=(0,r.useRef)(null),g=e=>{if(!n)return;d(function(e){return l[e]??e}(e.key)),m.current?.blur();const s=function(e){const t=i[e.key];if(void 0!==t)return t;if(1===e.key.length){const t=e.key.charCodeAt(0);if(t>=32&&t<=126)return t}return 0}(e);s&&e.preventDefault(),s!==p&&(f(s),t?.())},x=s=>{m.current?.blur(),n&&(e.getKey()&&s.preventDefault(),p=0,e.clearKey(),t?.(),h(e.getKey()),d(""))},f=t=>{0!==t&&(e.setKey(t),h(e.getKey()),p=t)};return(0,r.useEffect)(()=>(window.addEventListener("keydown",g),window.addEventListener("keyup",x),()=>{window.removeEventListener("keydown",g),window.removeEventListener("keyup",x)})),(0,s.jsx)("article",{className:"panel",children:(0,s.jsxs)("div",{className:"flex row align-baseline",children:[(0,s.jsx)("button",{onClick:()=>{o(!n)},ref:m,className:"flex-0",style:{whiteSpace:"pre"},children:(n?"Disable":"Enable")+" Keyboard"}),(0,s.jsx)("div",{className:"flex-1"})," ",(0,s.jsxs)("div",{className:"flex-4",children:["Key: ",c]}),(0,s.jsx)("div",{className:"flex-4",children:(0,s.jsx)(a.d,{name:"Char code",bits:u})})]})})}},8281:(e,t,n)=>{n.d(t,{DN:()=>s,Hw:()=>r,UL:()=>a});const s={none:"0px",sm:"0.125rem","":"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},r={"":"",t:"Top",r:"Right",l:"Left",b:"Bottom",tl:"TopLeft",tr:"TopRight",bl:"BottomLeft",br:"BottomRight"},a={"1/4":"25%","1/2":"50%","3/4":"75%",full:"100%"}},9267:(e,t,n)=>{n.d(t,{B:()=>y});var s=n(1391),r=n(5874),a=n(7365),i=n(172),l=n(1296),o=n(9646),c=n(7022),d=n(910),u=n(7589),h=n(6554),p=n(1091),m=n(8878),g=n(8029),x=n(2675),f=n(6073),v=n(5168),b=n(1384),j=n(782);const y=({runner:e,tst:[t,n,y],cmp:[k,C],out:[S],tstName:N,setPath:F,disabled:E=!1,defaultTst:L,defaultCmp:T,showName:I=!1,showLoad:R=!0,showClear:H=!1,speed:_,onSpeedChange:A,prefix:D})=>{var M,z;const{fs:K,setStatus:P}=(0,m.useContext)(d.L),{filePicker:$,tracking:U}=(0,m.useContext)(g.BR),[W,B]=(0,m.useState)(!0),q=(0,m.useRef)();(0,m.useEffect)(()=>(q.current=new class extends p.M{async reset(){var t;await(null===(t=e.current)||void 0===t?void 0:t.reset()),B(!0)}finishFrame(){var t;super.finishFrame(),null===(t=e.current)||void 0===t||t.finishFrame()}async tick(){var t,n;return B(!0),null!==(t=await(null===(n=e.current)||void 0===n?void 0:n.tick()))&&void 0!==t&&t}toggle(){var t;null===(t=e.current)||void 0===t||t.toggle()}},()=>{var e;null===(e=q.current)||void 0===e||e.stop()}),[e]);const O=(0,m.useCallback)(e=>{U.trackEvent("tab","change",e)},[U]),[V,Z]=(0,m.useState)(!1),G=(0,i.s)(),[Y,X]=(0,o.b)(null!==N&&void 0!==N?N:""),J=(0,m.useCallback)(async()=>{const e=await $.selectAllowLocal({suffix:[".tst",".cmp"]});if((0,f.uf)(e)){var t;const s=await(0,l.g9)(K,e.path);if((0,r.ys)(s))return void P("Failed to load test");null===F||void 0===F||F(e.path),X(null!==(t=e.path.split("/").pop())&&void 0!==t?t:"");const{tst:a,cmp:i}=(0,r.oA)(s);null===n||void 0===n||n(a),null===C||void 0===C||C(null!==i&&void 0!==i?i:"")}else{const t=Array.isArray(e)?e:[e],s=t.find(e=>e.name.endsWith(".tst")),r=t.find(e=>e.name.endsWith(".cmp"));s&&(null===n||void 0===n||n(s.content),X(s.name),null===F||void 0===F||F(s.name)),r&&(null===C||void 0===C||C(r.content))}},[$,P,K,F,X,n,C]),[Q,ee]=(0,m.useState)();(0,m.useEffect)(()=>{ee((0,a._)(k,S))},[S,k]);const te=(0,j.jsx)("dialog",{open:G.isOpen,children:(0,j.jsxs)("article",{children:[(0,j.jsx)("header",{children:"Warning"}),(0,j.jsxs)("main",{children:[(0,j.jsxs)("p",{children:["The test script can be edited during this IDE session. In the next session, the original script will be restored.",(0,j.jsx)("br",{})]}),(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,j.jsx)("input",{type:"checkbox",checked:V,onChange:e=>{Z(e.target.checked)}}),(0,j.jsx)("p",{children:"Do not show this again"})]}),(0,j.jsx)("p",{children:(0,j.jsx)("br",{})}),(0,j.jsx)("button",{onClick:()=>{V&&localStorage.setItem("skipTestEditWarning","true"),G.close()},children:"Ok"})]})]})});return(0,j.jsx)(v.Z,{className:"_test_panel",header:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(s.x6,{id:"NnH3pK"}),I&&(""==Y?": Default":`: ${Y}`)]}),te,(0,j.jsx)("div",{className:"flex-1",children:q.current&&(0,j.jsx)(c.T,{prefix:(0,j.jsxs)(j.Fragment,{children:[D,H&&(0,j.jsx)("button",{className:"flex-0",onClick:()=>{n(null!==L&&void 0!==L?L:""),C(null!==T&&void 0!==T?T:"")},children:"Clear"}),R&&(0,j.jsx)("button",{className:"flex-0",onClick:J,"data-tooltip":"Load a test script","data-placement":"bottom",children:"\ud83d\udcc2"})]}),runner:q.current,disabled:E,speed:_,onSpeedChange:A})})]}),children:(0,j.jsxs)(b.w,{children:[(0,j.jsx)(b.o,{title:"Test Script",onSelect:()=>O("tst"),children:(0,j.jsx)(x.K,{value:t,onChange:e=>{n(e),B(!1)},grammar:h.uG.parser,language:"tst",disabled:!0,highlight:W?y:void 0})}),(0,j.jsx)(b.o,{title:"Compare File",onSelect:()=>O("cmp"),children:(0,j.jsx)(x.K,{value:k,onChange:C,grammar:u.dl.parser,language:"cmp",lineNumberTransform:e=>"",disabled:!0})}),(0,j.jsxs)(b.o,{title:"Output File",onSelect:()=>O("out"),children:[""==S&&(0,j.jsx)("p",{children:"Execute test script to generate output."}),(0,j.jsx)(x.K,{value:S,onChange:()=>{},language:"cmp",disabled:!0,lineNumberTransform:e=>""})]}),(0,j.jsxs)(b.o,{title:"Diff Table",onSelect:()=>O("diff"),children:[""==S&&(0,j.jsx)("p",{children:"Execute test script to compare output."}),(null!==(M=null===Q||void 0===Q?void 0:Q.failureNum)&&void 0!==M?M:0)>0&&(0,j.jsxs)("p",{children:[null===Q||void 0===Q?void 0:Q.failureNum," comparison failure",1===(null===Q||void 0===Q?void 0:Q.failureNum)?"":"s",". Scroll down for details"]}),(0,j.jsx)(x.K,{value:null!==(z=null===Q||void 0===Q?void 0:Q.text)&&void 0!==z?z:"",onChange:()=>{},language:"",disabled:!0,lineNumberTransform:e=>{var t;return null!==(t=null===Q||void 0===Q?void 0:Q.lineNumbers[e-1])&&void 0!==t?t:""},customDecorations:null===Q||void 0===Q?void 0:Q.decorations.map(e=>({span:e.span,cssClass:w(e.type)}))})]})]})})};function w(e){switch(e){case"error-line":return"diff-highlight-error-line";case"error-cell":return"diff-highlight-error-cell";case"correct-line":return"diff-highlight-correct-line";case"correct-cell":return"diff-highlight-correct-cell";default:return""}}}}]);
/*! For license information please see main.13f56386.js.LICENSE.txt */
(()=>{"use strict";var e={8029:(e,t,n)=>{n.d(t,{BR:()=>c,Us:()=>u});var r=n(4544),i=n(172),s=n(8878),a=n(6073),o=n(5270);function l(){const e=!0,[t,n]=(0,s.useState)(e),r=(0,s.useCallback)((e=>{n(!!e)}),[e]);return{canUse:e,wants:t,toggle:r}}function u(e=new r.Q2){const[t,n]=(0,s.useState)("system");return{monaco:l(),settings:(0,i.s)(),filePicker:(0,a.g3)(),tracking:(0,o.z1)(),theme:t,setTheme:n}}const c=(0,s.createContext)({monaco:{canUse:!0,wants:!0,toggle(){}},filePicker:{close(){},open(){},select:e=>Promise.reject(""),isOpen:!1,suffix:void 0},settings:{close(){},open(){},isOpen:!1},tracking:{canTrack:!1,haveAsked:!1,accept(){},reject(){},trackEvent(){},trackPage(){}},theme:"system",setTheme(){}})},3600:(e,t,n)=>{n.d(t,{NQ:()=>q,qK:()=>K});var r=n(5874),i=n(7076),s=n(4666),a=n(7844),o=n(8878),l=n(9646),u=n(910);class c{asm={instructions:[]};current=-1;done=!1;symbols=[];variables=new Map;lines=[];lineNumbers=[];getResult(){return this.lines.join("\n")}load(e,t){this.symbols=[{name:"R0",value:"0"},{name:"R1",value:"1"},{name:"R2",value:"2"},{name:"...",value:""},{name:"R15",value:"15"},{name:"SCREEN",value:i.L7.toString()},{name:"KBD",value:i.ky.toString()}],this.variables.clear(),this.asm=e;const n=(0,s.EU)(e,((e,t,n)=>{n?this.variables.set(t,{name:e,isHidden:!0}):this.symbols.push({name:e,value:t.toString()})}));return(0,r.ys)(n)?n:(e.instructions=e.instructions.filter((({type:e})=>"L"!==e)),this.resolveLineNumbers(t),this.reset(),(0,r.Ok)())}resolveLineNumbers(e){this.lineNumbers=Array(e);let t=0;for(const n of this.asm.instructions)"A"!==n.type&&"C"!==n.type||void 0==n.span||(this.lineNumbers[n.span.line]=t,t+=1)}step(e){if(this.current>=this.asm.instructions.length-1)return;this.current+=1;const t=this.asm.instructions[this.current];if("A"===t.type||"C"===t.type){e.sourceHighlight=t.span;const n=(0,s.ld)(this.asm.instructions[this.current]);if(void 0===n)return;if(this.lines.push(`${(0,a.e5)(n)}`),e.resultHighlight={start:17*this.current,end:17*(this.current+1),line:-1},e.sourceHighlight&&e.highlightMap.set(e.sourceHighlight,e.resultHighlight),(0,s.J$)(t)){const e=this.variables.get(t.value);void 0!=e&&e.isHidden&&(this.symbols.push({name:e.name,value:t.value.toString()}),e.isHidden=!1)}this.current===this.asm.instructions.length-1&&(this.done=!0)}}resetSymbols(){for(const t of this.variables.values())t.isHidden=!0;const e=new Set(Array.from(this.variables.values()).map((e=>e.name)));this.symbols=this.symbols.filter((t=>!e.has(t.name)))}reset(){this.current=-1,this.lines=[],this.done=!1,this.resetSymbols()}}function p(){const{setStatus:e,fs:t,localFsRoot:n}=(0,o.useContext)(u.L),i=(0,o.useRef)((()=>{})),{initialState:a,reducers:p,actions:d}=(0,o.useMemo)((()=>function(e,t,n,i){const a=new c,o={resultHighlight:void 0,sourceHighlight:void 0,highlightMap:new Map};let l,u=!0,p=!1,d=!1,h=!1;const f={setAsm(e,{asm:t,path:n}){e.asm=t,n&&(e.path=n)},setCmp(e,{cmp:n,name:r}){e.compare=n,e.compareName=r,t("Loaded compare file")},setError(e,n){n&&t(n.message),e.error=n},update(e){e.translating=d,e.current=a.current,e.result=a.getResult(),e.symbols=Array.from(a.symbols),e.lineNumbers=Array.from(a.lineNumbers),e.sourceHighlight=o.sourceHighlight,e.resultHighlight=o.resultHighlight,e.compareError=h},compare(e){const n=e.result.split("\n"),r=e.compare.split("\n").filter((e=>""!=e.trim()));if(n.length!=r.length)return h=!0,void t("Comparison failed - different lengths");for(let i=0;i<r.length;i++)if(n[i]!==r[i])return t(`Comparison failure: Line ${i}`),h=!0,void(o.resultHighlight={start:17*i,end:17*(i+1),line:-1});t("Comparison successful")},setTitle(e,t){e.title=t},updateConfig(e,t){e.config={...e.config,...t}}},m={async loadAsm(t){l=t;const n=await e.readFile(l);m.setAsm(n,l)},setAsm(e,t){e=e.replace(/\r\n/g,"\n"),n.current({action:"setAsm",payload:{asm:e,path:t}}),d=!1,this.saveAsm(e),requestAnimationFrame((()=>{this.compileAsm(e)}))},saveAsm(t){l&&e.writeFile(l,t)},compileAsm(e){this.reset();const i=s.y0.parse(e);if((0,r.ys)(i))return n.current({action:"setError",payload:(0,r._)(i)}),void(p=!1);const o=a.load((0,r.Ok)(i),e.split("\n").length);if((0,r.ys)(o))return n.current({action:"setError",payload:(0,r._)(o)}),void(p=!1);p=a.asm.instructions.length>0,t(""),n.current({action:"setError"}),n.current({action:"update"})},setAnimate(e){u=e},step:async()=>(p&&(d=!0),a.step(o),(u||a.done)&&(n.current({action:"update"}),l&&i&&await e.writeFile(l.replace(/\.asm$/,".hack"),a.getResult())),a.done&&t("Translation done."),a.done),compare(){n.current({action:"compare"}),this.updateHighlight(o.resultHighlight?.start??0,!1),n.current({action:"update"})},updateHighlight(e,t){if(!h){for(const[n,r]of o.highlightMap)(t&&n.start<=e&&e<=n.end||!t&&r.start<=e&&e<=r.end)&&(o.sourceHighlight=n,o.resultHighlight=r);n.current({action:"update"})}},resetHighlightInfo(){o.sourceHighlight=void 0,o.resultHighlight=void 0,o.highlightMap.clear()},reset(){h=!1,d=!1,t("Reset"),a.reset(),this.resetHighlightInfo(),n.current({action:"update"})},clear(){this.setAsm(""),n.current({action:"setTitle",payload:void 0}),n.current({action:"setCmp",payload:""}),this.reset()},overrideState(e){if(this.resetHighlightInfo(),this.setAsm(e.asm,e.path),n.current({action:"setCmp",payload:{cmp:e.compare,name:e.compareName}}),e.translating)for(let t=0;t<=e.current;t++)this.step();n.current({action:"update"})}};return{initialState:{asm:"",path:void 0,translating:!1,current:-1,resultHighlight:void 0,sourceHighlight:void 0,symbols:[],result:"",compare:"",compareName:void 0,lineNumbers:[],compareError:!1,config:{speed:2}},reducers:f,actions:m}}(t,e,i,void 0!=n)),[e,i,t]),[h,f]=(0,l.A)(p,a);return i.current=f,{state:h,dispatch:i,actions:d}}var d=n(3180),h=n(3977),f=n(9563);const m='Jack <: Base {\n    Root := Class\n\n    whitespace = (lineComment | comment | space)\n\n    class = "class" whitespace+\n    Class = class jackIdentifier OpenBrace ClassVarDec* SubroutineDec* CloseBrace\n\n    type = ("int" | "char" | "boolean" | jackIdentifier) whitespace+\n\n    classVarType = ("static" | "field") whitespace+\n    ClassVarDec = classVarType type jackIdentifier TrailingIdentifier* Semi\n    TrailingIdentifier = Comma jackIdentifier\n\n    void = "void" whitespace+\n    returnType = (type | void) \n    subroutineType = ("constructor" | "function" | "method") whitespace+\n    SubroutineDec = subroutineType returnType jackIdentifier OpenParen ParameterList CloseParen SubroutineBody\n\n\n    Parameter = type jackIdentifier\n    Parameters = Parameter TrailingParameter*\n    TrailingParameter = Comma Parameter\n    ParameterList = Parameters?\n\n    SubroutineBody = OpenBrace VarDec* Statement* CloseBrace\n\n    var = "var" whitespace+\n    VarDec = var type jackIdentifier TrailingIdentifier* Semi\n\n    Statement = LetStatement | IfStatement | WhileStatement | DoStatement | ReturnStatement\n\n    arrayAccessStart = jackIdentifier openSquare\n    ArrayAccess = arrayAccessStart Expression CloseSquare\n\n    let = "let" whitespace+\n    LetTarget = ArrayAccess | jackIdentifier\n    LetStatement = let LetTarget Equal Expression Semi\n\n    IfStatement = "if" OpenParen Expression CloseParen OpenBrace Statement* CloseBrace ElseBlock?\n    ElseBlock = "else" OpenBrace Statement* CloseBrace\n\n    WhileStatement = "while" OpenParen Expression CloseParen OpenBrace Statement* CloseBrace\n\n    do = "do" whitespace+\n    DoStatement = do SubroutineCall Semi\n\n    return = "return"\n    returnWithSpace = "return" whitespace+\n    ReturnStatement = EmptyReturn | ReturnValue\n    EmptyReturn = return Semi\n    ReturnValue = returnWithSpace Expression Semi\n\n    op = "+" | "-" | "*" | "/" | "&" | "|" | "<" | ">" | "="\n    ExpressionPart = op Term\n    Expression = Term ExpressionPart*\n\n    integerConstant = digit+\n    stringConstant = doubleQuote (~doubleQuote ~newline any)* doubleQuote\n    keywordConstant = "true" | "false" | "null" | "this"\n\n    GroupedExpression = OpenParen Expression CloseParen\n\n    unaryOp = "-" | "~"\n    UnaryExpression = unaryOp Term\n\n    Term = integerConstant | stringConstant | keywordConstant | SubroutineCall  | ArrayAccess | jackIdentifier | GroupedExpression | UnaryExpression\n\n    compoundIdentifier = jackIdentifier dot jackIdentifier\n    SubroutineName = compoundIdentifier | jackIdentifier\n    SubroutineCall = SubroutineName OpenParen ExpressionList CloseParen\n\n    ExpressionList = Expressions?\n    Expressions = Expression TrailingExpression*\n    TrailingExpression = Comma Expression\n\n    jackIdentifier = letter (alnum | underscore)*\n}',g=new Set(["int","boolean","char"]);const y=(0,f.qN)(m,h.lN),v=y.extendSemantics(h.JE);function b(e){return e.children.map((e=>e.statement))}v.addAttribute("Root",{Root(e){return this.class}}),v.addAttribute("class",{Class:(e,t,n,r,i,s)=>({name:{value:t.sourceString,span:(0,h.Ln)(t.source)},varDecs:r.children.map((e=>e.classVarDec)),subroutines:i.children.map((e=>e.subroutineDec))})}),v.addAttribute("classVarDec",{ClassVarDec:(e,t,n,r,i)=>({varType:e.sourceString.trim(),type:{value:t.sourceString.trim(),span:(0,h.Ln)(t.source)},names:[n.sourceString,...r.children.map((e=>e.child(1).sourceString))]})}),v.addAttribute("subroutineDec",{SubroutineDec:(e,t,n,r,i,s,a)=>({type:e.sourceString.trim(),returnType:{value:t.sourceString.trim(),span:(0,h.Ln)(t.source)},name:{value:n.sourceString,span:(0,h.Ln)(n.source)},parameters:i.parameterList,body:a.subroutineBody})}),v.addAttribute("parameter",{Parameter:(e,t)=>({type:{value:e.sourceString.trim(),span:(0,h.Ln)(e.source)},name:t.sourceString})}),v.addAttribute("parameterList",{ParameterList:e=>e.child(0)?.parameters??[]}),v.addAttribute("parameters",{Parameters:(e,t)=>[e.parameter,...t.children.map((e=>e.child(1).parameter))]}),v.addAttribute("subroutineBody",{SubroutineBody:(e,t,n,r)=>({varDecs:t.children.map((e=>e.varDec)),statements:b(n)})}),v.addAttribute("varDec",{VarDec:(e,t,n,r,i)=>({type:{value:t.sourceString.trim(),span:(0,h.Ln)(t.source)},names:[n.sourceString,...r.children.map((e=>e.child(1).sourceString))]})}),v.addAttribute("statement",{LetStatement(e,t,n,r,i){return"variable"==t.term.termType?{statementType:"letStatement",name:{value:t.term.name,span:t.term.span},value:r.expression,span:(0,h.Ln)(this.source)}:{statementType:"letStatement",name:t.term.name,arrayIndex:t.term.index,value:r.expression,span:(0,h.Ln)(this.source)}},IfStatement:(e,t,n,r,i,s,a,o)=>({statementType:"ifStatement",condition:n.expression,body:b(s),else:o.child(0)?.else??[]}),WhileStatement:(e,t,n,r,i,s,a)=>({statementType:"whileStatement",condition:n.expression,body:b(s)}),DoStatement:(e,t,n)=>({statementType:"doStatement",call:t.term}),EmptyReturn(e,t){return{statementType:"returnStatement",span:(0,h.Ln)(this.source)}},ReturnValue(e,t,n){return{statementType:"returnStatement",value:t.expression,span:(0,h.Ln)(this.source)}}}),v.addAttribute("else",{ElseBlock:(e,t,n,r)=>b(n)}),v.addAttribute("term",{integerConstant:e=>({termType:"numericLiteral",value:Number(e.sourceString)}),stringConstant(e,t,n){return{termType:"stringLiteral",value:this.sourceString.slice(1,-1)}},keywordConstant(e){return{termType:"keywordLiteral",value:this.sourceString}},SubroutineCall(e,t,n,r){return{termType:"subroutineCall",name:{value:e.sourceString,span:(0,h.Ln)(e.source)},parameters:n.expressionList,span:(0,h.Ln)(this.source)}},ArrayAccess(e,t,n){const r=e.child(0);return{termType:"arrayAccess",name:{value:r.sourceString,span:(0,h.Ln)(r.source)},index:t.expression,span:(0,h.Ln)(this.source)}},jackIdentifier(e,t){return{termType:"variable",name:`${e.sourceString}${t.sourceString}`,span:(0,h.Ln)(this.source)}},GroupedExpression:(e,t,n)=>({termType:"groupedExpression",expression:t.expression}),UnaryExpression:(e,t)=>({termType:"unaryExpression",op:e.sourceString,term:t.term})}),v.addAttribute("expressionList",{ExpressionList:e=>e.child(0)?.expressions??[]}),v.addAttribute("expressions",{Expressions:(e,t)=>[e.expression,...t.children.map((e=>e.child(1).expression))]}),v.addAttribute("expression",{Expression:(e,t)=>({nodeType:"expression",term:e.term,rest:t.children.map((e=>e.expressionPart))})}),v.addAttribute("expressionPart",{ExpressionPart:(e,t)=>({op:e.sourceString,term:t.term})});const w={parser:y,grammar:m,semantics:v,parse:(0,h.Q5)(y,v,(e=>e.class))};var S=n(2548);class x{id;hasReturn=!1;children=[];static count=0;constructor(){this.id=x.count,x.count+=1}alwaysReturns(){const e=new Set;return function t(n){if(n.hasReturn)return!0;if(0===n.children.length)return!1;e.add(n);for(const r of n.children)if(!e.has(r)&&!t(r))return!1;return!0}(this)}getLeafs(){const e=new Set,t=new Set;return function n(r){if(0===r.children.length)e.add(r);else{t.add(r);for(const e of r.children)t.has(e)||n(e)}}(this),Array.from(e)}}function k(e,t,n){const i=new x;n.children.push(i),n=i;const s=I(e.body,t),a=I(e.else,t);if((0,r.ys)(s))return s;if((0,r.ys)(a))return a;const o=(0,r.oA)(s),l=(0,r.oA)(a);n.children.push(o,l);const u=o.getLeafs().concat(l.getLeafs());n=new x;for(const r of u)r.children.push(n);return(0,r.Ok)(n)}function _(e,t,n){const i=new x;n.children.push(i),n=i;const s=I(e.body,t);if((0,r.ys)(s))return s;const a=(0,r.oA)(s);for(const r of a.getLeafs())r.children.push(n);const o=new x;return n.children.push(a,o),n=o,(0,r.Ok)(n)}function I(e,t){const n=new x;let i,s=n;for(const a of e)switch(a.statementType){case"letStatement":case"doStatement":break;case"returnStatement":if("void"!=t&&void 0==a.value)return(0,r._)((0,h.$5)("A non void subroutine must return a value",a.span));s.hasReturn=!0;break;case"ifStatement":if(i=k(a,t,s),(0,r.ys)(i))return i;s=(0,r.oA)(i);break;case"whileStatement":if(i=_(a,t,s),(0,r.ys)(i))return i;s=(0,r.oA)(i)}return(0,r.Ok)(n)}function C(e){const t=I(e.body.statements,e.returnType.value);return(0,r.ys)(t)?t:(0,r.oA)(t).alwaysReturns()?(0,r.Ok)():(0,r._)((0,h.$5)(`Subroutine ${e.name.value}: not all code paths return a value`,e.name.span))}const A=new Set(["Sys","Screen","Output","Keyboard","String","Array","Memory","Math"]);function E(e){return A.has(e)}function O(e){return void 0!=e.message}function P(e){return e.charAt(0).toUpperCase()+e.slice(1)}function L(e){const t=new Set;for(const n of e.subroutines){if(t.has(n.name.value))return(0,r._)((0,h.$5)(`Subroutine ${n.name.value} already declared`,n.name.span));t.add(n.name.value);const e=C(n);if((0,r.ys)(e))return e}return(0,r.Ok)()}const R={"+":"add","-":"sub","*":"call Math.multiply 2","/":"call Math.divide 2","&":"and","|":"or","<":"lt",">":"gt","=":"eq"},T={"-":"neg","~":"not"};class N{instructions=[];globalSymbolTable={};localSymbolTable={};className="";classes={};labelNum=0;fieldNum=0;staticNum=0;localNum=0;get output(){return Array.from(this.instructions)}varData(e){return this.localSymbolTable[e]||this.globalSymbolTable[e]}var(e){let t,n;"string"==typeof e?t=e:"string"==typeof e.name?(t=e.name,n=e.span):(t=e.name.value,n=e.name.span);const r=this.varData(t);if(!r)throw(0,h.$5)(`Undeclared variable ${t}`,n);return`${r.segment} ${r.index}`}write(...e){this.instructions.push(...e)}getLabel(){const e=`${this.className}_${this.labelNum}`;return this.labelNum+=1,e}compile(e,t){this.className=e.name.value,this.classes=t??{};for(const n of e.varDecs)this.compileClassVarDec(n);for(const n of e.subroutines)this.compileSubroutineDec(n);return(0,r.Ok)(this.instructions.map((e=>e.startsWith("function")||e.startsWith("label")?e:"    ".concat(e))).join("\n"))}validateType(e,t){var n;if(n=e,!(g.has(n)||E(e)||this.classes[e]))throw(0,h.$5)(`Unknown type ${e}`,t)}validateReturnType(e,t){"void"!=e&&this.validateType(e,t)}compileClassVarDec(e){this.validateType(e.type.value,e.type.span);for(const t of e.names)"field"==e.varType?(this.globalSymbolTable[t]={type:e.type.value,segment:"this",index:this.fieldNum},this.fieldNum+=1):(this.globalSymbolTable[t]={type:e.type.value,segment:"static",index:this.staticNum},this.staticNum+=1)}compileVarDec(e){this.validateType(e.type.value,e.type.span);for(const t of e.names)this.localSymbolTable[t]={type:e.type.value,segment:"local",index:this.localNum},this.localNum+=1}registerArgs(e,t=!1){let n=0;for(const r of e)this.validateType(r.type.value,r.type.span),this.localSymbolTable[r.name]={type:r.type.value,segment:"argument",index:n+(t?1:0)},n+=1}validateSubroutineDec(e){if(this.validateReturnType(e.returnType.value,e.returnType.span),E(this.className)){const t=S.P9[`${this.className}.${e.name.value}`];if(t&&!(0,S.FY)(this.className,e))throw(0,h.$5)(`OS subroutine ${this.className}.${e.name.value} must follow the interface ${(0,S.aN)(e.name.value,t)})`)}}compileSubroutineDec(e){switch(this.validateSubroutineDec(e),e.type){case"method":this.compileMethod(e);break;case"constructor":this.compileConstructor(e);break;case"function":this.compileFunction(e)}}compileSubroutineStart(e,t=!1){this.localSymbolTable={},this.localNum=0,this.registerArgs(e.parameters,t);const n=e.body.varDecs.map((e=>e.names.length)).reduce(((e,t)=>e+t),0);this.write(`function ${this.className}.${e.name.value} ${n}`);for(const r of e.body.varDecs)this.compileVarDec(r)}compileFunction(e){this.compileSubroutineStart(e),this.compileStatements(e.body.statements)}compileMethod(e){this.compileSubroutineStart(e,!0),this.write("push argument 0","pop pointer 0"),this.compileStatements(e.body.statements)}compileConstructor(e){this.compileSubroutineStart(e),this.write(`push constant ${this.fieldNum}`,"call Memory.alloc 1","pop pointer 0"),this.compileStatements(e.body.statements)}compileExpression(e){this.compileTerm(e.term);for(const t of e.rest)this.compileTerm(t.term),this.compileOp(t.op)}compileOp(e){this.write(R[e])}compileTerm(e){switch(e.termType){case"numericLiteral":this.write(`push constant ${e.value}`);break;case"stringLiteral":this.compileStringLiteral(e.value);break;case"variable":this.write(`push ${this.var(e)}`);break;case"keywordLiteral":this.compileKeywordLiteral(e.value);break;case"subroutineCall":this.compileSubroutineCall(e);break;case"arrayAccess":this.compileExpression(e.index),this.write(`push ${this.var(e)}`,"add","pop pointer 1","push that 0");break;case"groupedExpression":this.compileExpression(e.expression);break;case"unaryExpression":this.compileTerm(e.term),this.write(T[e.op])}}validateArgNum(e,t,n){const r=n.parameters.length;if(t!=r)throw(0,h.$5)(`${e} expected ${t} arguments, got ${r}`,n.span)}validateSubroutineCall(e,t,n,r){const i=S.P9[`${e}.${t}`];if(!i){if(this.classes[e]){for(const i of this.classes[e].subroutines)if(i.name.value==t){if("method"==i.type&&!r)throw(0,h.$5)(`Method ${e}.${t} was called as a function/constructor`,n.name.span);if("method"!=i.type&&r)throw(0,h.$5)(`${P(i.name.value)} ${e}.${t} was called as a method`,n.name.span);return void this.validateArgNum(`${e}.${t}`,i.parameters.length,n)}throw(0,h.$5)(`Class ${e} doesn't contain a function/constructor ${t}`,n.name.span)}throw(0,h.$5)(`Class ${e} doesn't exist`,n.name.span)}if("method"==i.type&&!r)throw(0,h.$5)(`Method ${e}.${t} was called as a function/constructor`,n.name.span);if("method"!=i.type&&r)throw(0,h.$5)(`${P(i.type)} ${e}.${t} was called as a method`,n.name.span);this.validateArgNum(`${e}.${t}`,i.args.length,n)}classifySubroutineCall(e){let t,n="",r="";if(e.name.value.includes(".")){const[i,s]=e.name.value.split(".",2);r=s;const a=this.varData(i);a?(t=this.var(i),n=a.type):n=i}else t="pointer 0",n=this.className,r=e.name.value;return this.validateSubroutineCall(n,r,e,void 0!=t),{className:n,subroutineName:r,object:t}}compileSubroutineCall(e){const t=this.classifySubroutineCall(e);t.object&&this.write(`push ${t.object}`);for(const n of e.parameters)this.compileExpression(n);this.write(`call ${t.className}.${t.subroutineName} ${e.parameters.length+(t.object?1:0)}`)}compileStringLiteral(e){this.write(`push constant ${e.length}`,"call String.new 1");for(let t=0;t<e.length;t++)this.write(`push constant ${e.charCodeAt(t)}`,"call String.appendChar 2")}compileKeywordLiteral(e){switch(e){case"true":this.write("push constant 1","neg");break;case"false":case"null":this.write("push constant 0");break;case"this":this.write("push pointer 0")}}compileStatements(e){for(const t of e)this.compileStatement(t)}compileStatement(e){switch(e.statementType){case"doStatement":this.compileDoStatement(e);break;case"ifStatement":this.compileIf(e);break;case"letStatement":this.compileLet(e);break;case"returnStatement":this.compileReturn(e);break;case"whileStatement":this.compileWhile(e)}}compileReturn(e){e.value?this.compileExpression(e.value):this.write("push constant 0"),this.write("return")}compileLet(e){e.arrayIndex?(this.compileExpression(e.arrayIndex),this.write(`push ${this.var(e)}`,"add"),this.compileExpression(e.value),this.write("pop temp 0","pop pointer 1","push temp 0","pop that 0")):(this.compileExpression(e.value),this.write(`pop ${this.var(e)}`))}compileDoStatement(e){this.compileSubroutineCall(e.call),this.write("pop temp 0")}compileIf(e){const t=this.getLabel(),n=this.getLabel();this.compileExpression(e.condition),this.write("not",`if-goto ${n}`),this.compileStatements(e.body),this.write(`goto ${t}`,`label ${n}`),this.compileStatements(e.else),this.write(`label ${t}`)}compileWhile(e){const t=this.getLabel(),n=this.getLabel();this.write(`label ${t}`),this.compileExpression(e.condition),this.write("not",`if-goto ${n}`),this.compileStatements(e.body),this.write(`goto ${t}`,`label ${n}`)}}function F(e,t){let n;const i={setFs(e,t){e.fs=t},reset(e){e.files={},e.title=void 0},setFile(e,{name:t,content:n}){e.files[t]=n,e.isCompiled=!1,this.compile(e)},setFiles(e,t){e.files=t,e.isCompiled=!1,this.compile(e)},compile(e){const t=function(e){const t={};for(const[a,o]of Object.entries(e)){const e=w.parse(o);if((0,r.ys)(e))t[a]=(0,r._)(e);else{const n=(0,r.Ok)(e),i=L(n);t[a]=n.name.value==a?(0,r.ys)(i)?(0,r._)(i):n:(0,h.$5)(`Class name ${n.name.value} doesn't match file name ${a}`,n.name.span)}}const n=Object.fromEntries(Object.entries(t).filter((([e,t])=>!O(t)))),i={};for(const[a,o]of Object.entries(t))if(O(o))i[a]=o;else try{const e=(new N).compile(o,n);(0,r.ys)(e)?i[a]=(0,r._)(e):i[a]=(0,r.Ok)(e)}catch(s){i[a]=s}return i}(e.files);e.compiled={};for(const[n,r]of Object.entries(t))e.compiled[n]="string"===typeof r?{valid:!0,vm:r}:{valid:!1,error:r};e.isValid=Object.keys(e.files).every((t=>e.compiled[t].valid))},writeCompiled(e){if(Object.values(e.compiled).every((e=>e.valid)))for(const[t,r]of Object.entries(e.compiled))r.vm&&n?.writeFile(`${t}.vm`,r.vm);e.isCompiled=!0},setSelected(e,t){e.selected=t},setTitle(e,t){e.title=t}};return{initialState:{files:{},compiled:{},selected:"",isCompiled:!1,isValid:!0},reducers:i,actions:{async loadProject(e,r){this.reset(),n=e,t.current({action:"setFs",payload:n}),t.current({action:"setTitle",payload:r});const i={};for(const t of(await n.scandir("/")).filter((e=>e.isFile()&&e.name.endsWith(".jack"))))i[t.name.replace(".jack","")]=await n.readFile(t.name);this.loadFiles(i)},async loadFiles(e){t.current({action:"setFiles",payload:e}),Object.entries(e).length>0&&t.current({action:"setSelected",payload:Object.keys(e)[0]})},async writeFile(e,r){r??=function(e){return`class ${e} {\n\n}\n`}(e),t.current({action:"setFile",payload:{name:e,content:r}}),n&&await n.writeFile(`${e}.jack`,r)},async reset(){n=void 0,t.current({action:"reset"})},async compile(){t.current({action:"writeCompiled"})}}}}var M=n(6554),j=n(9547),D=n(6418),$=n(7365),z=n(1296),V=n(4256);function U(e,t){const n=new V.X(e.cpu.RAM,t),r=new V.X(e.cpu.ROM,t),s=new V.X(e.cpu.Screen,t),a=new i.PC(new V.X(e.cpu.RAM,t));return{A:e.cpu.A,D:e.cpu.D,PC:e.cpu.PC,RAM:n,ROM:r,Screen:s,Keyboard:a}}function B(){const{fs:e,setStatus:t,storage:n}=(0,o.useContext)(u.L),s=(0,o.useRef)((()=>{})),{initialState:a,reducers:c,actions:p}=(0,o.useMemo)((()=>function(e,t,n,s){let a,o=new D.bJ,l=!0,u=!0,c="",p=[],d="";const h={update(e){e.sim=U(o,s),e.test.highlight=o.currentStep?.span,e.test.valid=u,e.path=c,e.tests=Array.from(p),e.test.name=d},setTest(e,{tst:t,cmp:n}){e.test.tst=t??e.test.tst,e.test.cmp=n??e.test.cmp,e.test.out=""},testStep(e){e.test.out=o.log(),this.update(e)},testFinished(e){if(""===e.test.cmp.trim())return;const n=(0,$.U)(e.test.cmp.trim(),o.log().trim());t(n?"Simulation successful: The output file is identical to the compare file":"Simulation error: The output file differs from the compare file")},setTitle(e,t){a=t,e.title=t,t&&(o.fileLoaded=!0)},updateConfig(e,t){e.config={...e.config,...t}}},f={tick(){o.cpu.tick()},setAnimate(e){l=e},async setPath(t){c=t;const n=c.split("/").slice(0,-1).join("/"),r=await e.scandir(n);p=r.filter((e=>e.name.endsWith(".tst"))).map((e=>e.name)),p.length>0?this.loadTest(p[0]):(d="Default",this.compileTest("repeat {\n  ticktock;\n}","")),s.current({action:"update"})},async testStep(){try{const e=await o.step();return(l||e)&&s.current({action:"testStep"}),e&&s.current({action:"testFinished"}),e}catch(e){return t(e.message),!0}},resetRAM(){o.cpu.RAM.loadBytes([]),s.current({action:"update"}),t("Reset RAM")},toggleUseTest(){s.current({action:"update"})},reset(){o.reset(),s.current({action:"update"})},clear(){this.replaceROM(new i.n9),this.resetRAM(),this.clearTest(),this.reset(),s.current({action:"setTitle",payload:void 0})},clearTest(){d="",this.compileTest("repeat {\n  ticktock;\n}",""),s.current({action:"update"})},replaceROM(e){o=new D.bJ({dir:c,rom:e}),this.clearTest()},compileTest(n,i,l){const p=l??c;s.current({action:"setTest",payload:{tst:n,cmp:i}});const d=M.uG.parse(n);if((0,r.ys)(d))return t(`Failed to parse test - ${(0,r._)(d).message}`),u=!1,s.current({action:"update"}),!1;u=!0;const h=D.bJ.from((0,r.Ok)(d),{dir:p,rom:o.cpu.ROM,doEcho:t,doLoad:async t=>{let n;try{n=await e.readFile(t)}catch(s){throw new Error(`Cannot find ${t}`)}const r=t.endsWith("hack")?j.aU:t.endsWith("asm")?j.aY:j.yt,i=await r(n);console.log(i),o.cpu.ROM.loadBytes(i)},compareTo:async t=>{const n=p.split("/").slice(0,-1).join("/"),r=await e.readFile(`${n}/${t}`);s.current({action:"setTest",payload:{cmp:r}})},requireLoad:!1});return(0,r.ys)(h)?(t((0,r._)(h).message),!1):(o=(0,r.Ok)(h),o.fileLoaded=void 0!=a,s.current({action:"update"}),!0)},async loadTest(n){const i=c.split("/").slice(0,-1).join("/"),s=await(0,z.g9)(e,`${i}/${n}`);if((0,r.ys)(s))return void t("Failed to load test");d=n;const{tst:a}=(0,r.oA)(s);this.compileTest(a,"")}};return{initialState:{sim:U(o,s),test:{highlight:o.currentStep?.span,name:"",tst:"repeat {\n  ticktock;\n}",cmp:"",out:"",valid:!0},path:"",tests:[],config:{romFormat:"asm",ramFormat:"dec",screenScale:1,speed:2,testSpeed:2}},reducers:h,actions:f}}(e,t,0,s)),[e,t,n,s]),[d,h]=(0,l.A)(c,a);return s.current=h,{state:d,dispatch:s,actions:p}}var W=n(8849),H=n(782);function G(){const{fs:e}=(0,o.useContext)(u.L),[t,n]=(0,o.useState)(),[r,i]=(0,o.useState)(),s=(0,d.C1)(),a=B(),c=p(),h=(0,W.vw)(),f=function(){const{setStatus:e}=(0,o.useContext)(u.L),t=(0,o.useRef)((()=>{})),{initialState:n,reducers:r,actions:i}=(0,o.useMemo)((()=>F(0,t)),[e,t]),[s,a]=(0,l.A)(r,n);return t.current=a,{state:s,dispatch:t,actions:i}}();return(0,o.useEffect)((()=>{s.actions.initialize()}),[s.actions,e]),(0,o.useEffect)((()=>{h.actions.initialize()}),[h.actions]),(0,o.useEffect)((()=>{switch(r){case"chip":n(s.state.title);break;case"cpu":n(a.state.title);break;case"asm":n(c.state.title);break;case"vm":n(h.state.title);break;case"compiler":n(f.state.title);break;default:n(void 0)}}),[r,s.state.title,a.state.title,c.state.title,h.state.title,f.state.title]),{setTool:i,title:t,stores:{chip:s,cpu:a,asm:c,vm:h,compiler:f}}}const q=(0,o.createContext)({});function K(e){const t=G();return(0,H.jsx)(q.Provider,{value:t,children:e.children})}},3015:(e,t,n)=>{n.d(t,{I:()=>i});var r=n(782);const i=({name:e})=>(0,r.jsx)("span",{className:"material-symbols-outlined",children:e})},6073:(e,t,n)=>{n.d(t,{Nk:()=>b,uf:()=>f,g3:()=>m});var r=n(1391),i=n(8256),s=n(172),a=n(1296),o=n(910),l=n(8878),u=n(8029),c=n(3015),p=n(3569),d=n(782);const h="file selected";function f(e){return void 0!=e.path&&void 0!=e.isDir}function m(){const e=(0,s.s)(),[t,n]=(0,l.useState)(),[r,i]=(0,l.useState)(!1),a=(0,l.useRef)(!1),o=(0,l.useRef)(),u=(0,l.useCallback)((async t=>{var r;return"string"===typeof t.suffix&&(t.suffix=[t.suffix]),n(t.suffix),i(null!==(r=t.allowFolders)&&void 0!==r&&r),e.open(),new Promise((e=>{o.current=e}))}),[e,o]);return{...e,select:async e=>(a.current=!1,await u(e)),selectAllowLocal:async e=>(a.current=!0,u(e)),[h]:o,suffix:t,allowFolders:r,allowLocal:a.current}}const g=({onClick:e,onDoubleClick:t,stats:n,highlighted:r=!1,disabled:i=!1})=>(0,d.jsx)("div",{children:(0,d.jsxs)("button",{className:"flex row justify-start outline "+(r?"":"secondary"),style:{textAlign:"left",color:i?"var(--disabled)":void 0},onClick:n=>{1==n.detail?null===e||void 0===e||e():2==n.detail&&(null===t||void 0===t||t())},children:[(0,d.jsx)(c.I,{name:n.isDirectory()?"folder":"draft"}),n.name]})});async function y(e,t,n){for(const r of await t.scandir(n))if(r.isDirectory()){const i=e.folder(r.name);i&&await y(i,t,`${n}/${r.name}`)}else e.file(r.name,await t.readFile(`${n}/${r.name}`))}function v(e,t){return t.map((t=>e.endsWith(t))).reduce(((e,t)=>e||t),!1)}const b=()=>{const{fs:e,setStatus:t,localFsRoot:n}=(0,l.useContext)(o.L),{filePicker:s}=(0,l.useContext)(u.BR),[c,f]=(0,l.useState)([]),[m,b]=(0,l.useState)({path:e.cwd(),isDir:!0}),w=e.cwd(),S=t=>"/"!=e.cwd()?[{isFile:()=>!1,isDirectory:()=>!0,name:".."},...(0,a.w9)(t)]:(0,a.w9)(t);(0,l.useEffect)((()=>{n||"/"!=e.cwd()||x("projects"),b({path:e.cwd(),isDir:!0})}),[e]),(0,l.useEffect)((()=>{e.scandir(e.cwd()).then((e=>{f(S(e))}))}),[e,w,f]);const x=(0,l.useCallback)((t=>{e.cd(t),e.scandir(e.cwd()).then((e=>{f(S(e))}))}),[e,b,f]),k=(0,l.useCallback)(((t,n)=>{b({path:`${"/"==e.cwd()?"":e.cwd()}/${t}`,isDir:n})}),[b,e]),_=(0,l.useCallback)((()=>{var e,t;s.close(),null===(e=(t=s[h]).current)||void 0===e||e.call(t,m)}),[m,s,t]),I=(0,l.useRef)(null),C=(0,l.useRef)(null),A=(0,l.useMemo)((()=>m.path.split("/").pop()),[m]);return(0,d.jsxs)("dialog",{open:s.isOpen,children:[(0,d.jsx)("input",{type:"file",ref:I,onChange:async()=>{var e,t;if(!I.current||!I.current.files||0==I.current.files.length)return;const n=[];for(const r of I.current.files)n.push({name:r.name,content:await r.text()});null===(e=(t=s[h]).current)||void 0===e||e.call(t,1==n.length?n[0]:n),s.close()},style:{display:"none"},webkitdirectory:s.allowFolders?"true":void 0}),(0,d.jsxs)("article",{className:"file-select flex",children:[(0,d.jsxs)("header",{children:[(0,d.jsx)("p",{children:(0,d.jsx)(r.x6,{id:"J/hVSQ",values:{0:i.Ru._({id:"+yPBXI"})}})}),(0,d.jsx)("a",{style:{color:"rgba(0, 0, 0, 0)"},className:"close",href:"#root",onClick:e=>{e.preventDefault(),s.close()},children:i.Ru._({id:"RG3szS"})})]}),(0,d.jsxs)("main",{children:[(0,d.jsx)("a",{ref:C,style:{display:"none"}}),(0,d.jsx)("div",{children:(0,d.jsx)("b",{children:e.cwd()})}),(0,d.jsx)("div",{className:"flex wrap files-container",children:c.map((e=>(0,d.jsx)(g,{stats:e,highlighted:e.name===A,onClick:()=>k(e.name,e.isDirectory()),onDoubleClick:()=>{e.isDirectory()&&x(e.name)},disabled:!(".."==e.name)&&e.name.includes(".")&&void 0!=s.suffix&&!v(e.name,s.suffix)},e.name)))})]}),(0,d.jsxs)("footer",{children:[(0,d.jsx)("button",{disabled:!m||".."==m.path||void 0!=s.suffix&&m.path.includes(".")&&!v(m.path,s.suffix)||!s.allowFolders&&!m.path.includes("."),onClick:_,children:i.Ru._({id:"rG3WVm"})}),!n&&s.allowLocal&&(0,d.jsx)("button",{onClick:()=>{var e;null===(e=I.current)||void 0===e||e.click()},children:"Select local file"}),!n&&(0,d.jsx)("button",{onClick:async()=>{var t;if(!C.current)return;const n=await(0,p.e)();await y(n,e,m.path);const r=await n.generateAsync({type:"blob"}),i=URL.createObjectURL(r);C.current.href=i,C.current.download=null!==(t=m.path.split("/").pop())&&void 0!==t?t:m.path,C.current.click(),URL.revokeObjectURL(i)},"data-tooltip":i.Ru._({id:"qqcblq"}),disabled:""==m.path||m.path.includes("."),children:i.Ru._({id:"mzI/c+"})})]})]})]})}},3569:(e,t,n)=>{async function r(e){const t=await i();for(const r of e)t.file(r.name,await r.content);const n=await t.generateAsync({type:"blob"});return URL.createObjectURL(n)}async function i(){const{default:e}=await n.e(608).then(n.t.bind(n,5608,23));return new e}n.d(t,{e:()=>i,y:()=>r})},5270:(e,t,n)=>{n.d(t,{w:()=>v,dQ:()=>b,z1:()=>y});var r,i=n(1092),s=n(2469),a=n(8878),o=n(782);const l="/tracking/canTrack",u="yes",c="no",p="",d=[u,c];let h=!1;const f=null!==(r={NODE_ENV:"production",PUBLIC_URL:"/web-ide",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.GA4_ID)&&void 0!==r?r:"G-0VTR5BJFQP";function m(e){i.Ay.send({hitType:"pageview",page:e})}function g(e,t,n,r){var a,o;if(h)return;const l="string"===typeof e?{category:e,action:(0,s.Z1)(t),label:n&&r?{label:n,value:r}:void 0}:e;i.Ay.event({category:l.category,action:l.action,nonInteraction:!l.interaction,label:null===(a=l.label)||void 0===a?void 0:a.label,value:null===(o=l.label)||void 0===o?void 0:o.value})}function y(){var e;const t=null!==(e=localStorage[l])&&void 0!==e?e:p,[n,r]=(0,a.useState)(t===u),[s,o]=(0,a.useState)(d.includes(t)||"1"===navigator.doNotTrack);return{canTrack:n,haveAsked:s,accept:(0,a.useCallback)((()=>{localStorage[l]=u,r(!0),o(!0),i.Ay.initialize(f),i.Ay.send("pageview")}),[r,o]),reject:(0,a.useCallback)((()=>{localStorage[l]=c,r(!1),o(!0),h=!0}),[r,o]),trackEvent:g,trackPage:m}}function v(){const{accept:e,reject:t,haveAsked:n}=y(),[r,i]=(0,a.useState)(!n),s=(0,a.useCallback)((()=>{i(!1)}),[i]),l=(0,a.useCallback)((()=>{e(),s()}),[e,s]),u=(0,a.useCallback)((()=>{t(),s()}),[t,s]);return(0,o.jsx)(o.Fragment,{children:r&&(0,o.jsxs)("div",{id:"trackingBanner",className:"flex row",children:[(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(b,{})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("a",{href:"#reject",role:"button",className:"reject",onClick:u,children:"Reject"}),(0,o.jsx)("a",{href:"#accept",role:"button",className:"accept",onClick:l,children:"Accept"}),(0,o.jsx)("a",{href:"#close",role:"button",className:"close secondary",onClick:s,children:"\ud835\uddb7"})]})]})})}function b(){return(0,o.jsxs)("p",{style:{margin:0},children:["This site uses Google Analytics to gather information that will improve the user experience. This only includes anonymous interaction data, and never shares your code."," ",(0,o.jsx)("a",{href:"www.google.com/policies/privacy/partners/",children:"How Google uses data."})]})}},3499:(e,t,n)=>{n.d(t,{Ay:()=>m,It:()=>f,p3:()=>h});var r=n(8878),i=n(782);const s=(0,r.lazy)((()=>Promise.all([n.e(537),n.e(787)]).then(n.bind(n,7737)))),a=(0,r.lazy)((()=>Promise.all([n.e(537),n.e(744)]).then(n.bind(n,5178)))),o=(0,r.lazy)((()=>n.e(519).then(n.bind(n,5519)))),l=(0,r.lazy)((()=>n.e(323).then(n.bind(n,1323)))),u=(0,r.lazy)((()=>Promise.all([n.e(537),n.e(34)]).then(n.bind(n,1496)))),c=(0,r.lazy)((()=>n.e(598).then(n.bind(n,6598)))),p=(0,r.lazy)((()=>n.e(408).then(n.bind(n,2408)))),d=(0,r.lazy)((()=>Promise.all([n.e(656),n.e(614)]).then(n.bind(n,3614)))),h="lastRoute",f={chip:"Hardware Simulator",cpu:"CPU Emulator",asm:"Assembler",vm:"VM Emulator",bitmap:"Bitmap Editor",compiler:"Jack Compiler"},m={chip:{href:"/chip",tool:"chip",target:(0,i.jsx)(s,{})},cpu:{href:"/cpu",tool:"cpu",target:(0,i.jsx)(a,{})},asm:{href:"/asm",tool:"asm",target:(0,i.jsx)(o,{})},vm:{href:"/vm",tool:"vm",target:(0,i.jsx)(u,{})},compiler:{href:"/compiler",tool:"compiler",target:(0,i.jsx)(c,{})},bitmap:{href:"/bitmap",tool:"bitmap",target:(0,i.jsx)(l,{})},util:{href:"/util",target:(0,i.jsx)(p,{})},about:{href:"/about",target:(0,i.jsx)(d,{})}}},1642:(e,t,n)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var i;n.d(t,{AO:()=>p,Gh:()=>N,HS:()=>F,Oi:()=>o,Rr:()=>d,pX:()=>z,pb:()=>P,rc:()=>i,tH:()=>$,ue:()=>m,yD:()=>T,zR:()=>a}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const s="popstate";function a(e){return void 0===e&&(e={}),h((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return c("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,e)}function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t,n,i){return void 0===n&&(n=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function h(e,t,n,a){void 0===a&&(a={});let{window:l=document.defaultView,v5Compat:d=!1}=a,h=l.history,f=i.Pop,m=null,g=y();function y(){return(h.state||{idx:null}).idx}function v(){f=i.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:f,location:w.location,delta:t})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,h.replaceState(r({},h.state,{idx:g}),""));let w={get action(){return f},get location(){return e(l,h)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(s,v),m=e,()=>{l.removeEventListener(s,v),m=null}},createHref:e=>t(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=i.Push;let r=c(w.location,e,t);n&&n(r,e),g=y()+1;let s=u(r,g),a=w.createHref(r);try{h.pushState(s,"",a)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(a)}d&&m&&m({action:f,location:w.location,delta:1})},replace:function(e,t){f=i.Replace;let r=c(w.location,e,t);n&&n(r,e),g=y();let s=u(r,g),a=w.createHref(r);h.replaceState(s,"",a),d&&m&&m({action:f,location:w.location,delta:0})},go:e=>h.go(e)};return w}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let i=P(("string"===typeof t?d(t):t).pathname||"/",n);if(null==i)return null;let s=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=O(i);a=A(s[o],e,r)}return a}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(o(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let l=F([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),y(e.children,t,u,l)),(null!=e.path||e.index)&&t.push({path:l,score:C(l,e.index),routesMeta:u})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))i(e,t,r);else i(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=v(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,w=3,S=2,x=1,k=10,_=-2,I=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=_),t&&(r+=S),n.filter((e=>!I(e))).reduce(((e,t)=>e+(b.test(t)?w:""===t?x:k)),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),p=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:F([s,c.pathname]),pathnameBase:M(F([s,c.pathnameBase])),route:p}),"/"!==c.pathnameBase&&(s=F([s,c.pathnameBase]))}return a}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function T(e,t){let n=R(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function N(e,t,n,i){let s;void 0===i&&(i=!1),"string"===typeof e?s=d(e):(s=r({},e),o(!s.pathname||!s.pathname.includes("?"),L("?","pathname","search",s)),o(!s.pathname||!s.pathname.includes("#"),L("#","pathname","hash",s)),o(!s.search||!s.search.includes("#"),L("#","search","hash",s)));let a,l=""===e||""===s.pathname,u=l?"/":s.pathname;if(null==u)a=n;else{let e=t.length-1;if(!i&&u.startsWith("..")){let t=u.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?d(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:j(r),hash:D(i)}}(s,a),p=u&&"/"!==u&&u.endsWith("/"),h=(l||"."===u)&&n.endsWith("/");return c.pathname.endsWith("/")||!p&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",D=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class $ extends Error{}function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],U=(new Set(V),["get",...V]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},2777:(e,t,n)=>{var r=n(8878),i=n(7116);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(f,e)||!p.call(h,e)&&(d.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),A=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var T=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var M,j=Object.assign;function D(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var $=!1;function z(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function V(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case I:return"Profiler";case _:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,xe=null,ke=null;function _e(e){if(e=vi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Ie(e){xe?ke?ke.push(e):ke=[e]:xe=e}function Ce(){if(xe){var e=xe,t=ke;if(ke=xe=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ae(e,t){return e(t)}function Ee(){}var Oe=!1;function Pe(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Ae(e,t,n)}finally{Oe=!1,(null!==xe||null!==ke)&&(Ee(),Ce())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(c)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch(rc){Re=!1}function Ne(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Fe=!1,Me=null,je=!1,De=null,$e={onError:function(e){Fe=!0,Me=e}};function ze(e,t,n,r,i,s,a,o,l){Fe=!1,Me=null,Ne.apply($e,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Be(e){if(Ve(e)!==e)throw Error(s(188))}function We(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Be(i),e;if(a===r)return Be(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ot|0)|0},at=Math.log,ot=Math.LN2;var lt=64,ut=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ct(o):0!==(s&=a)&&(r=ct(s))}else 0!==(a=n&~i)?r=ct(a):0!==s&&(r=ct(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,xt,kt,_t,It=!1,Ct=[],At=null,Et=null,Ot=null,Pt=new Map,Lt=new Map,Rt=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ft(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void _t(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Dt(e,t,n){jt(e)&&n.delete(t)}function $t(){It=!1,null!==At&&jt(At)&&(At=null),null!==Et&&jt(Et)&&(Et=null),null!==Ot&&jt(Ot)&&(Ot=null),Pt.forEach(Dt),Lt.forEach(Dt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$t)))}function Vt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&zt(At,e),null!==Et&&zt(Et,e),null!==Ot&&zt(Ot,e),Pt.forEach(t),Lt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Ut=w.ReactCurrentBatchConfig,Bt=!0;function Wt(e,t,n,r){var i=vt,s=Ut.transition;Ut.transition=null;try{vt=1,Gt(e,t,n,r)}finally{vt=i,Ut.transition=s}}function Ht(e,t,n,r){var i=vt,s=Ut.transition;Ut.transition=null;try{vt=4,Gt(e,t,n,r)}finally{vt=i,Ut.transition=s}}function Gt(e,t,n,r){if(Bt){var i=Kt(e,t,n,r);if(null===i)Br(e,t,r,qt,n),Nt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Ft(At,e,t,n,r,i),!0;case"dragenter":return Et=Ft(Et,e,t,n,r,i),!0;case"mouseover":return Ot=Ft(Ot,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Ft(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Lt.set(s,Ft(Lt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Nt(e,r),4&t&&-1<Tt.indexOf(e)){for(;null!==i;){var s=vi(i);if(null!==s&&wt(s),null===(s=Kt(e,t,n,r))&&Br(e,t,r,qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Br(e,t,r,null,n)}}var qt=null;function Kt(e,t,n,r){if(qt=null,null!==(e=yi(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Jt=null;function Zt(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var sn,an,on,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(ln),cn=j({},ln,{view:0,detail:0}),pn=rn(cn),dn=j({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(sn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=sn=0,on=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=rn(dn),fn=rn(j({},dn,{dataTransfer:0})),mn=rn(j({},cn,{relatedTarget:0})),gn=rn(j({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(yn),bn=rn(j({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function _n(){return kn}var In=j({},cn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=rn(In),An=rn(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=rn(j({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),On=rn(j({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=rn(Pn),Rn=[9,13,27,32],Tn=c&&"CompositionEvent"in window,Nn=null;c&&"documentMode"in document&&(Nn=document.documentMode);var Fn=c&&"TextEvent"in window&&!Nn,Mn=c&&(!Tn||Nn&&8<Nn&&11>=Nn),jn=String.fromCharCode(32),Dn=!1;function $n(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Wn(e,t,n,r){Ie(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function qn(e){jr(e,0)}function Kn(e){if(q(bi(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Xn;if(c){var Jn="oninput"in document;if(!Jn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Jn="function"===typeof Zn.oninput}Xn=Jn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function er(){Hn&&(Hn.detachEvent("onpropertychange",tr),Gn=Hn=null)}function tr(e){if("value"===e.propertyName&&Kn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Pe(qn,t)}}function nr(e,t,n){"focusin"===e?(er(),Gn=n,(Hn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Gn)}function ir(e,t){if("click"===e)return Kn(t)}function sr(e,t){if("input"===e||"change"===e)return Kn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!p.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},kr={};function _r(e){if(xr[e])return xr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return xr[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Ir=_r("animationend"),Cr=_r("animationiteration"),Ar=_r("animationstart"),Er=_r("transitionend"),Or=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Or.set(e,t),l(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Tr=Pr[Rr];Lr(Tr.toLowerCase(),"on"+(Tr[0].toUpperCase()+Tr.slice(1)))}Lr(Ir,"onAnimationEnd"),Lr(Cr,"onAnimationIteration"),Lr(Ar,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Er,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,u){if(ze.apply(this,arguments),Fe){if(!Fe)throw Error(s(198));var c=Me;Fe=!1,Me=null,je||(je=!0,De=c)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,u),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,u),s=l}}}if(je)throw e=De,je=!1,De=null,e}function Dr(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function $r(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[zr]){e[zr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||$r(t,!1,e),$r(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,$r("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Qt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Br(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pe((function(){var r=s,i=we(n),a=[];e:{var o=Or.get(e);if(void 0!==o){var l=un,u=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Ir:case Cr:case Ar:l=gn;break;case Er:l=On;break;case"scroll":l=pn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),p=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var h,f=r;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=Le(f,d))&&c.push(Wr(f,m,h)))),p)break;f=f.return}0<c.length&&(o=new l(o,u,null,n,i),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[hi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(p=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=hn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,m="onPointerLeave",d="onPointerEnter",f="pointer"),p=null==l?o:bi(l),h=null==u?o:bi(u),(o=new c(m,f+"leave",l,n,i)).target=p,o.relatedTarget=h,m=null,yi(i)===r&&((c=new c(d,f+"enter",u,n,i)).target=h,c.relatedTarget=p,m=c),p=m,l&&u)e:{for(d=u,f=0,h=c=l;h;h=Gr(h))f++;for(h=0,m=d;m;m=Gr(m))h++;for(;0<f-h;)c=Gr(c),f--;for(;0<h-f;)d=Gr(d),h--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=Gr(c),d=Gr(d)}c=null}else c=null;null!==l&&qr(a,o,l,c,!1),null!==u&&null!==p&&qr(a,p,u,c,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Bn(o))if(Yn)g=sr;else{g=rr;var y=nr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Wn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bi(r):window,e){case"focusin":(Bn(y)||"true"===y.contentEditable)&&(mr=y,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(a,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(Tn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?$n(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=Zt()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Vn=!0)),0<(y=Hr(r,b)).length&&(b=new bn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Dn=!0,jn);case"textInput":return(e=t.data)===jn&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Tn&&$n(e,t)?(e=Zt(),Jt=Xt=Yt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}jr(a,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Le(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Le(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(l=Le(n,s))&&a.unshift(Wr(n,l,o)):i||null!=(l=Le(n,s))&&a.push(Wr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Jr(){}var Zr=null,ei=null;function ti(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ri="function"===typeof clearTimeout?clearTimeout:void 0,ii="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ii?function(e){return ii.resolve(null).then(e).catch(ai)}:ni;function ai(e){setTimeout((function(){throw e}))}function oi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ci=Math.random().toString(36).slice(2),pi="__reactFiber$"+ci,di="__reactProps$"+ci,hi="__reactContainer$"+ci,fi="__reactEvents$"+ci,mi="__reactListeners$"+ci,gi="__reactHandles$"+ci;function yi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[pi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[pi]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[di]||null}var Si=[],xi=-1;function ki(e){return{current:e}}function _i(e){0>xi||(e.current=Si[xi],Si[xi]=null,xi--)}function Ii(e,t){xi++,Si[xi]=e.current,e.current=t}var Ci={},Ai=ki(Ci),Ei=ki(!1),Oi=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){_i(Ei),_i(Ai)}function Ti(e,t,n){if(Ai.current!==Ci)throw Error(s(168));Ii(Ai,t),Ii(Ei,n)}function Ni(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return j({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Oi=Ai.current,Ii(Ai,e),Ii(Ei,Ei.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ni(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,_i(Ei),_i(Ai),Ii(Ai,e)):_i(Ei),Ii(Ei,n)}var ji=null,Di=!1,$i=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Vi(){if(!$i&&null!==ji){$i=!0;var e=0,t=vt;try{var n=ji;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Di=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Je,Vi),i}finally{vt=t,$i=!1}}return null}var Ui=[],Bi=0,Wi=null,Hi=0,Gi=[],qi=0,Ki=null,Qi=1,Yi="";function Xi(e,t){Ui[Bi++]=Hi,Ui[Bi++]=Wi,Wi=e,Hi=t}function Ji(e,t,n){Gi[qi++]=Qi,Gi[qi++]=Yi,Gi[qi++]=Ki,Ki=e;var r=Qi;e=Yi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var s=32-st(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Qi=1<<32-st(t)+i|n<<i|r,Yi=s+e}else Qi=1<<s|n<<i|r,Yi=e}function Zi(e){null!==e.return&&(Xi(e,1),Ji(e,1,0))}function es(e){for(;e===Wi;)Wi=Ui[--Bi],Ui[Bi]=null,Hi=Ui[--Bi],Ui[Bi]=null;for(;e===Ki;)Ki=Gi[--qi],Gi[qi]=null,Yi=Gi[--qi],Gi[qi]=null,Qi=Gi[--qi],Gi[qi]=null}var ts=null,ns=null,rs=!1,is=null;function ss(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ts=e,ns=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ts=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Qi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ts=e,ns=null,!0);default:return!1}}function os(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(rs){var t=ns;if(t){var n=t;if(!as(e,t)){if(os(e))throw Error(s(418));t=li(n.nextSibling);var r=ts;t&&as(e,t)?ss(r,n):(e.flags=-4097&e.flags|2,rs=!1,ts=e)}}else{if(os(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ts=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ts=e}function cs(e){if(e!==ts)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ti(e.type,e.memoizedProps)),t&&(t=ns)){if(os(e))throw ps(),Error(s(418));for(;t;)ss(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ns=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ns=null}}else ns=ts?li(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=ns;e;)e=li(e.nextSibling)}function ds(){ns=ts=null,rs=!1}function hs(e){null===is?is=[e]:is.push(e)}var fs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function vs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ru(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===k?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ys(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Tu(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,s){return null===t||7!==t.tag?((t=Nu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Tu(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case x:return(t=ju(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Nu(t,e.mode,n,null)).return=e,t;gs(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?u(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null;case R:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||F(n))return null!==i?null:p(e,t,n,r,null);gs(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||F(r))return p(t,e=e.get(n)||null,r,i,null);gs(t,r)}return null}function m(i,s,o,l){for(var u=null,c=null,p=s,m=s=0,g=null;null!==p&&m<o.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=h(i,p,o[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),s=a(y,s,m),null===c?u=y:c.sibling=y,c=y,p=g}if(m===o.length)return n(i,p),rs&&Xi(i,m),u;if(null===p){for(;m<o.length;m++)null!==(p=d(i,o[m],l))&&(s=a(p,s,m),null===c?u=p:c.sibling=p,c=p);return rs&&Xi(i,m),u}for(p=r(i,p);m<o.length;m++)null!==(g=f(p,i,m,o[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),s=a(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),rs&&Xi(i,m),u}function g(i,o,l,u){var c=F(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var p=c=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=h(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===p?c=b:p.sibling=b,p=b,m=y}if(v.done)return n(i,m),rs&&Xi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(o=a(v,o,g),null===p?c=v:p.sibling=v,p=v);return rs&&Xi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===p?c=v:p.sibling=v,p=v);return e&&m.forEach((function(e){return t(i,e)})),rs&&Xi(i,g),c}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case S:e:{for(var u=a.key,c=s;null!==c;){if(c.key===u){if((u=a.type)===k){if(7===c.tag){n(r,c.sibling),(s=i(c,a.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&ys(u)===c.type){n(r,c.sibling),(s=i(c,a.props)).ref=ms(r,c,a),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===k?((s=Nu(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Tu(a.type,a.key,a.props,null,r.mode,l)).ref=ms(r,s,a),l.return=r,r=l)}return o(r);case x:e:{for(c=a.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=ju(a,r.mode,l)).return=r,r=s}return o(r);case R:return e(r,s,(c=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(F(a))return g(r,s,a,l);gs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Mu(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=vs(!0),ws=vs(!1),Ss=ki(null),xs=null,ks=null,_s=null;function Is(){_s=ks=xs=null}function Cs(e){var t=Ss.current;_i(Ss),e._currentValue=t}function As(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){xs=e,_s=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Os(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===xs)throw Error(s(308));ks=e,xs.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Ps=null;function Ls(e){null===Ps?Ps=[e]:Ps.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ls(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ts(e,r)}function Ts(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Fs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ts(e,n)}return null===(i=r.interleaved)?(t.next=t,Ls(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ts(e,n)}function $s(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==s){var p=i.baseState;for(a=0,c=u=l=null,o=s;;){var d=o.lane,h=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(d=t,h=n,m.tag){case 1:if("function"===typeof(f=m.payload)){p=f.call(h,p,d);break e}p=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(h,p,d):f)||void 0===d)break e;p=j({},p,d);break e;case 2:Ns=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=h,l=p):c=c.next=h,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=p}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Bs={},Ws=ki(Bs),Hs=ki(Bs),Gs=ki(Bs);function qs(e){if(e===Bs)throw Error(s(174));return e}function Ks(e,t){switch(Ii(Gs,t),Ii(Hs,e),Ii(Ws,Bs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Ws),Ii(Ws,t)}function Qs(){_i(Ws),_i(Hs),_i(Gs)}function Ys(e){qs(Gs.current);var t=qs(Ws.current),n=le(t,e.type);t!==n&&(Ii(Hs,e),Ii(Ws,n))}function Xs(e){Hs.current===e&&(_i(Ws),_i(Hs))}var Js=ki(0);function Zs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function ta(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var na=w.ReactCurrentDispatcher,ra=w.ReactCurrentBatchConfig,ia=0,sa=null,aa=null,oa=null,la=!1,ua=!1,ca=0,pa=0;function da(){throw Error(s(321))}function ha(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function fa(e,t,n,r,i,a){if(ia=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=null===e||null===e.memoizedState?Xa:Ja,e=n(r,i),ua){a=0;do{if(ua=!1,ca=0,25<=a)throw Error(s(301));a+=1,oa=aa=null,t.updateQueue=null,na.current=Za,e=n(r,i)}while(ua)}if(na.current=Ya,t=null!==aa&&null!==aa.next,ia=0,oa=aa=sa=null,la=!1,t)throw Error(s(300));return e}function ma(){var e=0!==ca;return ca=0,e}function ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oa?sa.memoizedState=oa=e:oa=oa.next=e,oa}function ya(){if(null===aa){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=aa.next;var t=null===oa?sa.memoizedState:oa.next;if(null!==t)oa=t,aa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(aa=e).memoizedState,baseState:aa.baseState,baseQueue:aa.baseQueue,queue:aa.queue,next:null},null===oa?sa.memoizedState=oa=e:oa=oa.next=e}return oa}function va(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=aa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,u=null,c=a;do{var p=c.lane;if((ia&p)===p)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,o=r):u=u.next=d,sa.lanes|=p,Fl|=p}c=c.next}while(null!==c&&c!==a);null===u?o=r:u.next=l,ar(r,t.memoizedState)||(vo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Fl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);ar(a,t.memoizedState)||(vo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function xa(e,t){var n=sa,r=ya(),i=t(),a=!ar(r.memoizedState,i);if(a&&(r.memoizedState=i,vo=!0),r=r.queue,Na(Ia.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==oa&&1&oa.memoizedState.tag){if(n.flags|=2048,Oa(9,_a.bind(null,n,r,i,t),void 0,null),null===El)throw Error(s(349));0!==(30&ia)||ka(n,t,i)}return i}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&Aa(e)}function Ia(e,t,n){return n((function(){Ca(t)&&Aa(e)}))}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Aa(e){var t=Ts(e,1);null!==t&&tu(t,e,1,-1)}function Ea(e){var t=ga();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[t.memoizedState,e]}function Oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return ya().memoizedState}function La(e,t,n,r){var i=ga();sa.flags|=e,i.memoizedState=Oa(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==aa){var a=aa.memoizedState;if(s=a.destroy,null!==r&&ha(r,a.deps))return void(i.memoizedState=Oa(t,n,s,r))}sa.flags|=e,i.memoizedState=Oa(1|t,n,s,r)}function Ta(e,t){return La(8390656,8,e,t)}function Na(e,t){return Ra(2048,8,e,t)}function Fa(e,t){return Ra(4,2,e,t)}function Ma(e,t){return Ra(4,4,e,t)}function ja(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Da(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,ja.bind(null,t,e),n)}function $a(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ha(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ha(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ua(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n):(ar(n,t)||(n=ft(),sa.lanes|=n,Fl|=n,e.baseState=!0),t)}function Ba(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=ra.transition;ra.transition={};try{e(!1),t()}finally{vt=n,ra.transition=r}}function Wa(){return ya().memoizedState}function Ha(e,t,n){var r=eu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qa(e))Ka(t,n);else if(null!==(n=Rs(e,t,n,r))){tu(n,e,r,Zl()),Qa(n,t,r)}}function Ga(e,t,n){var r=eu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qa(e))Ka(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,ar(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ls(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Rs(e,t,i,r))&&(tu(n,e,r,i=Zl()),Qa(n,t,r))}}function qa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ka(e,t){ua=la=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ya={readContext:Os,useCallback:da,useContext:da,useEffect:da,useImperativeHandle:da,useInsertionEffect:da,useLayoutEffect:da,useMemo:da,useReducer:da,useRef:da,useState:da,useDebugValue:da,useDeferredValue:da,useTransition:da,useMutableSource:da,useSyncExternalStore:da,useId:da,unstable_isNewReconciler:!1},Xa={readContext:Os,useCallback:function(e,t){return ga().memoizedState=[e,void 0===t?null:t],e},useContext:Os,useEffect:Ta,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4194308,4,ja.bind(null,t,e),n)},useLayoutEffect:function(e,t){return La(4194308,4,e,t)},useInsertionEffect:function(e,t){return La(4,2,e,t)},useMemo:function(e,t){var n=ga();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ga();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ha.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ga().memoizedState=e},useState:Ea,useDebugValue:$a,useDeferredValue:function(e){return ga().memoizedState=e},useTransition:function(){var e=Ea(!1),t=e[0];return e=Ba.bind(null,e[1]),ga().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=ga();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===El)throw Error(s(349));0!==(30&ia)||ka(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ta(Ia.bind(null,r,a,e),[e]),r.flags|=2048,Oa(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ga(),t=El.identifierPrefix;if(rs){var n=Yi;t=":"+t+"R"+(n=(Qi&~(1<<32-st(Qi)-1)).toString(32)+n),0<(n=ca++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ja={readContext:Os,useCallback:za,useContext:Os,useEffect:Na,useImperativeHandle:Da,useInsertionEffect:Fa,useLayoutEffect:Ma,useMemo:Va,useReducer:ba,useRef:Pa,useState:function(){return ba(va)},useDebugValue:$a,useDeferredValue:function(e){return Ua(ya(),aa.memoizedState,e)},useTransition:function(){return[ba(va)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:xa,useId:Wa,unstable_isNewReconciler:!1},Za={readContext:Os,useCallback:za,useContext:Os,useEffect:Na,useImperativeHandle:Da,useInsertionEffect:Fa,useLayoutEffect:Ma,useMemo:Va,useReducer:wa,useRef:Pa,useState:function(){return wa(va)},useDebugValue:$a,useDeferredValue:function(e){var t=ya();return null===aa?t.memoizedState=e:Ua(t,aa.memoizedState,e)},useTransition:function(){return[wa(va)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:xa,useId:Wa,unstable_isNewReconciler:!1};function eo(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function to(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=eu(e),s=js(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(tu(t,e,i,r),$s(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=eu(e),s=js(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(tu(t,e,i,r),$s(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=eu(e),i=js(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ds(e,i,r))&&(tu(t,e,r,n),$s(t,e,r))}};function ro(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,s))}function io(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Os(s):(i=Li(t)?Oi:Ai.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function so(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function ao(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Os(s):(s=Li(t)?Oi:Ai.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(to(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&no.enqueueReplaceState(i,i.state,null),Vs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function oo(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function lo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var co="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=js(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bl||(Bl=!0,Wl=r),uo(0,t)},n}function ho(e,t,n){(n=js(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new co;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_u.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=js(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=w.ReactCurrentOwner,vo=!1;function bo(e,t,n,r){t.child=null===e?ws(t,null,n,r):bs(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=fa(e,t,n,r,s,i),n=ma(),null===e||vo?(rs&&n&&Zi(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bo(e,t,i))}function So(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Lu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Tu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,xo(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:or)(a,r)&&e.ref===t.ref)return Bo(e,t,i)}return t.flags|=1,(e=Ru(s,r)).ref=t.ref,e.return=t,t.child=e}function xo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(or(s,r)&&e.ref===t.ref){if(vo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Bo(e,t,i);0!==(131072&e.flags)&&(vo=!0)}}return Io(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Rl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Rl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ii(Rl,Ll),Ll|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ii(Rl,Ll),Ll|=r;return bo(e,t,i,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Io(e,t,n,r,i){var s=Li(n)?Oi:Ai.current;return s=Pi(t,s),Es(t,i),n=fa(e,t,n,r,s,i),r=ma(),null===e||vo?(rs&&r&&Zi(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bo(e,t,i))}function Co(e,t,n,r,i){if(Li(n)){var s=!0;Fi(t)}else s=!1;if(Es(t,i),null===t.stateNode)Uo(e,t),io(t,n,r),ao(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Os(u):u=Pi(t,u=Li(n)?Oi:Ai.current);var c=n.getDerivedStateFromProps,p="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;p||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==u)&&so(t,a,r,u),Ns=!1;var d=t.memoizedState;a.state=d,Vs(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ei.current||Ns?("function"===typeof c&&(to(t,n,c,r),l=t.memoizedState),(o=Ns||ro(t,n,o,r,d,l,u))?(p||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ms(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:eo(t.type,o),a.props=u,p=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Os(l):l=Pi(t,l=Li(n)?Oi:Ai.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==p||d!==l)&&so(t,a,r,l),Ns=!1,d=t.memoizedState,a.state=d,Vs(t,r,a,i);var f=t.memoizedState;o!==p||d!==f||Ei.current||Ns?("function"===typeof h&&(to(t,n,h,r),f=t.memoizedState),(u=Ns||ro(t,n,u,r,d,f,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ao(e,t,n,r,s,i)}function Ao(e,t,n,r,i,s){_o(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Bo(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Ti(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ti(0,t.context,!1),Ks(e,t.containerInfo)}function Oo(e,t,n,r,i){return ds(),hs(i),t.flags|=256,bo(e,t,n,r),t.child}var Po,Lo,Ro,To,No={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,i=t.pendingProps,a=Js.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ii(Js,1&a),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fu(l,i,0,null),e=Nu(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=No,e):jo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Do(e,t,o,r=lo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(a=Nu(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=No,a);if(0===(1&t.mode))return Do(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Do(e,t,o,r=lo(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(r=El)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ts(e,i),tu(r,e,i,-1))}return fu(),Do(e,t,o,r=lo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ns=li(i.nextSibling),ts=t,rs=!0,is=null,null!==e&&(Gi[qi++]=Qi,Gi[qi++]=Yi,Gi[qi++]=Ki,Qi=e.id,Yi=e.overflow,Ki=t),t=jo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ru(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Ru(r,o):(o=Nu(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=No,i}return e=(o=e.child).sibling,i=Ru(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function jo(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Do(e,t,n,r){return null!==r&&hs(r),bs(t,e.child,null,n),(e=jo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $o(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),As(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Vo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Js.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,n,t);else if(19===e.tag)$o(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(Js,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Zs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Zs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ru(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ru(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(es(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:case 17:return Li(t.type)&&Ri(),Ho(t),null;case 3:return r=t.stateNode,Qs(),_i(Ei),_i(Ai),ta(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(cs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==is&&(su(is),is=null))),Lo(e,t),Ho(t),null;case 5:Xs(t);var i=qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ho(t),null}if(e=qs(Ws.current),cs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[pi]=t,r[di]=a,e=0!==(1&t.mode),n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)Dr(Nr[i],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":Y(r,a),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Dr("invalid",r);break;case"textarea":ie(r,a),Dr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Dr("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[di]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Dr("cancel",e),Dr("close",e),i=r;break;case"iframe":case"object":case"embed":Dr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)Dr(Nr[i],e);i=r;break;case"source":Dr("error",e),i=r;break;case"img":case"image":case"link":Dr("error",e),Dr("load",e),i=r;break;case"details":Dr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Dr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Dr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Dr("invalid",e)}for(a in ye(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&pe(e,c):"number"===typeof c&&pe(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Dr("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&null!=t.stateNode)To(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=qs(Gs.current),qs(Ws.current),cs(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(a=r.nodeValue!==n)&&null!==(e=ts))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Ho(t),null;case 13:if(_i(Js),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))ps(),ds(),t.flags|=98560,a=!1;else if(a=cs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[pi]=t}else ds(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ho(t),a=!1}else null!==is&&(su(is),is=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Js.current)?0===Tl&&(Tl=3):fu())),null!==t.updateQueue&&(t.flags|=4),Ho(t),null);case 4:return Qs(),Lo(e,t),null===e&&Vr(t.stateNode.containerInfo),Ho(t),null;case 10:return Cs(t.type._context),Ho(t),null;case 19:if(_i(Js),null===(a=t.memoizedState))return Ho(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Wo(a,!1);else{if(0!==Tl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=Zs(e))){for(t.flags|=128,Wo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(Js,1&Js.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>Vl&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Zs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return Ho(t),null}else 2*Ye()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=Js.current,Ii(Js,r?1&n|2:1&n),t):(Ho(t),null);case 22:case 23:return cu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Ho(t),6&t.subtreeFlags&&(t.flags|=8192)):Ho(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function qo(e,t){switch(es(t),t.tag){case 1:return Li(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),_i(Ei),_i(Ai),ta(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(_i(Js),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ds()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(Js),null;case 4:return Qs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return cu(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Lo=function(){},Ro=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,qs(Ws.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Dr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},To=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Qo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Jo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){ku(e,t,r)}else n.current=null}function Zo(e,t,n){try{n()}catch(r){ku(e,t,r)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Zo(t,n,s)}i=i.next}while(i!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[di],delete t[fi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var ul=null,cl=!1;function pl(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Qo||Jo(n,t);case 6:var r=ul,i=cl;ul=null,pl(e,t,n),cl=i,null!==(ul=r)&&(cl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(cl?(e=ul,n=n.stateNode,8===e.nodeType?oi(e.parentNode,n):1===e.nodeType&&oi(e,n),Vt(e)):oi(ul,n.stateNode));break;case 4:r=ul,i=cl,ul=n.stateNode.containerInfo,cl=!0,pl(e,t,n),ul=r,cl=i;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&Zo(n,t,a),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Qo&&(Jo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ku(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,pl(e,t,n),Qo=r):pl(e,t,n);break;default:pl(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,cl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,cl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));dl(a,o,i),ul=null,cl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){ku(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(g){ku(e,e.return,g)}try{tl(5,e,e.return)}catch(g){ku(e,e.return,g)}}break;case 1:fl(t,e),gl(e),512&r&&null!==n&&Jo(n,n.return);break;case 5:if(fl(t,e),gl(e),512&r&&null!==n&&Jo(n,n.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(g){ku(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),ve(l,o);var c=ve(l,a);for(o=0;o<u.length;o+=2){var p=u[o],d=u[o+1];"style"===p?me(i,d):"dangerouslySetInnerHTML"===p?ce(i,d):"children"===p?pe(i,d):b(i,p,d,c)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):h!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[di]=a}catch(g){ku(e,e.return,g)}}break;case 6:if(fl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){ku(e,e.return,g)}}break;case 3:if(fl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){ku(e,e.return,g)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Ye())),4&r&&hl(e);break;case 22:if(p=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(c=Qo)||p,fl(t,e),Qo=c):fl(t,e),gl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!p&&0!==(1&e.mode))for(Xo=e,p=e.child;null!==p;){for(d=Xo=p;null!==Xo;){switch(f=(h=Xo).child,h.tag){case 0:case 11:case 14:case 15:tl(4,h,h.return);break;case 1:Jo(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){ku(r,n,g)}}break;case 5:Jo(h,h.return);break;case 22:if(null!==h.memoizedState){wl(d);continue}}null!==f?(f.return=h,Xo=f):wl(d)}p=p.sibling}e:for(p=null,d=e;;){if(5===d.tag){if(null===p){p=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=fe("display",o))}catch(g){ku(e,e.return,g)}}}else if(6===d.tag){if(null===p)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){ku(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fl(t,e),gl(e),4&r&&hl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pe(i,""),r.flags&=-33),ll(e,al(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ol(e,al(e),a);break;default:throw Error(s(161))}}catch(o){ku(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xo=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var i=Xo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ko;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Ko;var u=Qo;if(Ko=a,(Qo=l)&&!u)for(Xo=i;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Xo=l):Sl(i);for(;null!==s;)Xo=s,vl(s,t,n),s=s.sibling;Xo=i,Ko=o,Qo=u}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xo=s):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:eo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Us(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var p=c.memoizedState;if(null!==p){var d=p.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&rl(t)}catch(h){ku(t,t.return,h)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function Sl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){ku(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){ku(t,i,l)}}var s=t.return;try{rl(t)}catch(l){ku(t,s,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){ku(t,a,l)}}}catch(l){ku(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var xl,kl=Math.ceil,_l=w.ReactCurrentDispatcher,Il=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Al=0,El=null,Ol=null,Pl=0,Ll=0,Rl=ki(0),Tl=0,Nl=null,Fl=0,Ml=0,jl=0,Dl=null,$l=null,zl=0,Vl=1/0,Ul=null,Bl=!1,Wl=null,Hl=null,Gl=!1,ql=null,Kl=0,Ql=0,Yl=null,Xl=-1,Jl=0;function Zl(){return 0!==(6&Al)?Ye():-1!==Xl?Xl:Xl=Ye()}function eu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==fs.transition?(0===Jl&&(Jl=ft()),Jl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function tu(e,t,n,r){if(50<Ql)throw Ql=0,Yl=null,Error(s(185));gt(e,n,r),0!==(2&Al)&&e===El||(e===El&&(0===(2&Al)&&(Ml|=n),4===Tl&&au(e,Pl)),nu(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Vl=Ye()+500,Di&&Vi()))}function nu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-st(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=dt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=pt(e,e===El?Pl:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Di=!0,zi(e)}(ou.bind(null,e)):zi(ou.bind(null,e)),si((function(){0===(6&Al)&&Vi()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=Eu(n,ru.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ru(e,t){if(Xl=-1,Jl=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=pt(e,e===El?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=Al;Al|=2;var a=hu();for(El===e&&Pl===t||(Ul=null,Vl=Ye()+500,pu(e,t));;)try{yu();break}catch(l){du(e,l)}Is(),_l.current=a,Al=i,null!==Ol?t=0:(El=null,Pl=0,t=Tl)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=iu(e,i))),1===t)throw n=Nl,pu(e,0),au(e,r),nu(e,Ye()),n;if(6===t)au(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(a=ht(e))&&(r=a,t=iu(e,a))),1===t))throw n=Nl,pu(e,0),au(e,r),nu(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wu(e,$l,Ul);break;case 3:if(au(e,r),(130023424&r)===r&&10<(t=zl+500-Ye())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(wu.bind(null,e,$l,Ul),t);break}wu(e,$l,Ul);break;case 4:if(au(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ni(wu.bind(null,e,$l,Ul),r);break}wu(e,$l,Ul);break;default:throw Error(s(329))}}}return nu(e,Ye()),e.callbackNode===n?ru.bind(null,e):null}function iu(e,t){var n=Dl;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=mu(e,t))&&(t=$l,$l=n,null!==t&&su(t)),e}function su(e){null===$l?$l=e:$l.push.apply($l,e)}function au(e,t){for(t&=~jl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function ou(e){if(0!==(6&Al))throw Error(s(327));Su();var t=pt(e,0);if(0===(1&t))return nu(e,Ye()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=iu(e,r))}if(1===n)throw n=Nl,pu(e,0),au(e,t),nu(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,$l,Ul),nu(e,Ye()),null}function lu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Vl=Ye()+500,Di&&Vi())}}function uu(e){null!==ql&&0===ql.tag&&0===(6&Al)&&Su();var t=Al;Al|=1;var n=Cl.transition,r=vt;try{if(Cl.transition=null,vt=1,e)return e()}finally{vt=r,Cl.transition=n,0===(6&(Al=t))&&Vi()}}function cu(){Ll=Rl.current,_i(Rl)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ri(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(es(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Qs(),_i(Ei),_i(Ai),ta();break;case 5:Xs(r);break;case 4:Qs();break;case 13:case 19:_i(Js);break;case 10:Cs(r.type._context);break;case 22:case 23:cu()}n=n.return}if(El=e,Ol=e=Ru(e.current,null),Pl=Ll=t,Tl=0,Nl=null,jl=Ml=Fl=0,$l=Dl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ps=null}return e}function du(e,t){for(;;){var n=Ol;try{if(Is(),na.current=Ya,la){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}la=!1}if(ia=0,oa=aa=sa=null,ua=!1,ca=0,Il.current=null,null===n||null===n.return){Tl=1,Nl=t,Ol=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,p=l,d=p.tag;if(0===(1&p.mode)&&(0===d||11===d||15===d)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var f=mo(o);if(null!==f){f.flags&=-257,go(f,o,l,0,t),1&f.mode&&fo(a,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){fo(a,c,t),fu();break e}u=Error(s(426))}else if(rs&&1&l.mode){var y=mo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),go(y,o,l,0,t),hs(oo(u,l));break e}}a=u=oo(u,l),4!==Tl&&(Tl=2),null===Dl?Dl=[a]:Dl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(0,u,t));break e;case 1:l=u;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hl||!Hl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,ho(a,l,t));break e}}a=a.return}while(null!==a)}bu(n)}catch(w){t=w,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function hu(){var e=_l.current;return _l.current=Ya,null===e?Ya:e}function fu(){0!==Tl&&3!==Tl&&2!==Tl||(Tl=4),null===El||0===(268435455&Fl)&&0===(268435455&Ml)||au(El,Pl)}function mu(e,t){var n=Al;Al|=2;var r=hu();for(El===e&&Pl===t||(Ul=null,pu(e,t));;)try{gu();break}catch(i){du(e,i)}if(Is(),Al=n,_l.current=r,null!==Ol)throw Error(s(261));return El=null,Pl=0,Tl}function gu(){for(;null!==Ol;)vu(Ol)}function yu(){for(;null!==Ol&&!Ke();)vu(Ol)}function vu(e){var t=xl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?bu(e):Ol=t,Il.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Ll)))return void(Ol=n)}else{if(null!==(n=qo(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Tl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Tl&&(Tl=5)}function wu(e,t,n){var r=vt,i=Cl.transition;try{Cl.transition=null,vt=1,function(e,t,n,r){do{Su()}while(null!==ql);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===El&&(Ol=El=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Eu(et,(function(){return Su(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=vt;vt=1;var l=Al;Al|=4,Il.current=null,function(e,t){if(Zr=Bt,dr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(S){n=null;break e}var o=0,l=-1,u=-1,c=0,p=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(u=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===i&&(l=o),h===a&&++p===r&&(u=o),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:e,selectionRange:n},Bt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:eo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(S){ku(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=el,el=!1}(e,n),ml(n,e),hr(ei),Bt=!!Zr,ei=Zr=null,e.current=n,yl(n,e,i),Qe(),Al=l,vt=o,Cl.transition=a}else e.current=n;if(Gl&&(Gl=!1,ql=e,Kl=i),a=e.pendingLanes,0===a&&(Hl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nu(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bl)throw Bl=!1,e=Wl,Wl=null,e;0!==(1&Kl)&&0!==e.tag&&Su(),a=e.pendingLanes,0!==(1&a)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,Vi()}(e,t,n,r)}finally{Cl.transition=i,vt=r}return null}function Su(){if(null!==ql){var e=bt(Kl),t=Cl.transition,n=vt;try{if(Cl.transition=null,vt=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Kl=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Xo=c;null!==Xo;){var p=Xo;switch(p.tag){case 0:case 11:case 15:tl(8,p,a)}var d=p.child;if(null!==d)d.return=p,Xo=d;else for(;null!==Xo;){var h=(p=Xo).sibling,f=p.return;if(il(p),p===c){Xo=null;break}if(null!==h){h.return=f,Xo=h;break}Xo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:tl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Xo=v;break e}Xo=a.return}}var b=e.current;for(Xo=b;null!==Xo;){var w=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Xo=w;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(x){ku(l,l.return,x)}if(l===o){Xo=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Xo=S;break e}Xo=l.return}}if(Al=i,Vi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(x){}r=!0}return r}finally{vt=n,Cl.transition=t}}return!1}function xu(e,t,n){e=Ds(e,t=po(0,t=oo(n,t),1),1),t=Zl(),null!==e&&(gt(e,1,t),nu(e,t))}function ku(e,t,n){if(3===e.tag)xu(e,e,n);else for(;null!==t;){if(3===t.tag){xu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Ds(t,e=ho(t,e=oo(n,e),1),1),e=Zl(),null!==t&&(gt(t,1,e),nu(t,e));break}}t=t.return}}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Pl&n)===n&&(4===Tl||3===Tl&&(130023424&Pl)===Pl&&500>Ye()-zl?pu(e,0):jl|=n),nu(e,t)}function Iu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Zl();null!==(e=Ts(e,t))&&(gt(e,t,n),nu(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Iu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Iu(e,n)}function Eu(e,t){return Ge(e,t)}function Ou(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Ou(e,t,n,r)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ru(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Tu(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Lu(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Nu(n.children,i,a,t);case _:o=8,i|=8;break;case I:return(e=Pu(12,n,t,2|i)).elementType=I,e.lanes=a,e;case O:return(e=Pu(13,n,t,i)).elementType=O,e.lanes=a,e;case P:return(e=Pu(19,n,t,i)).elementType=P,e.lanes=a,e;case T:return Fu(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case A:o=9;break e;case E:o=11;break e;case L:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pu(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Nu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=T,e.lanes=n,e.stateNode={isHidden:!1},e}function Mu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function ju(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Du(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $u(e,t,n,r,i,s,a,o,l){return e=new Du(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fs(s),e}function zu(e){if(!e)return Ci;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Li(n))return Ni(e,n,t)}return t}function Vu(e,t,n,r,i,s,a,o,l){return(e=$u(n,r,!0,e,0,s,0,o,l)).context=zu(null),n=e.current,(s=js(r=Zl(),i=eu(n))).callback=void 0!==t&&null!==t?t:null,Ds(n,s,i),e.current.lanes=i,gt(e,i,r),nu(e,r),e}function Uu(e,t,n,r){var i=t.current,s=Zl(),a=eu(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=js(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ds(i,t,a))&&(tu(e,i,a,s),$s(e,i,a)),a}function Bu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}xl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)vo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),ds();break;case 5:Ys(t);break;case 1:Li(t.type)&&Fi(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(Js,1&Js.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Ii(Js,1&Js.current),null!==(e=Bo(e,t,n))?e.sibling:null);Ii(Js,1&Js.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(Js,Js.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Bo(e,t,n)}(e,t,n);vo=0!==(131072&e.flags)}else vo=!1,rs&&0!==(1048576&t.flags)&&Ji(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Uo(e,t),e=t.pendingProps;var i=Pi(t,Ai.current);Es(t,n),i=fa(null,t,r,e,i,n);var a=ma();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(a=!0,Fi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fs(t),i.updater=no,t.stateNode=i,i._reactInternals=t,ao(t,r,e,n),t=Ao(null,t,r,!0,a,n)):(t.tag=0,rs&&a&&Zi(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===L)return 14}return 2}(r),e=eo(r,e),i){case 0:t=Io(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=So(null,t,r,eo(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Io(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 3:e:{if(Eo(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ms(e,t),Vs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Oo(e,t,r,n,i=oo(Error(s(423)),t));break e}if(r!==i){t=Oo(e,t,r,n,i=oo(Error(s(424)),t));break e}for(ns=li(t.stateNode.containerInfo.firstChild),ts=t,rs=!0,is=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ds(),r===i){t=Bo(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&ls(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ti(r,i)?o=null:null!==a&&ti(r,a)&&(t.flags|=32),_o(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Mo(e,t,n);case 4:return Ks(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ii(Ss,r._currentValue),r._currentValue=o,null!==a)if(ar(a.value,o)){if(a.children===i.children&&!Ei.current){t=Bo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=js(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var p=(c=c.shared).pending;null===p?u.next=u:(u.next=p.next,p.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),As(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),As(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=Os(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=eo(r=t.type,t.pendingProps),So(e,t,r,i=eo(r.type,i),n);case 15:return xo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),Uo(e,t),t.tag=1,Li(r)?(e=!0,Fi(t)):e=!1,Es(t,n),io(t,r,i),ao(t,r,i,n),Ao(null,t,r,!0,e,n);case 19:return Vo(e,t,n);case 22:return ko(e,t,n)}throw Error(s(156,t.tag))};var Gu="function"===typeof reportError?reportError:function(e){console.error(e)};function qu(e){this._internalRoot=e}function Ku(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xu(){}function Ju(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Bu(a);o.call(e)}}Uu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Bu(a);s.call(e)}}var a=Vu(t,r,e,0,null,!1,0,"",Xu);return e._reactRootContainer=a,e[hi]=a.current,Vr(8===e.nodeType?e.parentNode:e),uu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Bu(l);o.call(e)}}var l=$u(e,0,!1,null,0,!1,0,"",Xu);return e._reactRootContainer=l,e[hi]=l.current,Vr(8===e.nodeType?e.parentNode:e),uu((function(){Uu(t,l,n,r)})),l}(n,t,e,i,r);return Bu(a)}Ku.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Uu(e,t,null,null)},Ku.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uu((function(){Uu(null,e,null,null)})),t[hi]=null}},Ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(yt(t,1|n),nu(t,Ye()),0===(6&Al)&&(Vl=Ye()+500,Vi()))}break;case 13:uu((function(){var t=Ts(e,1);if(null!==t){var n=Zl();tu(t,e,1,n)}})),Hu(e,1)}},St=function(e){if(13===e.tag){var t=Ts(e,134217728);if(null!==t)tu(t,e,134217728,Zl());Hu(e,134217728)}},xt=function(e){if(13===e.tag){var t=eu(e),n=Ts(e,t);if(null!==n)tu(n,e,t,Zl());Hu(e,t)}},kt=function(){return vt},_t=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));q(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=lu,Ee=uu;var Zu={usingClientEntryPoint:!1,Events:[vi,bi,wi,Ie,Ce,lu]},ec={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tc={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{rt=nc.inject(tc),it=nc}catch(rc){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(s(299));var n=!1,r="",i=Gu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=$u(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uu(e)},t.hydrate=function(e,t,n){if(!Yu(t))throw Error(s(200));return Ju(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Gu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,i,0,a,o),e[hi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ku(t)},t.render=function(e,t,n){if(!Yu(t))throw Error(s(200));return Ju(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yu(e))throw Error(s(40));return!!e._reactRootContainer&&(uu((function(){Ju(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=lu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Ju(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4664:(e,t,n)=>{var r=n(8815);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},8815:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2777)},5817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=e||"";t&&(s=e.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,(function(e,t,r){return t>0&&t+e.length!==r.length&&e.search(n)>-1&&":"!==r.charAt(t-2)&&("-"!==r.charAt(t+e.length)||"-"===r.charAt(t-1))&&r.charAt(t-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})));i&&(s=function(e){if(function(e){return"string"===typeof e&&-1!==e.indexOf("@")}(e))return console.warn("This arg looks like an email address, redacting."),r;return e}(s));return s};var n=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;var r="REDACTED (Potential Email Address)"},5068:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GA4=void 0;var r=l(n(5189)),i=l(n(5817)),s=["eventCategory","eventAction","eventLabel","eventValue","hitType"],a=["title","location"],o=["page","hitType"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function v(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}var w=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"reset",(function(){t.isInitialized=!1,t._testMode=!1,t._currentMeasurementId,t._hasLoadedGA=!1,t._isQueuing=!1,t._queueGtag=[]})),v(this,"_gtag",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t._testMode||t._isQueuing?t._queueGtag.push(n):r.default.apply(void 0,n)})),v(this,"_loadGA",(function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://www.googletagmanager.com/gtag/js";if("undefined"!==typeof window&&"undefined"!==typeof document&&!t._hasLoadedGA){var i=document.createElement("script");i.async=!0,i.src="".concat(r,"?id=").concat(e),n&&i.setAttribute("nonce",n),document.body.appendChild(i),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},t._hasLoadedGA=!0}})),v(this,"_toGtagOptions",(function(e){if(e){var t={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"};return Object.entries(e).reduce((function(e,n){var r=f(n,2),i=r[0],s=r[1];return t[i]?e[t[i]]=s:e[i]=s,e}),{})}})),v(this,"initialize",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Require GA_MEASUREMENT_ID");var r="string"===typeof e?[{trackingId:e}]:e;t._currentMeasurementId=r[0].trackingId;var i=n.gaOptions,s=n.gtagOptions,a=n.nonce,o=n.testMode,l=void 0!==o&&o,u=n.gtagUrl;if(t._testMode=l,l||t._loadGA(t._currentMeasurementId,a,u),t.isInitialized||(t._gtag("js",new Date),r.forEach((function(e){var n=h(h(h({},t._toGtagOptions(h(h({},i),e.gaOptions))),s),e.gtagOptions);Object.keys(n).length?t._gtag("config",e.trackingId,n):t._gtag("config",e.trackingId)}))),t.isInitialized=!0,!l){var c=p(t._queueGtag);for(t._queueGtag=[],t._isQueuing=!1;c.length;){var d=c.shift();t._gtag.apply(t,p(d)),"get"===d[0]&&(t._isQueuing=!0)}}})),v(this,"set",(function(e){e?"object"===c(e)?(0===Object.keys(e).length&&console.warn("empty `fieldsObject` given to .set()"),t._gaCommand("set",e)):console.warn("Expected `fieldsObject` arg to be an Object"):console.warn("`fieldsObject` is required in .set()")})),v(this,"_gaCommandSendEvent",(function(e,n,r,i,s){t._gtag("event",n,h(h({event_category:e,event_label:r,value:i},s&&{non_interaction:s.nonInteraction}),t._toGtagOptions(s)))})),v(this,"_gaCommandSendEventParameters",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("string"===typeof n[0])t._gaCommandSendEvent.apply(t,p(n.slice(1)));else{var i=n[0],a=i.eventCategory,o=i.eventAction,l=i.eventLabel,c=i.eventValue,d=(i.hitType,u(i,s));t._gaCommandSendEvent(a,o,l,c,d)}})),v(this,"_gaCommandSendTiming",(function(e,n,r,i){t._gtag("event","timing_complete",{name:n,value:r,event_category:e,event_label:i})})),v(this,"_gaCommandSendPageview",(function(e,n){if(n&&Object.keys(n).length){var r=t._toGtagOptions(n),i=r.title,s=r.location,o=u(r,a);t._gtag("event","page_view",h(h(h(h({},e&&{page_path:e}),i&&{page_title:i}),s&&{page_location:s}),o))}else e?t._gtag("event","page_view",{page_path:e}):t._gtag("event","page_view")})),v(this,"_gaCommandSendPageviewParameters",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("string"===typeof n[0])t._gaCommandSendPageview.apply(t,p(n.slice(1)));else{var i=n[0],s=i.page,a=(i.hitType,u(i,o));t._gaCommandSendPageview(s,a)}})),v(this,"_gaCommandSend",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i="string"===typeof n[0]?n[0]:n[0].hitType;switch(i){case"event":t._gaCommandSendEventParameters.apply(t,n);break;case"pageview":t._gaCommandSendPageviewParameters.apply(t,n);break;case"timing":t._gaCommandSendTiming.apply(t,p(n.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(i));break;default:console.warn("Send command doesn't exist: ".concat(i))}})),v(this,"_gaCommandSet",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];"string"===typeof n[0]&&(n[0]=v({},n[0],n[1])),t._gtag("set",t._toGtagOptions(n[0]))})),v(this,"_gaCommand",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];switch(e){case"send":t._gaCommandSend.apply(t,r);break;case"set":t._gaCommandSet.apply(t,r);break;default:console.warn("Command doesn't exist: ".concat(e))}})),v(this,"ga",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("string"===typeof n[0])t._gaCommand.apply(t,n);else{var i=n[0];t._gtag("get",t._currentMeasurementId,"client_id",(function(e){t._isQueuing=!1;var n=t._queueGtag;for(i({get:function(n){return"clientId"===n?e:"trackingId"===n?t._currentMeasurementId:"apiVersion"===n?"1":void 0}});n.length;){var r=n.shift();t._gtag.apply(t,p(r))}})),t._isQueuing=!0}return t.ga})),v(this,"event",(function(e,n){if("string"===typeof e)t._gtag("event",e,t._toGtagOptions(n));else{var r=e.action,s=e.category,a=e.label,o=e.value,l=e.nonInteraction,u=e.transport;if(!s||!r)return void console.warn("args.category AND args.action are required in event()");var c={hitType:"event",eventCategory:(0,i.default)(s),eventAction:(0,i.default)(r)};a&&(c.eventLabel=(0,i.default)(a)),"undefined"!==typeof o&&("number"!==typeof o?console.warn("Expected `args.value` arg to be a Number."):c.eventValue=o),"undefined"!==typeof l&&("boolean"!==typeof l?console.warn("`args.nonInteraction` must be a boolean."):c.nonInteraction=l),"undefined"!==typeof u&&("string"!==typeof u?console.warn("`args.transport` must be a string."):(-1===["beacon","xhr","image"].indexOf(u)&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),c.transport=u)),t._gaCommand("send",c)}})),v(this,"send",(function(e){t._gaCommand("send",e)})),this.reset()}var t,n,l;return t=e,n=[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}],n&&y(t.prototype,n),l&&y(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.GA4=w;var S=new w;t.default=S},5189:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;"undefined"!==typeof window&&("undefined"===typeof window.gtag&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(r=window).gtag.apply(r,t))};t.default=n},1092:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.Ay=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(5068));function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}i.GA4;var a=i.default;t.Ay=a},8330:(e,t,n)=>{var r,i;n.d(t,{Kd:()=>h,N_:()=>g});var s=n(8878),a=n(8815),o=n(3229),l=n(1642);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const p=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(b){}new Map;const d=(r||(r=n.t(s,2))).startTransition;(i||(i=n.t(a,2))).flushSync,(r||(r=n.t(s,2))).useId;function h(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();null==a.current&&(a.current=(0,l.zR)({window:i,v5Compat:!0}));let u=a.current,[c,p]=s.useState({action:u.action,location:u.location}),{v7_startTransition:h}=r||{},f=s.useCallback((e=>{h&&d?d((()=>p(e))):p(e)}),[p,h]);return s.useLayoutEffect((()=>u.listen(f)),[u,f]),s.createElement(o.Ix,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:u,future:r})}const f="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,m=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g=s.forwardRef((function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:d,state:h,target:g,to:y,preventScrollReset:v,unstable_viewTransition:w}=e,S=c(e,p),{basename:x}=s.useContext(o.jb),k=!1;if("string"===typeof y&&m.test(y)&&(n=y,f))try{let e=new URL(window.location.href),t=y.startsWith("//")?new URL(e.protocol+y):new URL(y),n=(0,l.pb)(t.pathname,x);t.origin===e.origin&&null!=n?y=n+t.search+t.hash:k=!0}catch(b){}let _=(0,o.$P)(y,{relative:i}),I=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:u,unstable_viewTransition:c}=void 0===t?{}:t,p=(0,o.Zp)(),d=(0,o.zy)(),h=(0,o.x$)(e,{relative:u});return s.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:(0,l.AO)(d)===(0,l.AO)(h);p(e,{replace:n,state:i,preventScrollReset:a,relative:u,unstable_viewTransition:c})}}),[d,p,h,r,i,n,e,a,u,c])}(y,{replace:d,state:h,target:g,preventScrollReset:v,relative:i,unstable_viewTransition:w});return s.createElement("a",u({},S,{href:n||_,onClick:k||a?r:function(e){r&&r(e),e.defaultPrevented||I(e)},ref:t,target:g}))}));var y,v;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(y||(y={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(v||(v={}))},3229:(e,t,n)=>{var r;n.d(t,{$P:()=>h,BV:()=>N,C5:()=>L,Ix:()=>T,Zp:()=>y,jb:()=>u,qh:()=>R,x$:()=>v,zy:()=>m});var i=n(8878),s=n(1642);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const o=i.createContext(null);const l=i.createContext(null);const u=i.createContext(null);const c=i.createContext(null);const p=i.createContext({outlet:null,matches:[],isDataRoute:!1});const d=i.createContext(null);function h(e,t){let{relative:n}=void 0===t?{}:t;f()||(0,s.Oi)(!1);let{basename:r,navigator:a}=i.useContext(u),{hash:o,pathname:l,search:c}=v(e,{relative:n}),p=l;return"/"!==r&&(p="/"===l?r:(0,s.HS)([r,l])),a.createHref({pathname:p,search:c,hash:o})}function f(){return null!=i.useContext(c)}function m(){return f()||(0,s.Oi)(!1),i.useContext(c).location}function g(e){i.useContext(u).static||i.useLayoutEffect(e)}function y(){let{isDataRoute:e}=i.useContext(p);return e?function(){let{router:e}=A(I.UseNavigateStable),t=O(C.UseNavigateStable),n=i.useRef(!1);g((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,a({fromRouteId:t},i)))}),[e,t]);return r}():function(){f()||(0,s.Oi)(!1);let e=i.useContext(o),{basename:t,future:n,navigator:r}=i.useContext(u),{matches:a}=i.useContext(p),{pathname:l}=m(),c=JSON.stringify((0,s.yD)(a,n.v7_relativeSplatPath)),d=i.useRef(!1);g((()=>{d.current=!0}));let h=i.useCallback((function(n,i){if(void 0===i&&(i={}),!d.current)return;if("number"===typeof n)return void r.go(n);let a=(0,s.Gh)(n,JSON.parse(c),l,"path"===i.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:(0,s.HS)([t,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)}),[t,r,c,l,e]);return h}()}function v(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(u),{matches:a}=i.useContext(p),{pathname:o}=m(),l=JSON.stringify((0,s.yD)(a,r.v7_relativeSplatPath));return i.useMemo((()=>(0,s.Gh)(e,JSON.parse(l),o,"path"===n)),[e,l,o,n])}function b(e,t,n,r){f()||(0,s.Oi)(!1);let{navigator:o}=i.useContext(u),{matches:l}=i.useContext(p),d=l[l.length-1],h=d?d.params:{},g=(d&&d.pathname,d?d.pathnameBase:"/");d&&d.route;let y,v=m();if(t){var b;let e="string"===typeof t?(0,s.Rr)(t):t;"/"===g||(null==(b=e.pathname)?void 0:b.startsWith(g))||(0,s.Oi)(!1),y=e}else y=v;let w=y.pathname||"/",S=w;if("/"!==g){let e=g.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=(0,s.ue)(e,{pathname:S});let k=_(x&&x.map((e=>Object.assign({},e,{params:Object.assign({},h,e.params),pathname:(0,s.HS)([g,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:(0,s.HS)([g,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,n,r);return t&&k?i.createElement(c.Provider,{value:{location:a({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:s.rc.Pop}},k):k}function w(){let e=function(){var e;let t=i.useContext(d),n=E(C.UseRouteError),r=O(C.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,s.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const S=i.createElement(w,null);class x extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(p.Provider,{value:this.props.routeContext},i.createElement(d.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function k(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(o);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(p.Provider,{value:t},r)}function _(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,u=null==(a=n)?void 0:a.errors;if(null!=u){let e=l.findIndex((e=>e.route.id&&void 0!==(null==u?void 0:u[e.route.id])));e>=0||(0,s.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let c=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<l.length;i++){let e=l[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(p=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,l=p>=0?l.slice(0,p+1):[l[0]];break}}}return l.reduceRight(((e,r,s)=>{let a,o=!1,d=null,h=null;var f;n&&(a=u&&r.route.id?u[r.route.id]:void 0,d=r.route.errorElement||S,c&&(p<0&&0===s?(f="route-fallback",!1||P[f]||(P[f]=!0),o=!0,h=null):p===s&&(o=!0,h=r.route.hydrateFallbackElement||null)));let m=t.concat(l.slice(0,s+1)),g=()=>{let t;return t=a?d:o?h:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(k,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(x,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var I=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(I||{}),C=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(C||{});function A(e){let t=i.useContext(o);return t||(0,s.Oi)(!1),t}function E(e){let t=i.useContext(l);return t||(0,s.Oi)(!1),t}function O(e){let t=function(){let e=i.useContext(p);return e||(0,s.Oi)(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||(0,s.Oi)(!1),n.route.id}const P={};(r||(r=n.t(i,2))).startTransition;function L(e){let{to:t,replace:n,state:r,relative:a}=e;f()||(0,s.Oi)(!1);let{future:o,static:l}=i.useContext(u),{matches:c}=i.useContext(p),{pathname:d}=m(),h=y(),g=(0,s.Gh)(t,(0,s.yD)(c,o.v7_relativeSplatPath),d,"path"===a),v=JSON.stringify(g);return i.useEffect((()=>h(JSON.parse(v),{replace:n,state:r,relative:a})),[h,v,a,n,r]),null}function R(e){(0,s.Oi)(!1)}function T(e){let{basename:t="/",children:n=null,location:r,navigationType:o=s.rc.Pop,navigator:l,static:p=!1,future:d}=e;f()&&(0,s.Oi)(!1);let h=t.replace(/^\/*/,"/"),m=i.useMemo((()=>({basename:h,navigator:l,static:p,future:a({v7_relativeSplatPath:!1},d)})),[h,d,l,p]);"string"===typeof r&&(r=(0,s.Rr)(r));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:w="default"}=r,S=i.useMemo((()=>{let e=(0,s.pb)(g,h);return null==e?null:{location:{pathname:e,search:y,hash:v,state:b,key:w},navigationType:o}}),[h,g,y,v,b,w,o]);return null==S?null:i.createElement(u.Provider,{value:m},i.createElement(c.Provider,{children:n,value:S}))}function N(e){let{children:t,location:n}=e;return b(F(t),n)}new Promise((()=>{}));i.Component;function F(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let a=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,F(e.props.children,a));e.type!==R&&(0,s.Oi)(!1),e.props.index&&e.props.children&&(0,s.Oi)(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=F(e.props.children,a)),n.push(o)})),n}},1406:(e,t,n)=>{var r=n(8878),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},33:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var S=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+E(l,0):s,S(a)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),O(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",S(e))for(var u=0;u<e.length;u++){var c=s+E(o=e[u],u);l+=O(o,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=O(o=o.value,t,i,c=s+E(o,u++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return O(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function L(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},T={transition:null},N={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:T,ReactCurrentOwner:k};function F(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=F,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)x.call(t,u)&&!_.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=F,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},8878:(e,t,n)=>{e.exports=n(33)},782:(e,t,n)=>{e.exports=n(1406)},9169:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],p=1,d=null,h=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function S(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,T(x);else{var t=r(c);null!==t&&N(S,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,v(C),C=-1),f=!0;var s=h;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!O());){var a=d.callback;if("function"===typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(u)&&i(u),w(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var p=r(c);null!==p&&N(S,p.startTime-n),l=!1}return l}finally{d=null,h=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,_=!1,I=null,C=-1,A=5,E=-1;function O(){return!(t.unstable_now()-E<A)}function P(){if(null!==I){var e=t.unstable_now();E=e;var n=!0;try{n=I(!0,e)}finally{n?k():(_=!1,I=null)}}else _=!1}if("function"===typeof b)k=function(){b(P)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,R=L.port2;L.port1.onmessage=P,k=function(){R.postMessage(null)}}else k=function(){y(P,0)};function T(e){I=e,_||(_=!0,k())}function N(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,T(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:p++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(C),C=-1):g=!0,N(S,s-a))):(e.sortIndex=o,n(u,e),m||f||(m=!0,T(x))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},7116:(e,t,n)=>{e.exports=n(9169)},5384:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.errorMessages=t.ErrorType=void 0,function(e){e.MalformedUnicode="MALFORMED_UNICODE",e.MalformedHexadecimal="MALFORMED_HEXADECIMAL",e.CodePointLimit="CODE_POINT_LIMIT",e.OctalDeprecation="OCTAL_DEPRECATION",e.EndOfString="END_OF_STRING"}(n=t.ErrorType||(t.ErrorType={})),t.errorMessages=new Map([[n.MalformedUnicode,"malformed Unicode character escape sequence"],[n.MalformedHexadecimal,"malformed hexadecimal character escape sequence"],[n.CodePointLimit,"Unicode codepoint must not be greater than 0x10FFFF in escape sequence"],[n.OctalDeprecation,'"0"-prefixed octal literals and octal escape sequences are deprecated; for octal literals use the "0o" prefix instead'],[n.EndOfString,"malformed escape sequence at end of string"]])},2527:(e,t,n)=>{t.MH=void 0;const r=n(5384);function i(e,t,n){const i=function(e){return e.match(/[^a-f0-9]/i)?NaN:parseInt(e,16)}(e);if(Number.isNaN(i)||void 0!==n&&n!==e.length)throw new SyntaxError(r.errorMessages.get(t));return i}function s(e,t){const n=i(e,r.ErrorType.MalformedUnicode,4);if(void 0!==t){const e=i(t,r.ErrorType.MalformedUnicode,4);return String.fromCharCode(n,e)}return String.fromCharCode(n)}const a=new Map([["b","\b"],["f","\f"],["n","\n"],["r","\r"],["t","\t"],["v","\v"],["0","\0"]]);const o=/\\(?:(\\)|x([\s\S]{0,2})|u(\{[^}]*\}?)|u([\s\S]{4})\\u([^{][\s\S]{0,3})|u([\s\S]{0,4})|([0-3]?[0-7]{1,2})|([\s\S])|$)/g;function l(e,t=!1){return e.replace(o,(function(e,n,o,l,u,c,p,d,h){if(void 0!==n)return"\\";if(void 0!==o)return function(e){const t=i(e,r.ErrorType.MalformedHexadecimal,2);return String.fromCharCode(t)}(o);if(void 0!==l)return function(e){if("{"!==(t=e).charAt(0)||"}"!==t.charAt(t.length-1))throw new SyntaxError(r.errorMessages.get(r.ErrorType.MalformedUnicode));var t;const n=i(e.slice(1,-1),r.ErrorType.MalformedUnicode);try{return String.fromCodePoint(n)}catch(s){throw s instanceof RangeError?new SyntaxError(r.errorMessages.get(r.ErrorType.CodePointLimit)):s}}(l);if(void 0!==u)return s(u,c);if(void 0!==p)return s(p);if("0"===d)return"\0";if(void 0!==d)return function(e,t=!1){if(t)throw new SyntaxError(r.errorMessages.get(r.ErrorType.OctalDeprecation));const n=parseInt(e,8);return String.fromCharCode(n)}(d,!t);if(void 0!==h)return f=h,a.get(f)||f;var f;throw new SyntaxError(r.errorMessages.get(r.ErrorType.EndOfString))}))}t.MH=l},7365:(e,t,n)=>{n.d(t,{U:()=>a,_:()=>o});var r=n(5874),i=n(7589);function s(e,t){const n=[];for(let r=0;r<Math.min(e.length,t.length);r++){const i=e[r]??[],s=t[r]??[];for(let e=0;e<Math.max(i.length,s.length);e++){const t=i[e]??"",a=s[e]??"";null===t?.trim().match(/^\*+$/)&&a!==t&&n.push({row:r,col:e,expected:t,given:a})}}return n}function a(e,t){const n=i.dl.parse(e),a=i.dl.parse(t);if((0,r.ys)(n)||(0,r.ys)(a))return!1;return 0==s((0,r.Ok)(n),(0,r.Ok)(a)).length}function o(e,t){const n=i.dl.parse(e),a=i.dl.parse(t);if((0,r.ys)(n)||(0,r.ys)(a))return{text:"",failureNum:0,decorations:[],lineNumbers:[]};const o=(0,r.Ok)(n),u=s(o,(0,r.Ok)(a)),c=new Array(o.length);for(const r of u){const e=c[r.row];e?e.push(r):c[r.row]=[r]}const p=t.split("\n"),d=new Array(o.length);for(let r=0;r<c.length;r++)c[r]&&(d[r]=l(p[r],c[r]));const h=[];let f=0;const m=[],g=[];for(let r=0;r<p.length;r++){const e=d[r];g.push((r+1).toString()),e?(g.push(""),h.push(e.givenLine),m.push({span:{start:f,end:f+e.givenLine.length,line:h.length},type:"error-line"}),m.push(...e.incorrectCellSpans.map((e=>({span:{start:e.start+f,end:e.end+f,line:e.line},type:"error-cell"})))),f+=e.expectedLine.length+1,h.push(e.expectedLine),m.push({span:{start:f,end:f+e.expectedLine.length,line:r},type:"correct-line"}),m.push(...e.correctCellSpans.map((e=>({span:{start:e.start+f,end:e.end+f,line:h.length},type:"correct-cell"})))),f+=e.givenLine.length+1):(h.push(p[r]),f+=p[r].length+1)}let y=h.join("\n");return y.endsWith("\n")&&(y=y.substring(0,y.length-1)),{text:y,failureNum:u.length,decorations:m,lineNumbers:g}}function l(e,t){const n=e.split("|").filter((e=>""!=e)),r=Array.from(n),i=[];let s=0;for(let l=0;l<n.length;l++)i.push(s+1),s+=n[l].length+1;const a=[],o=[];for(const l of t){n[l.col]=l.expected,r[l.col]=l.given;const e={start:i[l.col],end:i[l.col]+l.expected.length,line:0};a.push(e),o.push(e)}return{expectedLine:`|${n.join("|")}|`,givenLine:`|${r.join("|")}|`,correctCellSpans:a,incorrectCellSpans:o}}},172:(e,t,n)=>{n.d(t,{s:()=>i});var r=n(8878);function i(){const[e,t]=(0,r.useState)(!1);return{isOpen:e,open(){t(!0)},close(){t(!1)}}}},1296:(e,t,n)=>{n.d(t,{Sn:()=>a,g9:()=>i,w9:()=>s});var r=n(5874);async function i(e,t){try{const i=await e.readFile(t);let s;try{const n=t.replace("VME.tst",".tst").replace(".tst",".cmp");s=await e.readFile(n)}catch(n){}return(0,r.Ok)({tst:i,cmp:s})}catch(n){return(0,r._)(n)}}function s(e){return e.sort(((e,t)=>{const n=/^\d+/.test(e.name),r=/^\d+/.test(t.name);return n&&!r?-1:!n&&r?1:n&&r?parseInt(e.name,10)-parseInt(t.name,10):e.name.localeCompare(t.name)}))}async function a(e,t,n="/",r,i=!1){const s="/"==n?"":n,o=r(s),l=await e.scandir(n);t.mkdir(o);const u=new Set((await t.scandir(o)).map((e=>e.name)));for(const c of l)c.isFile()?!i&&u.has(c.name)||await t.writeFile(`${o}/${c.name}`,await e.readFile(`${s}/${c.name}`)):await a(e,t,`${s}/${c.name}`,r,i)}},7490:(e,t,n)=>{n.d(t,{vl:()=>h,ZB:()=>c,wG:()=>g,FX:()=>d});var r=n(782),i=n(742),s=n(8878),a=n(2469),o=n(6980);class l{signBehaviors=new Map;constructor(e,t){if(o.Mo.has(e)){const n=(0,a.Z1)(o.Mo.get(e)?.()),r=[...n.ins.entries(),...n.outs.entries()];for(const e of r)this.signBehaviors.set(e.name,!t||!t.includes(e.name))}}isSigned(e){return this.signBehaviors.get(e)}}const u=new Map([["Mux4Way16",["sel"]],["Mux8Way16",["sel"]],["DMux4Way",["sel"]],["DMux8Way",["sel"]],["RAM8",["address"]],["RAM64",["address"]],["RAM512",["address"]],["RAM4K",["address"]],["RAM16K",["address"]],["Screen",["address"]],["Memory",["address"]],["CPU",["addressM","pc"]]]),c=(0,s.createContext)({});function p(e){return{pin:e,bits:(0,i.y)(0,e.width).map((t=>[t,e.voltage(t)])).reverse()}}function d(e){return[...e.entries()].map(p)}const h=e=>{const{inPins:t,outPins:n,internalPins:i}=e.sim,s=(a=e.sim.chip[0].name??"",new l(a,u.get(a)));var a;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:"\n        table.pinout th {\n          font-weight: bold;\n        }\n\n        table.pinout tbody td:first-child {\n          text-align: right;\n          --font-size: 1rem;\n          width: 0;\n          white-space: nowrap;\n          border-right: var(--border-width) solid var(--table-border-color);\n        }\n\n        table.pinout tbody button {\n          --font-size: 0.875em;\n          font-family: var(--font-family-monospace);\n          max-width: 2em;\n        }\n        "}),(0,r.jsx)("table",{className:"pinout",children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)(f,{pins:t,header:"Input pins",toggle:e.toggle,setInputValid:e.setInputValid,displayInfo:s}),(0,r.jsx)(f,{pins:n,header:"Output pins",disabled:e.sim.pending,enableEdit:!1,displayInfo:s}),!e.hideInternal&&(0,r.jsx)(f,{pins:i,header:"Internal pins",disabled:e.sim.pending,enableEdit:!1,displayInfo:s})]})})]})},f=e=>(0,r.jsxs)(r.Fragment,{children:[e.pins.length>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("th",{colSpan:2,children:e.header})}),[...e.pins].map((t=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t.pin.name}),(0,r.jsx)("td",{children:(0,r.jsx)(m,{pin:t,toggle:e.toggle,disabled:e.disabled,enableEdit:e.enableEdit,signed:e.displayInfo.isSigned(t.pin.name),setInputValid:e.setInputValid,internal:"Internal pins"===e.header})})]},t.pin.name)))]}),m=({pin:e,toggle:t,disabled:n=!1,enableEdit:i=!0,signed:a=!0,setInputValid:o,internal:l=!1})=>{const[u,p]=(0,s.useState)(!0);let d=!0;const[h,f]=(0,s.useState)(""),m=(0,s.useContext)(c);m instanceof g&&m.registerCallback((()=>{p(!0)}));const y=e=>{d=e,o?.(e)},v=n=>{for(let r=0;r<e.bits.length;r++)e.bits[e.bits.length-r-1][1]!==(n>>r&1)&&t?.(e.pin,r)};return(0,s.useEffect)((()=>{if(!u&&d){let t=0;if(a&&e.bits[0][1]){for(const[n,r]of e.bits)n<e.bits.length-1&&!r&&(t+=2**n);t=-t-1}else{const n=a?e.bits.length-1:e.bits.length;for(const[r,i]of e.bits)r<n&&i&&(t+=2**r)}f(t.toString())}}),[e,u]),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,r.jsx)("fieldset",{role:"group",style:{width:`${e.bits.length}rem`},children:u?e.bits.map((([i,s])=>(0,r.jsx)("button",{disabled:n,style:l?{backgroundColor:"grey"}:{},onClick:()=>t?.(e.pin,i),"data-testid":`pin-${i}`,children:s},i))):(0,r.jsx)("input",{className:"colored",value:h,onChange:t=>{(t=>{const n=t.replace(/[^\d]/g,""),r=a&&"-"===t[0]?`-${n}`:n;if(f(r),isNaN(parseInt(r)))y(!1);else{const t=parseInt(r);!a&&t>=Math.pow(2,e.bits.length)||a&&(t>=Math.pow(2,e.bits.length-1)||t<-Math.pow(2,e.bits.length-1))?y(!1):(v(t),y(!0))}})(t.target.value)},disabled:!i})}),e.bits.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{width:"1em"}}),(0,r.jsx)("button",{className:"pin-control",onClick:()=>{p(!u)},children:u?"dec":"bin"})]})]})};class g{callbacks=[];registerCallback(e){this.callbacks.push(e)}reset(){for(const e of this.callbacks)e()}}},9646:(e,t,n)=>{n.d(t,{A:()=>q,b:()=>K});var r=Symbol.for("immer-nothing"),i=Symbol.for("immer-draftable"),s=Symbol.for("immer-state");function a(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var o=Object.getPrototypeOf;function l(e){return!!e&&!!e[s]}function u(e){return!!e&&(p(e)||Array.isArray(e)||!!e[i]||!!e.constructor?.[i]||g(e)||y(e))}var c=Object.prototype.constructor.toString();function p(e){if(!e||"object"!==typeof e)return!1;const t=o(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===c}function d(e,t){0===h(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function h(e){const t=e[s];return t?t.type_:Array.isArray(e)?1:g(e)?2:y(e)?3:0}function f(e,t){return 2===h(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function m(e,t,n){const r=h(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function g(e){return e instanceof Map}function y(e){return e instanceof Set}function v(e){return e.copy_||e.base_}function b(e,t){if(g(e))return new Map(e);if(y(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=p(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[s];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(o(e),t)}{const t=o(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function w(e,t=!1){return x(e)||l(e)||!u(e)||(h(e)>1&&(e.set=e.add=e.clear=e.delete=S),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>w(t,!0)))),e}function S(){a(2)}function x(e){return Object.isFrozen(e)}var k,_={};function I(e){const t=_[e];return t||a(0),t}function C(){return k}function A(e,t){t&&(I("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function E(e){O(e),e.drafts_.forEach(L),e.drafts_=null}function O(e){e===k&&(k=e.parent_)}function P(e){return k={drafts_:[],parent_:k,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function L(e){const t=e[s];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function R(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[s].modified_&&(E(t),a(4)),u(e)&&(e=T(t,e),t.parent_||F(t,e)),t.patches_&&I("Patches").generateReplacementPatches_(n[s].base_,e,t.patches_,t.inversePatches_)):e=T(t,n,[]),E(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==r?e:void 0}function T(e,t,n){if(x(t))return t;const r=t[s];if(!r)return d(t,((i,s)=>N(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return F(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),d(i,((i,a)=>N(e,r,t,i,a,n,s))),F(e,t,!1),n&&e.patches_&&I("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function N(e,t,n,r,i,s,a){if(l(i)){const a=T(e,i,s&&t&&3!==t.type_&&!f(t.assigned_,r)?s.concat(r):void 0);if(m(n,r,a),!l(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(u(i)&&!x(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;T(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||F(e,i)}}function F(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&w(t,n)}var M={get(e,t){if(t===s)return e;const n=v(e);if(!f(n,t))return function(e,t,n){const r=$(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!u(r)?r:r===D(e.base_,t)?(V(e),e.copy_[t]=U(r,e)):r},has:(e,t)=>t in v(e),ownKeys:e=>Reflect.ownKeys(v(e)),set(e,t,n){const r=$(v(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=D(v(e),t),o=r?.[s];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((i=n)===(a=r)?0!==i||1/i===1/a:i!==i&&a!==a)&&(void 0!==n||f(e.base_,t)))return!0;V(e),z(e)}var i,a;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==D(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,V(e),z(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=v(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){a(11)},getPrototypeOf:e=>o(e.base_),setPrototypeOf(){a(12)}},j={};function D(e,t){const n=e[s];return(n?v(n):e)[t]}function $(e,t){if(!(t in e))return;let n=o(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=o(n)}}function z(e){e.modified_||(e.modified_=!0,e.parent_&&z(e.parent_))}function V(e){e.copy_||(e.copy_=b(e.base_,e.scope_.immer_.useStrictShallowCopy_))}d(M,((e,t)=>{j[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),j.deleteProperty=function(e,t){return j.set.call(this,e,t,void 0)},j.set=function(e,t,n){return M.set.call(this,e[0],t,n,e[0])};function U(e,t){const n=g(e)?I("MapSet").proxyMap_(e,t):y(e)?I("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:C(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=M;n&&(i=[r],s=j);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}(e,t);return(t?t.scope_:C()).drafts_.push(n),n}function B(e){if(!u(e)||x(e))return e;const t=e[s];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=b(e,t.scope_.immer_.useStrictShallowCopy_)}else n=b(e,!0);return d(n,((e,t)=>{m(n,e,B(t))})),t&&(t.finalized_=!1),n}var W=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(e=n,...i){return r.produce(e,(e=>t.call(this,e,...i)))}}let i;if("function"!==typeof t&&a(6),void 0!==n&&"function"!==typeof n&&a(7),u(e)){const r=P(this),s=U(e,void 0);let a=!0;try{i=t(s),a=!1}finally{a?E(r):O(r)}return A(r,n),R(i,r)}if(!e||"object"!==typeof e){if(i=t(e),void 0===i&&(i=e),i===r&&(i=void 0),this.autoFreeze_&&w(i,!0),n){const t=[],r=[];I("Patches").generateReplacementPatches_(e,i,t,r),n(t,r)}return i}a(1)},this.produceWithPatches=(e,t)=>{if("function"===typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;return[this.produce(e,t,((e,t)=>{n=e,r=t})),n,r]},"boolean"===typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){u(e)||a(8),l(e)&&(e=function(e){l(e)||a(10);return B(e)}(e));const t=P(this),n=U(e,void 0);return n[s].isManual_=!0,O(t),n}finishDraft(e,t){const n=e&&e[s];n&&n.isManual_||a(9);const{scope_:r}=n;return A(r,t),R(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=I("Patches").applyPatches_;return l(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},H=W.produce;W.produceWithPatches.bind(W),W.setAutoFreeze.bind(W),W.setUseStrictShallowCopy.bind(W),W.applyPatches.bind(W),W.createDraft.bind(W),W.finishDraft.bind(W);var G=n(8878);function q(e,t){return(0,G.useReducer)(((t,n)=>H(t,(t=>{e[n.action](t,n.payload)}))),t)}function K(e){const[t,n]=(0,G.useState)(e);return(0,G.useEffect)((()=>{n(e)}),[e]),[t,n]}},910:(e,t,n)=>{n.d(t,{L:()=>y,A:()=>g});var r=n(4544),i=n(8878),s=n(172),a=n(1296),o=n(1916),l=n(2469);const u="NAND2TetrisIndexedDB",c=1,p="FileSystemAccess",d="Handler";function h(){return new Promise(((e,t)=>{const n=window.indexedDB.open(u,c);n.onsuccess=()=>{e(n.result)},n.onerror=()=>{t(n.error)},n.onupgradeneeded=e=>{n.result.createObjectStore(p)}}))}async function f(){const e=await h();return new Promise(((t,n)=>{const r=e.transaction([p],"readonly"),i=r.objectStore(p).get(d);i.onsuccess=()=>{const e=i.result;void 0===e?t():((0,l.vA)(e instanceof FileSystemDirectoryHandle,`Retrieved ${d} in ${p} in ${u} is not a FileSystemDirectoryHandle`),t(e))},r.onerror=()=>{console.error("Error in loading FileSystemDirectoryHandle transaction",{err:r.error}),n(r.error)},i.onerror=()=>{console.error("Error in FileSystemDirectoryHandle handleRequest",{err:i.error}),n(i.error)}}))}async function m(){const e=(await h()).transaction([p],"readwrite");return e.objectStore(p).delete(d),new Promise(((t,n)=>{e.oncomplete=()=>{t()},e.onerror=()=>{n(e.error)}}))}function g(){const e=(0,i.useMemo)((()=>new r.JU),[]),[t,l]=(0,i.useState)(new r.Q2(e)),[u,c]=(0,i.useState)(),g=(0,s.s)(),y=(0,i.useCallback)((async(e,i=!1)=>{const s=new r.Q2(new o.Ik(e));if(i)if(u){const e=await Promise.resolve().then(n.bind(n,5777));await e.createFiles(s)}else await(0,a.Sn)(t,s,"/projects",(e=>e.replace("/projects","/").replace(/\/0*(\d+)/,"$1")));l(s),c(e.name)}),[c,l]);(0,i.useEffect)((()=>{u||"showDirectoryPicker"in window&&f().then((async e=>{if(!e)return;switch(await e.queryPermission({mode:"readwrite"})){case"granted":y(e);break;case"prompt":g.open();break;case"denied":x("Permission denied. Please allow access to your file system.")}}))}),[u,y]);const v="showDirectoryPicker"in window,b=(0,i.useCallback)((async(e=!1,t=!1)=>{if(!v||u&&!e)return;const n=await(0,o.EH)();u&&await m();const r=await async function(e){const t=(await h()).transaction([p],"readwrite");return t.objectStore(p).add(e,d),t.commit(),new Promise(((n,r)=>{t.oncomplete=()=>{n(e)},t.onerror=()=>{r(t.error)}}))}(n);await y(r,t)}),[u,y]),w=(0,i.useCallback)((async()=>{u&&(await m(),c(void 0),l(new r.Q2(e)))}),[u]),[S,x]=(0,i.useState)("");return{fs:t,localFsRoot:u,status:S,setStatus:x,storage:localStorage,canUpgradeFs:v,permissionPrompt:g,upgradeFs:b,requestPermission:async()=>{f().then((async e=>{e&&await e.requestPermission({mode:"readwrite"})}))},closeFs:w,loadFs:()=>{f().then((async e=>{e&&y(e)}))}}}const y=(0,i.createContext)({fs:new r.Q2(new r.JU),canUpgradeFs:!1,async upgradeFs(){},closeFs(){},status:"",setStatus(){},storage:{},permissionPrompt:{},async requestPermission(){},loadFs(){}})},1916:(e,t,n)=>{n.d(t,{EH:()=>s,Ik:()=>a});var r=n(4544);function i(e){return e.split(r.d$).slice(0,-1).join(r.d$)}function s(){return window.showDirectoryPicker({id:"nand2tetris",mode:"readwrite",startIn:"documents"})}class a{baseDir;constructor(e){this.baseDir=e}async getFolder(e,t=!1){let n=this.baseDir;const i=e.split(r.d$).slice(1).filter((e=>""!=e.trim()));for(const r of i)n=await n.getDirectoryHandle(r,{create:t});return n}async copyFile(e,t){throw new Error("unimplemented: FileSystemAccessFileSystemAdapter::copyFile")}async mkdir(e){this.getFolder(e,!0)}async readFile(e){const t=await this.getFolder(i(e));return(await(await t.getFileHandle((0,r.P8)(e))).getFile()).text()}async writeFile(e,t){const n=await this.getFolder(i(e),!0),s=await(await n.getFileHandle((0,r.P8)(e),{create:!0})).createWritable();await s.write(t),await s.close()}async readdir(e){const t=await this.getFolder(e),n=[];for await(const[r,i]of t.entries())n.push(r);return n}async scandir(e){const t=await this.getFolder(e),n=[];for await(const[r,i]of t.entries())n.push({name:r,isDirectory:()=>"directory"==i.kind,isFile:()=>"file"==i.kind});return n}async stat(e){const t=await this.getFolder(i(e));for await(const[n,i]of t.entries())if(n==(0,r.P8)(e))return{name:n,isDirectory:()=>"directory"==i.kind,isFile:()=>"file"==i.kind};return{name:(0,r.P8)(e),isDirectory:()=>!1,isFile:()=>!1}}async rm(e){const t=await this.getFolder(i(e),!0);await t.removeEntry((0,r.P8)(e),{recursive:!0})}}},3180:(e,t,n)=>{n.d(t,{C1:()=>k,XC:()=>b});var r=n(4641),i=n(5874),s=n(8463),a=n(7738),o=n(9651),l=n(3096),u=n(1106),c=n(8878),p=n(7490),d=n(9646),h=n(2469),f=n(6980),m=n(6554),g=n(7365),y=n(1296),v=n(910);const b="noScreen",w={CPU:["CPU","CPU-external"],Computer:["ComputerAdd","ComputerMax","ComputerRect"]};function S(e,t=!1,n=!1){return{clocked:e.clocked,inPins:(0,p.FX)(e.ins),outPins:(0,p.FX)(e.outs),internalPins:(0,p.FX)(e.pins),chip:[e],pending:t,invalid:n}}const x=l.z.get();function k(){const{fs:e,setStatus:t,storage:n,localFsRoot:p}=(0,c.useContext)(v.L),b=(0,c.useRef)((()=>{})),{initialState:k,reducers:_,actions:I}=(0,c.useMemo)((()=>function(e,t,n,c,p){let d="",v="",b=new o.ti,k="",_=[],I=new u.BX,C=!1,A=!1;const E={setFiles(e,{hdl:t=e.files.hdl,tst:n=e.files.tst,cmp:r=e.files.cmp,out:i=""}){e.files.hdl=t,e.files.tst=n,e.files.cmp=r,e.files.out=i},updateChip(e,t){e.sim=S(b,t?.pending??e.sim.pending,t?.invalid??e.sim.invalid),e.controls.error=e.sim.invalid?t?.error??e.controls.error:void 0},setProjects(e,t){e.controls.projects=t},setProject(e,t){e.controls.project=t},setChips(e,t){e.controls.chips=t},setChip(e,{chipName:t,dir:n}){v=n,d=t,e.controls.chipName=t,e.title=`${t}.hdl`,e.controls.tests=Array.from(_),e.dir=n},clearChip(e){d="",e.controls.chipName="",e.title=void 0,e.controls.tests=[],this.setFiles(e,{hdl:"",tst:"",cmp:"",out:""})},setTest(e,t){e.controls.testName=t},setVisualizationParams(e,t){e.controls.visualizationParameters=new Set(t)},testRunning(e){e.controls.runningTest=!0},testFinished(e){e.controls.runningTest=!1;const n=(0,g.U)(e.files.cmp.trim(),e.files.out.trim());Promise.resolve().then((()=>{t(n?"Simulation successful: The output file is identical to the compare file":"Simulation error: The output file differs from the compare file")}))},updateTestStep(e){if(e.files.out=I?.log()??"",I?.currentStep?.span)e.controls.span=I.currentStep.span;else if(I.done){const t=e.files.tst.length;e.controls.span={start:t-1,end:t,line:e.files.tst.split("\n").length}}this.updateChip(e,{pending:e.sim.pending,invalid:e.sim.invalid})},updateConfig(e,t){e.config={...e.config,...t}},updateUsingBuiltin(e){e.controls.usingBuiltin=C},displayBuiltin(e){var t,n;k=e.files.hdl,this.setFiles(e,{hdl:(t=e.controls.chipName,n=e.files.hdl,n.replace(/PARTS:([\s\S]*?)\}/,`PARTS:\n\tBUILTIN ${t};`))})},toggleBuiltin(e){e.controls.usingBuiltin=C,C?this.displayBuiltin(e):this.setFiles(e,{hdl:k})}},O={async initialize(){const t=p?"/":"/projects",n=await e.scandir(t),r=[];for(const s of n.filter((e=>e.isDirectory())))(await e.scandir(`${t}/${s.name}`)).some((e=>e.isFile()&&e.name.endsWith(".hdl")))&&r.push(s);const i=(0,y.w9)(r).map((e=>e.name));c.current({action:"setProjects",payload:i}),r.length>0?await O.setProject(i[0]):c.current({action:"setChips",payload:[]}),c.current({action:"clearChip"})},reset(){l.z.get().reset(),b.reset(),I.reset(),c.current({action:"setFiles",payload:{}}),c.current({action:"updateChip"})},async setProject(t){n["/chip/project"]=t,c.current({action:"setProject",payload:t});const r=p?"/":"/projects",i=(await e.scandir(`${r}/${t}`)).filter((e=>e.isFile()&&e.name.endsWith(".hdl"))).map((e=>e.name.replace(".hdl",""))),a=(0,s.iO)(t,i);c.current({action:"setChips",payload:a}),i.length>0&&this.loadChip(`${r}/${t}/${i[0]}.hdl`,!0)},async loadChip(t,n=!0){c.current({action:"updateUsingBuiltin",payload:!1});const r=await e.readFile(t),i=t.split("/"),s=(0,h.Z1)(i.pop()).replace(".hdl",""),a=i.join("/");await this.compileChip(r,a,s),n&&await this.initializeTests(a,s),c.current({action:"setChip",payload:{chipName:s,dir:a}}),c.current({action:"setFiles",payload:{hdl:r}}),C&&(this.loadBuiltin(),c.current({action:"displayBuiltin"}))},async compileChip(n,r,s){b.remove();const o=await(0,a.qg)(n,r,s,e);if((0,i.ys)(o)){const e=(0,i._)(o);return t((0,i._)(o).message),A=!0,void c.current({action:"updateChip",payload:{invalid:!0,error:e}})}this.replaceChip((0,i.Ok)(o))},replaceChip(e){const t=b.ins;for(const[n,{busVoltage:r}]of t){const t=e.ins.get(n);t&&(t.busVoltage=r)}x.reset(),e.eval(),b=e,b.reset(),c.current({action:"updateChip",payload:{invalid:!1}}),c.current({action:"updateTestStep"})},async initializeTests(e,t){_=w[t]??[],this.loadTest(_[0]??t,e)},async loadTest(n,r){if(e)try{r??=v;const t=await e.readFile(`${r}/${n}.tst`);c.current({action:"setFiles",payload:{tst:t,cmp:""}}),c.current({action:"setTest",payload:n}),this.compileTest(t,r)}catch(i){t(`Could not find ${n}.tst. Please load test file separately.`),console.error(i)}},compileTest(n,r){if(!e)return;c.current({action:"setFiles",payload:{tst:n}});const s=m.uG.parse(n);if((0,i.ys)(s))return t(`Failed to parse test ${(0,i._)(s).message}`),A=!0,!1;const a=u.BX.from((0,i.Ok)(s),{dir:r,setStatus:t,loadAction:async e=>(await this.loadChip(e,!1),b),compareTo:async t=>{const n=await e.readFile(`${v}/${t}`);c.current({action:"setFiles",payload:{cmp:n}})}});return(0,i.ys)(a)?(A=!0,t((0,i._)(a).message),!1):(I=(0,i.Ok)(a).with(b).reset(),I.setFileSystem(e),c.current({action:"updateTestStep"}),!0)},async updateFiles({hdl:e,tst:n,cmp:i,tstPath:s}){A=!1,c.current({action:"setFiles",payload:{hdl:e,tst:n,cmp:i}});try{e&&await this.compileChip(e,v,d),n&&this.compileTest(n,s??v)}catch(a){t((0,r.V)(a))}c.current({action:"updateChip",payload:{invalid:A}}),A||t("HDL code: No syntax errors")},async saveChip(t){c.current({action:"setFiles",payload:{hdl:t}});const n=`${v}/${d}.hdl`;e&&n&&await e.writeFile(n,t)},toggle(e,t){void 0!==t?e.busVoltage=e.busVoltage^1<<t:1===e.width?e.toggle():e.busVoltage+=1,c.current({action:"updateChip",payload:{pending:!0}})},eval(){b.eval(),c.current({action:"updateChip",payload:{pending:!1}})},clock(){x.toggle(),x.isLow&&x.frame(),c.current({action:"updateChip"})},async loadBuiltin(){const e=d,n=await(0,f.M1)(e);(0,i.ys)(n)?t(`Failed to load builtin ${e}: ${(0,r.V)((0,i._)(n))}`):this.replaceChip((0,i.Ok)(n))},async toggleBuiltin(){C=!C,c.current({action:"toggleBuiltin"}),C?await this.loadBuiltin():await this.compileChip(k,v,d)},tick(){return this.stepTest()},async stepTest(){try{const e=await I.step();return c.current({action:"updateTestStep"}),e&&c.current({action:"testFinished"}),e}catch(e){return t(e.message),!0}},getProjectFiles:async()=>(console.log(v),(await e.scandir(v)).filter((e=>e.isFile()&&e.name.endsWith(".hdl"))).map((t=>({name:t.name,content:e.readFile(`${v}/${t.name}`)}))))};return{initialState:{controls:{projects:["1","2","3","5"],project:"1",chips:[],chipName:"",tests:_,testName:"",usingBuiltin:!1,runningTest:!1,error:void 0,visualizationParameters:new Set},files:{hdl:"",cmp:"",tst:"",out:"",backupHdl:""},sim:S(new o.ti),config:{speed:2}},reducers:E,actions:O}}(e,t,n,b,void 0!=p)),[e,t,n,b]),[C,A]=(0,d.A)(_,k);return b.current=A,{state:C,dispatch:b,actions:I}}},4256:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(7076);class i extends r.qN{dispatch;constructor(e,t){super(e,e.size,0),this.dispatch=t}async load(e,t){await super.load(e,t),this.dispatch.current({action:"update"})}}},8849:(e,t,n)=>{n.d(t,{$:()=>S,vw:()=>k});var r=n(2469),i=n(5874),s=n(8463),a=n(7076),o=n(6554),l=n(9563),u=n(3977);const c='Vm <: Base {\n  Root := Vm\n\n  Vm = newline* VmInstructionLine* VmInstruction?\n\n  space := comment | " " | "\t"\n  whitespace = lineComment | comment | space\n\n  VmInstructionLine = VmInstruction newline+\n  VmInstruction =\n    | StackInstruction\n    | OpInstruction\n    | FunctionInstruction\n    | CallInstruction\n    | ReturnInstruction\n    | GotoInstruction\n    | LabelInstruction\n  \n  StackInstruction = (push | pop) MemorySegment Number\n  OpInstruction = Add | Sub | Neg | Lt | Gt | Eq | And | Or | Not\n  FunctionInstruction = function Name Number \n  CallInstruction =  call Name Number\n  ReturnInstruction = return\n  LabelInstruction = label Name\n  GotoInstruction = (goto | ifGoto) Name\n\n  MemorySegment = argument | local | static | constant | this | that | pointer | temp\n\n  push = "push" whitespace+\n  pop = "pop" whitespace+\n  function = "function" whitespace+\n  call = "call" whitespace+\n  return = "return"\n  goto = "goto" whitespace+\n  ifGoto = "if-goto" whitespace+\n  label = "label" whitespace+\n\n  argument = "argument" whitespace+\n  local = "local" whitespace+\n  static = "static" whitespace+\n  constant = "constant" whitespace+\n  this = "this" whitespace+\n  that = "that" whitespace+\n  pointer = "pointer" whitespace+\n  temp = "temp" whitespace+\n\n  Add = "add" \n  Sub = "sub" \n  Neg = "neg" \n  Eq = "eq"\n  Lt = "lt" \n  Gt = "gt" \n  And = "and" \n  Or = "or" \n  Not = "not"\n}',p=(0,l.qN)(c,u.lN),d=p.extendSemantics(u.JE);d.addAttribute("op",{push:(e,t)=>"push",pop:(e,t)=>"pop",function:(e,t)=>"function",call:(e,t)=>"call",return:e=>"return",goto:(e,t)=>"goto",ifGoto:(e,t)=>"if-goto",label:(e,t)=>"label",Add:e=>"add",Sub:e=>"sub",Neg:e=>"neg",Eq:e=>"eq",Lt:e=>"lt",Gt:e=>"gt",And:e=>"and",Or:e=>"or",Not:e=>"not"}),d.addAttribute("segment",{argument:(e,t)=>"argument",local:(e,t)=>"local",static:(e,t)=>"static",constant:(e,t)=>"constant",this:(e,t)=>"this",that:(e,t)=>"that",pointer:(e,t)=>"pointer",temp:(e,t)=>"temp"}),d.addAttribute("instruction",{StackInstruction({op:e},{segment:t},n){return{op:e,segment:t,offset:Number(n.sourceString),span:(0,u.Ln)(this.source)}},OpInstruction({op:e}){return{op:e,span:(0,u.Ln)(this.source)}},FunctionInstruction(e,{name:t},n){return{op:"function",name:t,nVars:Number(n.sourceString),span:(0,u.Ln)(this.source)}},CallInstruction(e,{name:t},n){return{op:"call",name:t,nArgs:Number(n.sourceString),span:(0,u.Ln)(this.source)}},ReturnInstruction(e){return{op:"return",span:(0,u.Ln)(this.source)}},LabelInstruction(e,{name:t}){return{op:"label",label:t,span:(0,u.Ln)(this.source)}},GotoInstruction({op:e},{name:t}){return{op:e,label:t,span:(0,u.Ln)(this.source)}},VmInstructionLine:(e,t)=>e.instruction}),d.addAttribute("vm",{Vm(e,t,n){const r=t.children.map((e=>e.instruction))??[];return{instructions:n.child(0)?[...r,n.child(0).instruction]:r}}}),d.addAttribute("root",{Root:({vm:e})=>e});const h={grammar:c,semantics:d,parser:p,parse:(0,u.Q5)(p,d)};var f=n(8783),m=n(5087),g=n(8878),y=n(7365),v=n(9646),b=n(910),w=n(4256);const S="repeat {\n\tvmstep;\n}";function x(e,t,n,r){const i=new w.X(e.vm.RAM,t),s=new w.X(e.vm.Screen,t),o=new a.PC(new w.X(e.vm.RAM,t)),l=e.vm.derivedLine();let u=[];try{u=e.vm.vmStack().reverse()}catch(c){n("Runtime error: Invalid stack")}return{Keyboard:o,RAM:i,Screen:s,Stack:u,Prog:e.vm.program,Statics:[...e.vm.memory.map(((e,t)=>t),16,16+e.vm.getStaticCount())],Temp:[...e.vm.memory.map(((e,t)=>t),5,13)],AddedSysInit:e.vm.addedSysInit,highlight:l,showHighlight:r}}function k(){const{fs:e,setStatus:t,storage:n}=(0,g.useContext)(b.L),a=(0,g.useRef)((()=>{})),{initialState:l,reducers:u,actions:c}=(0,g.useMemo)((()=>function(e,t,n,a){const l=(0,i.oA)(h.parse(s.J5));let u=(0,i.oA)(m.Vm.build(l.instructions)),c=new f.Y({doEcho:t}).with(u),p=!1,d=!0,g="",v=!0;const b={setVm(e,t){e.files.vm=t},setTst(e,{tst:t}){e.files.tst=t},setCmp(e,{cmp:t}){e.files.cmp=t},setExitCode(e,t){e.controls.exitCode=t},setValid(e,t){e.controls.valid=t},setShowHighlight(e,t){e.vm.showHighlight=t},setError(e,n){n?(e.controls.valid=!1,t(n?.message)):e.controls.valid=!0,e.controls.error=n},update(e){e.vm=x(c,a,t,v),e.test.highlight=c.currentStep?.span},setAnimate(e,t){e.controls.animate=t},testStep(e){e.files.out=c.log()},testFinished(e){const n=(0,y.U)(e.files.cmp.trim(),e.files.out);t(n?"Simulation successful: The output file is identical to the compare file":"Simulation error: The output file differs from the compare file")},setTitle(e,t){e.title=t},updateConfig(e,t){e.config={...e.config,...t}}},w={vm:x(c,a,t,!0),controls:{exitCode:void 0,runningTest:!1,animate:!0,valid:!0},test:{highlight:void 0},files:{vm:"",tst:S,cmp:"",out:""},config:{ram1Format:"dec",ram2Format:"dec",screenScale:1,speed:2,testSpeed:2}},k={async load(n){const i=[];let s;if((await e.stat(n)).isFile())i.push({name:(0,r.Z1)(n.split("/").pop()).replace(".vm",""),content:await e.readFile(n)}),s=n.split("/").pop()??"";else{for(const t of(await e.scandir(n)).filter((e=>e.isFile()&&e.name.endsWith(".vm"))))i.push({name:t.name.replace(".vm",""),content:await e.readFile(`${n}/${t.name}`)});s=`${n.split("/").pop()} / *.vm`}a.current({action:"setTitle",payload:s}),this.loadVm(i),this.reset(),t("")},setVm(e){if(v=!1,a.current({action:"setVm",payload:e}),g==e)return;g=e;const t=h.parse(e);if((0,i.ys)(t))return a.current({action:"setError",payload:(0,i._)(t)}),!1;const n=(0,i.oA)(t).instructions,r=m.Vm.build(n);return this.replaceVm(r)},loadVm(e){v=!1;const t=e.map((e=>e.content)).join("\n");if(a.current({action:"setVm",payload:t}),g==t)return;g=t;const n=[];let r=0;for(const o of e){const e=h.parse(o.content);if((0,i.ys)(e))return a.current({action:"setError",payload:(0,i._)(e)}),!1;const t=(0,i.oA)(e).instructions;for(const n of t)void 0!=n.span?.line&&(n.span.line+=r);r+=o.content.split("\n").length,n.push({name:o.name,instructions:t})}const s=m.Vm.buildFromFiles(n);return this.replaceVm(s)},replaceVm:e=>(0,i.ys)(e)?(a.current({action:"setError",payload:(0,i._)(e)}),!1):(a.current({action:"setError"}),u=(0,i.oA)(e),c.vm=u,a.current({action:"update"}),!0),loadTest(n,r){a.current({action:"setTst",payload:{tst:r}});const s=o.uG.parse(r);if((0,i.ys)(s))return a.current({action:"setValid",payload:!1}),t("Failed to parse test"),!1;a.current({action:"setValid",payload:!0}),t("Parsed tst"),u.reset();const l=f.Y.from((0,i.oA)(s),{dir:n,doLoad:async e=>{await this.load(e)},doEcho:t,compareTo:async t=>{const r=n.split("/").slice(0,-1).join("/"),i=await e.readFile(`${r}/${t}`);a.current({action:"setCmp",payload:{cmp:i}})}});return(0,i.ys)(l)?(t((0,i._)(l).message),!1):(c=(0,i.Ok)(l).using(e),c.vm=u,a.current({action:"update"}),!0)},setAnimate(e){d=e,a.current({action:"setAnimate",payload:e})},async testStep(){v=!0;let e=!1;try{return e=await c.step(),a.current({action:"testStep"}),e&&a.current({action:"testFinished"}),d&&a.current({action:"update"}),e}catch(n){return t(`Runtime error: ${n.message}`),a.current({action:"setValid",payload:!1}),!0}},setPaused(e=!0){u.setPaused(e)},step(){v=!0;try{let e=!1;const t=u.step();return void 0!==t&&(e=!0,a.current({action:"setExitCode",payload:t})),d&&a.current({action:"update"}),e}catch(e){return t(`Runtime error: ${e.message}`),a.current({action:"setValid",payload:!1}),!0}},reset(){v=!0,c.reset(),u.reset(),a.current({action:"update"}),a.current({action:"setExitCode",payload:void 0}),a.current({action:"setValid",payload:!0})},toggleUseTest(){p=!p,a.current({action:"update"})},initialize(){a.current({action:"setTitle",payload:void 0}),this.setVm(s.J5)}};return{initialState:w,reducers:b,actions:k}}(e,t,0,a)),[e,t,n,a]),[p,d]=(0,v.A)(u,l);return a.current=d,{state:p,dispatch:a,actions:c}}},2469:(e,t,n)=>{n.d(t,{H8:()=>a,Z1:()=>s,vA:()=>i});class r extends Error{constructor(e="Assertion failed"){super(e)}}function i(e,t){if(!e)throw new r(t instanceof Function?t():t)}function s(e,t="Assertion failed: value does not exist"){return i(null!=e,t),e}function a(e,t=`Unexpected value ${e}`){throw new Error(t instanceof Function?t():t)}},4641:(e,t,n)=>{n.d(t,{V:()=>r});const r=e=>{if((e=>"function"===typeof e?.toString||"string"===typeof e)(e)){const t=e.toString();return"[object Object]"===t?JSON.stringify(e):t}return JSON.stringify(e)}},4544:(e,t,n)=>{n.d(t,{JU:()=>h,P8:()=>u,Q2:()=>p,cL:()=>f,d$:()=>a});const r={SEP:"\\",WD:"C:\\\\",isAbsolute:e=>Boolean(e.match(new RegExp("^[a-zA-Z]:\\\\")))},i={SEP:"/",WD:"/",isAbsolute:e=>"/"==e[0]},s="undefined"!==typeof process&&"win32"==process.platform?r:i,a=s.SEP,o=s.WD,l=s.isAbsolute;function u(e){e.endsWith(a)&&(e=e.substring(0,e.length-1));return e.split(a).at(-1)??""}function c(...e){const t=[];for(const n of e)for(const e of n.split(a))switch(e){case"":case".":break;case"..":t.pop();break;default:t.push(e)}return(s==i?a:"")+t.join(a)}class p{adapter;wd=o;stack=[];constructor(e=new d){this.adapter=e}cwd(){return this.wd}cd(e){this.wd=this.p(e)}pushd(e){this.stack.push(this.wd),this.cd(e)}popd(){this.stack.length>0&&(this.wd=this.stack.pop())}stat(e){return this.adapter.stat(this.p(e))}scandir(e){return this.adapter.scandir(this.p(e))}readdir(e){return this.adapter.readdir(this.p(e))}mkdir(e){return this.adapter.mkdir(this.p(e))}copyFile(e,t){return this.adapter.copyFile(this.p(e),this.p(t))}readFile(e){return this.adapter.readFile(this.p(e))}writeFile(e,t){return this.adapter.writeFile(this.p(e),t)}rm(e){return this.adapter.rm(this.p(e))}p(e){return l(e)?e:c(this.cwd(),e)}}class d{fs;constructor(e={}){this.fs=e}stat(e){return new Promise(((t,n)=>{if(this.fs[e])return t({name:u(e),isDirectory:()=>!1,isFile:()=>!0});e.endsWith(a)||(e+=a);for(let r of Object.keys(this.fs))if(r.startsWith(e))return t({name:u(e),isDirectory:()=>!0,isFile:()=>!1});n()}))}async scandir(e){return(await this.readdir(e)).map((t=>{let n=void 0!==this.fs[c(e,t)];return{name:t,isDirectory:()=>!n,isFile:()=>n}}))}readdir(e){return e.endsWith(a)||(e+=a),new Promise((t=>{let n=new Set;for(const r of Object.keys(this.fs))if(r.startsWith(e)){const t=r.indexOf(a,e.length+1),i=r.substring(e.length,-1===t?void 0:t);n.add(i)}return t([...n].sort())}))}mkdir(e){return Promise.resolve()}copyFile(e,t){return new Promise((n=>{this.fs[t]=this.fs[e],n()}))}readFile(e){return new Promise(((t,n)=>{let r=this.fs[e];if(void 0===r){n(new Error(`File Not Found ${e}`))}else t(r)}))}writeFile(e,t){return new Promise((n=>{this.fs[e]=t,n()}))}rm(e){return new Promise((t=>{delete this.fs[e],t()}))}}class h extends d{constructor(){super(window.localStorage)}}async function f(e,t){for(const[n,r]of Object.entries(t))"string"===typeof r?await e.writeFile(n,r):(e.cd(n),await f(e,r),e.cd(".."))}},742:(e,t,n)=>{function r(e,t,n=1){const r=[];for(let i=e;i<t;i+=n)r.push(i);return r}n.d(t,{y:()=>r})},5874:(e,t,n)=>{n.d(t,{HQ:()=>i,Ok:()=>a,_:()=>o,oA:()=>l,ys:()=>s});const r=e=>null===e;const i=e=>Object.prototype.hasOwnProperty.call(e??{},"ok"),s=e=>Object.prototype.hasOwnProperty.call(e,"err");function a(e){return i(e)?e.ok:{ok:e,map(e){return e(a(this))}}}function o(e){return e.err??{err:e,map(e){return this}}}function l(e){if(r(e))throw new Error("Attempted to unwrap None");if(s(e))throw o(e);return i(e)?a(e):e}},8256:(e,t,n)=>{n.d(t,{Ru:()=>k});var r=n(2527);const i=e=>"string"===typeof e,s=new Map,a="en";function o(e){return[...Array.isArray(e)?e:[e],a]}function l(e,t,n){const r=o(e);return p((()=>d("date",r,n)),(()=>new Intl.DateTimeFormat(r,n))).format(i(t)?new Date(t):t)}function u(e,t,n){const r=o(e);return p((()=>d("number",r,n)),(()=>new Intl.NumberFormat(r,n))).format(t)}function c(e,t,n,{offset:r=0,...i}){const s=o(e),a=t?p((()=>d("plural-ordinal",s)),(()=>new Intl.PluralRules(s,{type:"ordinal"}))):p((()=>d("plural-cardinal",s)),(()=>new Intl.PluralRules(s,{type:"cardinal"})));return i[n]??i[a.select(n-r)]??i.other}function p(e,t){const n=e();let r=s.get(n);return r||(r=t(),s.set(n,r)),r}function d(e,t,n){return`${e}-${t.join("-")}-${JSON.stringify(n)}`}const h=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/g,f="%__lingui_octothorpe__%",m=(e,t)=>t[e]??t.other;function g(e,t,n){return(s={},a)=>{const o=((e,t,n={})=>{const r=t||e,i=e=>"object"===typeof e?e:n[e]||{style:e},s=(e,t)=>{const s=Object.keys(n).length?i("number"):void 0,a=u(r,e,s);return t.replace(new RegExp(f,"g"),a)};return{plural:(e,t)=>{const{offset:n=0}=t,i=c(r,!1,e,t);return s(e-n,i)},selectordinal:(e,t)=>{const{offset:n=0}=t,i=c(r,!0,e,t);return s(e-n,i)},select:m,number:(e,t)=>u(r,e,i(t)),date:(e,t)=>l(r,e,i(t))}})(t,n,a),p=(e,t=!1)=>Array.isArray(e)?e.reduce(((e,n)=>{if("#"===n&&t)return e+f;if(i(n))return e+n;const[r,a,l]=n;let u,c={};if("plural"===a||"selectordinal"===a||"select"===a?Object.entries(l).forEach((([e,t])=>{c[e]=p(t,"plural"===a||"selectordinal"===a)})):c=l,a){u=(0,o[a])(s[r],c)}else u=s[r];return null==u?e:e+u}),""):e,d=p(e);return i(d)&&h.test(d)?(0,r.MH)(d.trim()):i(d)?d.trim():d?String(d):""}}var y=Object.defineProperty,v=(e,t,n)=>(((e,t,n)=>{t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class b{constructor(){v(this,"_events",{})}on(e,t){var n;return(n=this._events)[e]??(n[e]=[]),this._events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){const n=this._getListeners(e);if(!n)return;const r=n.indexOf(t);~r&&n.splice(r,1)}emit(e,...t){const n=this._getListeners(e);n&&n.map((e=>e.apply(this,t)))}_getListeners(e){const t=this._events[e];return!!Array.isArray(t)&&t}}var w=Object.defineProperty,S=(e,t,n)=>(((e,t,n)=>{t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class x extends b{constructor(e){super(),S(this,"_locale",""),S(this,"_locales"),S(this,"_localeData",{}),S(this,"_messages",{}),S(this,"_missing"),S(this,"t",this._.bind(this)),null!=e.missing&&(this._missing=e.missing),null!=e.messages&&this.load(e.messages),null!=e.localeData&&this.loadLocaleData(e.localeData),("string"===typeof e.locale||e.locales)&&this.activate(e.locale??a,e.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(e,t){const n=this._localeData[e];n?Object.assign(n,t):this._localeData[e]=t}loadLocaleData(e,t){null!=t?this._loadLocaleData(e,t):Object.keys(e).forEach((t=>this._loadLocaleData(t,e[t]))),this.emit("change")}_load(e,t){const n=this._messages[e];n?Object.assign(n,t):this._messages[e]=t}load(e,t){"string"==typeof e&&"object"===typeof t?this._load(e,t):Object.entries(e).forEach((([e,t])=>this._load(e,t))),this.emit("change")}loadAndActivate({locale:e,locales:t,messages:n}){this._locale=e,this._locales=t||void 0,this._messages[this._locale]=n,this.emit("change")}activate(e,t){this._locale=e,this._locales=t,this.emit("change")}_(e,t,n){let r=n?.message;e||(e=""),i(e)||(t=e.values||t,r=e.message,e=e.id);const s=this.messages[e],a=void 0===s,o=this._missing;if(o&&a)return(e=>"function"===typeof e)(o)?o(this._locale,e):o;a&&this.emit("missing",{id:e,locale:this._locale});let l=s||r||e;return i(l)&&h.test(l)?JSON.parse(`"${l}"`):i(l)?l:g(l,this._locale,this._locales)(t,n?.formats)}date(e,t){return l(this._locales||this._locale,e,t)}number(e,t){return u(this._locales||this._locale,e,t)}}const k=function(e={}){return new x(e)}()},1391:(e,t,n)=>{n.d(t,{CY:()=>f,x6:()=>m});var r=n(8878);const i=/<([a-zA-Z0-9]+)>(.*?)<\/\1>|<([a-zA-Z0-9]+)\/>/,s=/(?:\r\n|\r|\n)/g,a={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0};function o(e,t={}){const n=u(0,"$lingui$"),c=e.replace(s,"").split(i);if(1===c.length)return e;const p=[],d=c.shift();d&&p.push(d);for(const[i,s,u]of l(c)){let e="undefined"!==typeof i?t[i]:void 0;(!e||a[e.type]&&s)&&(e?console.error(`${e.type} is a void element tag therefore it must have no children`):console.error(`Can't use element at index '${i}' as it is not declared in the original translation`),e=r.createElement(r.Fragment)),Array.isArray(e)&&(e=r.createElement(r.Fragment,{},e)),p.push(r.cloneElement(e,{key:n()},s?o(s,t):e.props.children)),u&&p.push(u)}return 1===p.length?p[0]:p}function l(e){if(!e.length)return[];const[t,n,r,i]=e.slice(0,4);return[[t||r,n||"",i]].concat(l(e.slice(4,e.length)))}const u=(e=0,t="")=>()=>`${t}_${e++}`;function c(e){const{render:t,component:n,id:i,message:s,formats:a,lingui:{i18n:l,defaultComponent:u}}=e,c={...e.values},d={...e.components};c&&Object.keys(c).forEach((e=>{const t=c[e];if(!(r.isValidElement(t)||Array.isArray(t)&&t.every(r.isValidElement)))return;const n=Object.keys(d).length;d[n]=t,c[e]=`<${n}/>`}));const h=l&&"function"===typeof l._?l._(i,c,{message:s,formats:a}):i,f=h?o(h,d):null;if(null===t||null===n)return f;const m=u||p,g={id:i,message:s,translation:f,isTranslated:i!==f&&s!==f,children:f};if(t&&n)console.error("You can't use both `component` and `render` prop at the same time. `component` is ignored.");else if(t&&"function"!==typeof t)console.error(`Invalid value supplied to prop \`render\`. It must be a function, provided ${t}`);else if(n&&"function"!==typeof n)return console.error(`Invalid value supplied to prop \`component\`. It must be a React component, provided ${n}`),r.createElement(m,g,f);if("function"===typeof t)return t(g);const y=n||m;return r.createElement(y,g,f)}const p=({children:e})=>r.createElement(r.Fragment,null,e),d=r.createContext(null),h=e=>r.useContext(d);const f=({i18n:e,defaultComponent:t,children:n})=>{const i=r.useRef(e.locale),s=r.useCallback((()=>({i18n:e,defaultComponent:t,_:e.t.bind(e)})),[e,t]),[a,o]=r.useState(s());return r.useEffect((()=>{const t=()=>{i.current=e.locale,o(s())},n=e.on("change",t);return i.current!==e.locale&&t(),n}),[e,s]),i.current?r.createElement(d.Provider,{value:a},n):null};function m(e){let t;const n=h(t);return r.createElement(c,{...e,lingui:n})}},9563:(e,t,n)=>{n.d(t,{qN:()=>at});var r={};n.r(r),n.d(r,{CV:()=>m,b0:()=>s,vA:()=>a,Ms:()=>p,xA:()=>o,$L:()=>c,pX:()=>h,lO:()=>d,Ho:()=>f,ux:()=>u,xq:()=>l,qj:()=>y,rE:()=>v});const i={};for(let ot=0;ot<128;ot++)i[ot]=String.fromCharCode(ot);function s(e){const t=e||"";return function(){throw new Error("this method "+t+" is abstract! (it has no implementation in class "+this.constructor.name+")")}}function a(e,t){if(!e)throw new Error(t||"Assertion failed")}function o(e,t,n){let r;Object.defineProperty(e,t,{get(){return r||(r=n.call(this)),r}})}function l(e,t){return new Array(t+1).join(e)}function u(e,t){return function(e,t){const n=[];for(;t-- >0;)n.push(e());return n}((()=>e),t)}function c(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];e.lastIndexOf(r)!==n&&t.indexOf(r)<0&&t.push(r)}return t}function p(e){const t=[];return e.forEach((e=>{t.indexOf(e)<0&&t.push(e)})),t}function d(e){const t=e[0];return t===t.toUpperCase()}function h(e){return!d(e)}function f(e,t,n){const r=n||" ";return e.length<t?l(r,t-e.length)+e:e}function m(){this.strings=[]}i["'".charCodeAt(0)]="\\'",i['"'.charCodeAt(0)]='\\"',i["\\".charCodeAt(0)]="\\\\",i["\b".charCodeAt(0)]="\\b",i["\f".charCodeAt(0)]="\\f",i["\n".charCodeAt(0)]="\\n",i["\r".charCodeAt(0)]="\\r",i["\t".charCodeAt(0)]="\\t",i["\v".charCodeAt(0)]="\\v",m.prototype.append=function(e){this.strings.push(e)},m.prototype.contents=function(){return this.strings.join("")};const g=e=>String.fromCodePoint(parseInt(e,16));function y(e){if("\\"!==e.charAt(0))return e;switch(e.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"x":return g(e.slice(2,4));case"u":return"{"===e.charAt(2)?g(e.slice(3,-1)):g(e.slice(2,6));default:return e.charAt(1)}}function v(e){if(null==e)return String(e);const t=Object.prototype.toString.call(e);try{let n;return n=e.constructor&&e.constructor.name?e.constructor.name:0===t.indexOf("[object ")?t.slice(8,-1):typeof e,n+": "+JSON.stringify(String(e))}catch(n){return t}}const b={Lu:/\p{Lu}/u,Ll:/\p{Ll}/u,Lt:/\p{Lt}/u,Lm:/\p{Lm}/u,Lo:/\p{Lo}/u,Nl:/\p{Nl}/u,Nd:/\p{Nd}/u,Mn:/\p{Mn}/u,Mc:/\p{Mc}/u,Pc:/\p{Pc}/u,Zs:/\p{Zs}/u,L:/\p{Letter}/u,Ltmo:/\p{Lt}|\p{Lm}|\p{Lo}/u};class w{constructor(){if(this.constructor===w)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(e){return e&&(this.source=e.trimmed()),this}}const S=Object.create(w.prototype),x=Object.create(w.prototype);class k extends w{constructor(e){super(),this.obj=e}}class _ extends w{constructor(e,t){super(),this.from=e,this.to=t,this.matchCodePoint=e.length>1||t.length>1}}class I extends w{constructor(e){super(),this.index=e}}class C extends w{constructor(e){super(),this.terms=e}}class A extends C{constructor(e,t,n){super([n,e.rules[t].body]),this.superGrammar=e,this.name=t,this.body=n}}class E extends C{constructor(e,t,n,r){const i=e.rules[t].body;super([...n,i,...r]),this.superGrammar=e,this.ruleName=t,this.expansionPos=n.length}}class O extends w{constructor(e){super(),this.factors=e}}class P extends w{constructor(e){super(),this.expr=e}}class L extends P{}class R extends P{}class T extends P{}L.prototype.operator="*",R.prototype.operator="+",T.prototype.operator="?",L.prototype.minNumMatches=0,R.prototype.minNumMatches=1,T.prototype.minNumMatches=0,L.prototype.maxNumMatches=Number.POSITIVE_INFINITY,R.prototype.maxNumMatches=Number.POSITIVE_INFINITY,T.prototype.maxNumMatches=1;class N extends w{constructor(e){super(),this.expr=e}}class F extends w{constructor(e){super(),this.expr=e}}class M extends w{constructor(e){super(),this.expr=e}}class j extends w{constructor(e,t=[]){super(),this.ruleName=e,this.args=t}isSyntactic(){return d(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}}class D extends w{constructor(e){super(),this.category=e,this.pattern=b[e]}}function $(e,t){let n;return t?(n=new Error(t.getLineAndColumnMessage()+e),n.shortMessage=e,n.interval=t):n=new Error(e),n}function z(){return $("Interval sources don't match")}function V(e,t,n){return $("Rule "+e+" is not declared in grammar "+t,n)}function U(e,t,n,r){let i="Duplicate declaration for rule '"+e+"' in grammar '"+t+"'";return t!==n&&(i+=" (originally declared in '"+n+"')"),$(i,r)}function B(e,t,n,r){return $("Wrong number of parameters for rule "+e+" (expected "+t+", got "+n+")",r)}function W(e,t,n){return $("Duplicate parameter names in rule "+e+": "+t.join(", "),n)}function H(e,t){return $("Incorrect argument type: expected "+e,t.source)}function G(e,t){const n=t.length>0?t[t.length-1].args:[];let r="Nullable expression "+e.expr.substituteParams(n)+" is not allowed inside '"+e.operator+"' (possible infinite loop)";if(t.length>0){r+="\nApplication stack (most recent application last):\n"+t.map((e=>new j(e.ruleName,e.args))).join("\n")}return $(r,e.expr.source)}function q(e,t,n,r){return $("Rule "+e+" involves an alternation which has inconsistent arity (expected "+t+", got "+n+")",r.source)}function K(e){if(1===e.length)throw e[0];if(e.length>1)throw function(e){const t=e.map((e=>e.message));return $(["Errors:"].concat(t).join("\n- "),e[0].interval)}(e)}function Q(e,t,n){const r=e.length;return(e.slice(0,n)+t+e.slice(n+t.length)).substr(0,r)}function Y(...e){const t=this,{offset:n}=t,{xq:i}=r,s=new m;s.append("Line "+t.lineNum+", col "+t.colNum+":\n");const o=function(e){let t=0;return e.map((e=>{const n=e.toString();return t=Math.max(t,n.length),n})).map((e=>f(e,t)))}([null==t.prevLine?0:t.lineNum-1,t.lineNum,null==t.nextLine?0:t.lineNum+1]),l=(e,t,n)=>{s.append(n+o[e]+" | "+t+"\n")};null!=t.prevLine&&l(0,t.prevLine,"  "),l(1,t.line,"> ");const u=t.line.length;let c=i(" ",u+1);for(let r=0;r<e.length;++r){let s=e[r][0],o=e[r][1];a(s>=0&&s<=o,"range start must be >= 0 and <= end");const l=n-t.colNum+1;s=Math.max(0,s-l),o=Math.min(o-l,u),c=Q(c,i("~",o-s),s)}const p=2+o[1].length+3;return s.append(i(" ",p)),c=Q(c,"^",t.colNum-1),s.append(c.replace(/ +$/,"")+"\n"),null!=t.nextLine&&l(2,t.nextLine,"  "),s.contents()}let X=[];function J(e){X.push(e)}function Z(e,t){let n=1,r=1,i=0,s=0,a=null,o=null,l=-1;for(;i<t;){const t=e.charAt(i++);"\n"===t?(n++,r=1,l=s,s=i):"\r"!==t&&r++}let u=e.indexOf("\n",s);if(-1===u)u=e.length;else{const t=e.indexOf("\n",u+1);a=-1===t?e.slice(u):e.slice(u,t),a=a.replace(/^\r?\n/,"").replace(/\r$/,"")}l>=0&&(o=e.slice(l,s).replace(/\r?\n$/,""));return{offset:t,lineNum:n,colNum:r,line:e.slice(s,u).replace(/\r$/,""),prevLine:o,nextLine:a,toString:Y}}function ee(e,t,...n){return Z(e,t).toString(...n)}const te=(()=>{let e=0;return t=>""+t+e++})();class ne{constructor(e,t,n){this.sourceString=e,this.startIdx=t,this.endIdx=n}get contents(){return void 0===this._contents&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents}get length(){return this.endIdx-this.startIdx}coverageWith(...e){return ne.coverage(...e,this)}collapsedLeft(){return new ne(this.sourceString,this.startIdx,this.startIdx)}collapsedRight(){return new ne(this.sourceString,this.endIdx,this.endIdx)}getLineAndColumn(){return Z(this.sourceString,this.startIdx)}getLineAndColumnMessage(){const e=[this.startIdx,this.endIdx];return ee(this.sourceString,this.startIdx,e)}minus(e){if(this.sourceString!==e.sourceString)throw z();return this.startIdx===e.startIdx&&this.endIdx===e.endIdx?[]:this.startIdx<e.startIdx&&e.endIdx<this.endIdx?[new ne(this.sourceString,this.startIdx,e.startIdx),new ne(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.endIdx&&e.endIdx<this.endIdx?[new ne(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.startIdx&&e.startIdx<this.endIdx?[new ne(this.sourceString,this.startIdx,e.startIdx)]:[this]}relativeTo(e){if(this.sourceString!==e.sourceString)throw z();return a(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,"other interval does not cover this one"),new ne(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)}trimmed(){const{contents:e}=this,t=this.startIdx+e.match(/^\s*/)[0].length,n=this.endIdx-e.match(/\s*$/)[0].length;return new ne(this.sourceString,t,n)}subInterval(e,t){const n=this.startIdx+e;return new ne(this.sourceString,n,n+t)}}ne.coverage=function(e,...t){let{startIdx:n,endIdx:r}=e;for(const i of t){if(i.sourceString!==e.sourceString)throw z();n=Math.min(n,i.startIdx),r=Math.max(r,i.endIdx)}return new ne(e.sourceString,n,r)};class re{constructor(e){this.source=e,this.pos=0,this.examinedLength=0}atEnd(){const e=this.pos>=this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e}next(){const e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e}nextCharCode(){const e=this.next();return e&&e.charCodeAt(0)}nextCodePoint(){const e=this.source.slice(this.pos++).codePointAt(0);return e>65535&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),e}matchString(e,t){let n;if(t){for(n=0;n<e.length;n++){const t=this.next(),r=e[n];if(null==t||t.toUpperCase()!==r.toUpperCase())return!1}return!0}for(n=0;n<e.length;n++)if(this.next()!==e[n])return!1;return!0}sourceSlice(e,t){return this.source.slice(e,t)}interval(e,t){return new ne(this.source,e,t||this.pos)}}class ie{constructor(e,t,n,r,i,s,a){this.matcher=e,this.input=t,this.startExpr=n,this._cst=r,this._cstOffset=i,this._rightmostFailurePosition=s,this._rightmostFailures=a,this.failed()&&(o(this,"message",(function(){const e="Expected "+this.getExpectedText();return ee(this.input,this.getRightmostFailurePosition())+e})),o(this,"shortMessage",(function(){const e="expected "+this.getExpectedText(),t=Z(this.input,this.getRightmostFailurePosition());return"Line "+t.lineNum+", col "+t.colNum+": "+e})))}succeeded(){return!!this._cst}failed(){return!this.succeeded()}getRightmostFailurePosition(){return this._rightmostFailurePosition}getRightmostFailures(){if(!this._rightmostFailures){this.matcher.setInput(this.input);const e=this.matcher._match(this.startExpr,{tracing:!1,positionToRecordFailures:this.getRightmostFailurePosition()});this._rightmostFailures=e.getRightmostFailures()}return this._rightmostFailures}toString(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"}getExpectedText(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");const e=new m;let t=this.getRightmostFailures();t=t.filter((e=>!e.isFluffy()));for(let n=0;n<t.length;n++)n>0&&(n===t.length-1?e.append(t.length>2?", or ":" or "):e.append(", ")),e.append(t[n].toString());return e.contents()}getInterval(){const e=this.getRightmostFailurePosition();return new ne(this.input,e,e)}}class se{constructor(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}isActive(e){return this.applicationMemoKeyStack.indexOf(e.toMemoKey())>=0}enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())}exit(){this.applicationMemoKeyStack.pop()}startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;const{applicationMemoKeyStack:n}=this,r=n.indexOf(e.toMemoKey())+1,i=n.slice(r);t.isInvolved=function(e){return i.indexOf(e)>=0},t.updateInvolvedApplicationMemoKeys=function(){for(let e=r;e<n.length;e++){const t=n[e];this.isInvolved(t)||i.push(t)}}}endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion}shouldUseMemoizedResult(e){if(!e.isLeftRecursion)return!0;const{applicationMemoKeyStack:t}=this;for(let n=0;n<t.length;n++){const r=t[n];if(e.isInvolved(r))return!1}return!0}memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t}clearObsoleteEntries(e,t){if(e+this.maxExaminedLength<=t)return;const{memo:n}=this;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(n).forEach((r=>{const i=n[r];e+i.examinedLength>t?delete n[r]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,i.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,i.rightmostFailureOffset))}))}}const ae="\u22c5",oe="\u2409",le="\u240a",ue="\u240d",ce={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function pe(e){return"string"===typeof e?e.replace(/ /g,ae).replace(/\t/g,oe).replace(/\n/g,le).replace(/\r/g,ue):String(e)}class de{constructor(e,t,n,r,i,s,a){this.input=e,this.pos=this.pos1=t,this.pos2=n,this.source=new ne(e,t,n),this.expr=r,this.bindings=s,this.children=a||[],this.terminatingLREntry=null,this._flags=i?ce.succeeded:0}get displayString(){return this.expr.toDisplayString()}clone(){return this.cloneWithExpr(this.expr)}cloneWithExpr(e){const t=new de(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return t.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,t.isImplicitSpaces=this.isImplicitSpaces,t.isMemoized=this.isMemoized,t.isRootNode=this.isRootNode,t.terminatesLR=this.terminatesLR,t.terminatingLREntry=this.terminatingLREntry,t}recordLRTermination(e,t){this.terminatingLREntry=new de(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0}walk(e,t){let n=e;function r(e,i,s){let a=!0;n.enter&&n.enter.call(t,e,i,s)===de.prototype.SKIP&&(a=!1),a&&(e.children.forEach((t=>{r(t,e,s+1)})),n.exit&&n.exit.call(t,e,i,s))}"function"===typeof n&&(n={enter:n}),this.isRootNode?this.children.forEach((e=>{r(e,null,0)})):r(this,null,0)}toString(){const e=new m;return this.walk(((t,n,r)=>{if(!t)return this.SKIP;if("Alt"!==t.expr.constructor.name){if(e.append(function(e,t,n){const r=pe(e.slice(t,t+n));return r.length<n?r+u(" ",n-r.length).join(""):r}(t.input,t.pos,10)+u(" ",2*r+1).join("")),e.append((t.succeeded?"\u2713":"\u2717")+" "+t.displayString),t.isHeadOfLeftRecursion&&e.append(" (LR)"),t.succeeded){const n=pe(t.source.contents);e.append(" \u21d2  "),e.append("string"===typeof n?'"'+n+'"':n)}e.append("\n")}})),e.contents()}}let he,fe,me;de.prototype.SKIP={},Object.keys(ce).forEach((e=>{const t=ce[e];Object.defineProperty(de.prototype,e,{get(){return 0!==(this._flags&t)},set(e){e?this._flags|=t:this._flags&=~t}})})),w.prototype.allowsSkippingPrecedingSpace=s("allowsSkippingPrecedingSpace"),S.allowsSkippingPrecedingSpace=x.allowsSkippingPrecedingSpace=j.prototype.allowsSkippingPrecedingSpace=k.prototype.allowsSkippingPrecedingSpace=_.prototype.allowsSkippingPrecedingSpace=D.prototype.allowsSkippingPrecedingSpace=function(){return!0},C.prototype.allowsSkippingPrecedingSpace=P.prototype.allowsSkippingPrecedingSpace=M.prototype.allowsSkippingPrecedingSpace=F.prototype.allowsSkippingPrecedingSpace=N.prototype.allowsSkippingPrecedingSpace=I.prototype.allowsSkippingPrecedingSpace=O.prototype.allowsSkippingPrecedingSpace=function(){return!1},J((e=>{he=e})),w.prototype.assertAllApplicationsAreValid=function(e,t){fe=0,this._assertAllApplicationsAreValid(e,t)},w.prototype._assertAllApplicationsAreValid=s("_assertAllApplicationsAreValid"),S._assertAllApplicationsAreValid=x._assertAllApplicationsAreValid=k.prototype._assertAllApplicationsAreValid=_.prototype._assertAllApplicationsAreValid=I.prototype._assertAllApplicationsAreValid=D.prototype._assertAllApplicationsAreValid=function(e,t){},M.prototype._assertAllApplicationsAreValid=function(e,t){fe++,this.expr._assertAllApplicationsAreValid(e,t),fe--},C.prototype._assertAllApplicationsAreValid=function(e,t){for(let n=0;n<this.terms.length;n++)this.terms[n]._assertAllApplicationsAreValid(e,t)},O.prototype._assertAllApplicationsAreValid=function(e,t){for(let n=0;n<this.factors.length;n++)this.factors[n]._assertAllApplicationsAreValid(e,t)},P.prototype._assertAllApplicationsAreValid=N.prototype._assertAllApplicationsAreValid=F.prototype._assertAllApplicationsAreValid=function(e,t){this.expr._assertAllApplicationsAreValid(e,t)},j.prototype._assertAllApplicationsAreValid=function(e,t,n=!1){const r=t.rules[this.ruleName],i=d(e)&&0===fe;if(!r)throw V(this.ruleName,t.name,this.source);if(!n&&d(this.ruleName)&&!i)throw function(e,t){return $("Cannot apply syntactic rule "+e+" from here (inside a lexical context)",t.source)}(this.ruleName,this);const s=this.args.length,a=r.formals.length;if(s!==a)throw function(e,t,n,r){return $("Wrong number of arguments for rule "+e+" (expected "+t+", got "+n+")",r)}(this.ruleName,a,s,this.source);const o=he&&r===he.rules.applySyntactic;if(he&&r===he.rules.caseInsensitive&&!(this.args[0]instanceof k))throw H('a Terminal (e.g. "abc")',this.args[0]);if(o){const e=this.args[0];if(!(e instanceof j))throw H("a syntactic rule application",e);if(!d(e.ruleName))throw function(e){const{ruleName:t}=e;return $(`applySyntactic is for syntactic rules, but '${t}' is a lexical rule. NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.`,e.source)}(e);if(i)throw $("applySyntactic is not required here (in a syntactic context)",this.source)}this.args.forEach((n=>{if(n._assertAllApplicationsAreValid(e,t,o),1!==n.getArity())throw function(e,t){return $("Invalid parameter to rule "+e+": "+t+" has arity "+t.getArity()+", but parameter expressions must have arity 1",t.source)}(this.ruleName,n)}))},w.prototype.assertChoicesHaveUniformArity=s("assertChoicesHaveUniformArity"),S.assertChoicesHaveUniformArity=x.assertChoicesHaveUniformArity=k.prototype.assertChoicesHaveUniformArity=_.prototype.assertChoicesHaveUniformArity=I.prototype.assertChoicesHaveUniformArity=M.prototype.assertChoicesHaveUniformArity=D.prototype.assertChoicesHaveUniformArity=function(e){},C.prototype.assertChoicesHaveUniformArity=function(e){if(0===this.terms.length)return;const t=this.terms[0].getArity();for(let n=0;n<this.terms.length;n++){const r=this.terms[n];r.assertChoicesHaveUniformArity();const i=r.getArity();if(t!==i)throw q(e,t,i,r)}},A.prototype.assertChoicesHaveUniformArity=function(e){const t=this.terms[0].getArity(),n=this.terms[1].getArity();if(t!==n)throw q(e,n,t,this.terms[0])},O.prototype.assertChoicesHaveUniformArity=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertChoicesHaveUniformArity(e)},P.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},N.prototype.assertChoicesHaveUniformArity=function(e){},F.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},j.prototype.assertChoicesHaveUniformArity=function(e){},w.prototype.assertIteratedExprsAreNotNullable=s("assertIteratedExprsAreNotNullable"),S.assertIteratedExprsAreNotNullable=x.assertIteratedExprsAreNotNullable=k.prototype.assertIteratedExprsAreNotNullable=_.prototype.assertIteratedExprsAreNotNullable=I.prototype.assertIteratedExprsAreNotNullable=D.prototype.assertIteratedExprsAreNotNullable=function(e){},C.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.terms.length;t++)this.terms[t].assertIteratedExprsAreNotNullable(e)},O.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertIteratedExprsAreNotNullable(e)},P.prototype.assertIteratedExprsAreNotNullable=function(e){if(this.expr.assertIteratedExprsAreNotNullable(e),this.expr.isNullable(e))throw G(this,[])},T.prototype.assertIteratedExprsAreNotNullable=N.prototype.assertIteratedExprsAreNotNullable=F.prototype.assertIteratedExprsAreNotNullable=M.prototype.assertIteratedExprsAreNotNullable=function(e){this.expr.assertIteratedExprsAreNotNullable(e)},j.prototype.assertIteratedExprsAreNotNullable=function(e){this.args.forEach((t=>{t.assertIteratedExprsAreNotNullable(e)}))};class ge{constructor(e){this.matchLength=e}get ctorName(){throw new Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(e){if(this.children)return this.children[e]}indexOfChild(e){return this.children.indexOf(e)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(1!==this.numChildren())throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(e){const t=this.indexOfChild(e);if(t<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(0===t)throw new Error("cannot get child before first child");return this.childAt(t-1)}childAfter(e){const t=this.indexOfChild(e);if(t<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(t===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(t+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}}class ye extends ge{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw new Error("The `primitiveValue` property was removed in Ohm v17.")}}class ve extends ge{constructor(e,t,n,r){super(r),this.ruleName=e,this.children=t,this.childOffsets=n}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return h(this.ctorName)}isSyntactic(){return d(this.ctorName)}}class be extends ge{constructor(e,t,n,r){super(n),this.children=e,this.childOffsets=t,this.optional=r}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}}function we(e,t){const n={};if(e.source&&t){const r=e.source.relativeTo(t);n.sourceInterval=[r.startIdx,r.endIdx]}return n}function Se(e){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)}function xe(e){const t=Object.create(null);e.forEach((e=>{t[e]=(t[e]||0)+1})),Object.keys(t).forEach((n=>{if(t[n]<=1)return;let r=1;e.forEach(((t,i)=>{t===n&&(e[i]=t+"_"+r++)}))}))}w.prototype.eval=s("eval"),S.eval=function(e){const{inputStream:t}=e,n=t.pos,r=t.nextCodePoint();return void 0!==r?(e.pushBinding(new ye(String.fromCodePoint(r).length),n),!0):(e.processFailure(n,this),!1)},x.eval=function(e){const{inputStream:t}=e,n=t.pos;return t.atEnd()?(e.pushBinding(new ye(0),n),!0):(e.processFailure(n,this),!1)},k.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos;return t.matchString(this.obj)?(e.pushBinding(new ye(this.obj.length),n),!0):(e.processFailure(n,this),!1)},_.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos,r=this.matchCodePoint?t.nextCodePoint():t.nextCharCode();return void 0!==r&&this.from.codePointAt(0)<=r&&r<=this.to.codePointAt(0)?(e.pushBinding(new ye(String.fromCodePoint(r).length),n),!0):(e.processFailure(n,this),!1)},I.prototype.eval=function(e){return e.eval(e.currentApplication().args[this.index])},M.prototype.eval=function(e){e.enterLexifiedContext();const t=e.eval(this.expr);return e.exitLexifiedContext(),t},C.prototype.eval=function(e){for(let t=0;t<this.terms.length;t++)if(e.eval(this.terms[t]))return!0;return!1},O.prototype.eval=function(e){for(let t=0;t<this.factors.length;t++){const n=this.factors[t];if(!e.eval(n))return!1}return!0},P.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos,r=this.getArity(),i=[],s=[];for(;i.length<r;)i.push([]),s.push([]);let a,o=0,l=n;for(;o<this.maxNumMatches&&e.eval(this.expr);){if(t.pos===l)throw G(this,e._applicationStack);l=t.pos,o++;const n=e._bindings.splice(e._bindings.length-r,r),u=e._bindingOffsets.splice(e._bindingOffsets.length-r,r);for(a=0;a<n.length;a++)i[a].push(n[a]),s[a].push(u[a])}if(o<this.minNumMatches)return!1;let u=e.posToOffset(n),c=0;if(o>0){const e=i[r-1],t=s[r-1],n=t[t.length-1]+e[e.length-1].matchLength;u=s[0][0],c=n-u}const p=this instanceof T;for(a=0;a<i.length;a++)e._bindings.push(new be(i[a],s[a],c,p)),e._bindingOffsets.push(u);return!0},N.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos;e.pushFailuresInfo();const r=e.eval(this.expr);return e.popFailuresInfo(),r?(e.processFailure(n,this),!1):(t.pos=n,!0)},F.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos;return!!e.eval(this.expr)&&(t.pos=n,!0)},j.prototype.eval=function(e){const t=e.currentApplication(),n=t?t.args:[],r=this.substituteParams(n),i=e.getCurrentPosInfo();if(i.isActive(r))return r.handleCycle(e);const s=r.toMemoKey(),a=i.memo[s];if(a&&i.shouldUseMemoizedResult(a)){if(e.hasNecessaryInfo(a))return e.useMemoizedResult(e.inputStream.pos,a);delete i.memo[s]}return r.reallyEval(e)},j.prototype.handleCycle=function(e){const t=e.getCurrentPosInfo(),{currentLeftRecursion:n}=t,r=this.toMemoKey();let i=t.memo[r];return n&&n.headApplication.toMemoKey()===r?i.updateInvolvedApplicationMemoKeys():i||(i=t.memoize(r,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),t.startLeftRecursion(this,i)),e.useMemoizedResult(e.inputStream.pos,i)},j.prototype.reallyEval=function(e){const{inputStream:t}=e,n=t.pos,r=e.getCurrentPosInfo(),i=e.grammar.rules[this.ruleName],{body:s}=i,{description:o}=i;e.enterApplication(r,this),o&&e.pushFailuresInfo();const l=t.examinedLength;t.examinedLength=0;let u=this.evalOnce(s,e);const c=r.currentLeftRecursion,p=this.toMemoKey(),d=c&&c.headApplication.toMemoKey()===p;let h;e.doNotMemoize?e.doNotMemoize=!1:d?(u=this.growSeedResult(s,e,n,c,u),r.endLeftRecursion(),h=c,h.examinedLength=t.examinedLength-n,h.rightmostFailureOffset=e._getRightmostFailureOffset(),r.memoize(p,h)):c&&c.isInvolved(p)||(h=r.memoize(p,{matchLength:t.pos-n,examinedLength:t.examinedLength-n,value:u,failuresAtRightmostPosition:e.cloneRecordedFailures(),rightmostFailureOffset:e._getRightmostFailureOffset()}));const f=!!u;if(o&&(e.popFailuresInfo(),f||e.processFailure(n,this),h&&(h.failuresAtRightmostPosition=e.cloneRecordedFailures())),e.isTracing()&&h){const t=e.getTraceEntry(n,this,f,f?[u]:[]);d&&(a(null!=t.terminatingLREntry||!f),t.isHeadOfLeftRecursion=!0),h.traceEntry=t}return t.examinedLength=Math.max(t.examinedLength,l),e.exitApplication(r,u),f},j.prototype.evalOnce=function(e,t){const{inputStream:n}=t,r=n.pos;if(t.eval(e)){const i=e.getArity(),s=t._bindings.splice(t._bindings.length-i,i),a=t._bindingOffsets.splice(t._bindingOffsets.length-i,i),o=n.pos-r;return new ve(this.ruleName,s,a,o)}return!1},j.prototype.growSeedResult=function(e,t,n,r,i){if(!i)return!1;const{inputStream:s}=t;for(;;){if(r.matchLength=s.pos-n,r.value=i,r.failuresAtRightmostPosition=t.cloneRecordedFailures(),t.isTracing()){const e=t.trace[t.trace.length-1];r.traceEntry=new de(t.input,n,s.pos,this,!0,[i],[e.clone()])}if(s.pos=n,i=this.evalOnce(e,t),s.pos-n<=r.matchLength)break;t.isTracing()&&t.trace.splice(-2,1)}return t.isTracing()&&r.traceEntry.recordLRTermination(t.trace.pop(),i),s.pos=n+r.matchLength,r.value},D.prototype.eval=function(e){const{inputStream:t}=e,n=t.pos,r=t.next();return r&&this.pattern.test(r)?(e.pushBinding(new ye(r.length),n),!0):(e.processFailure(n,this),!1)},w.prototype.getArity=s("getArity"),S.getArity=x.getArity=k.prototype.getArity=_.prototype.getArity=I.prototype.getArity=j.prototype.getArity=D.prototype.getArity=function(){return 1},C.prototype.getArity=function(){return 0===this.terms.length?0:this.terms[0].getArity()},O.prototype.getArity=function(){let e=0;for(let t=0;t<this.factors.length;t++)e+=this.factors[t].getArity();return e},P.prototype.getArity=function(){return this.expr.getArity()},N.prototype.getArity=function(){return 0},F.prototype.getArity=M.prototype.getArity=function(){return this.expr.getArity()},w.prototype.outputRecipe=s("outputRecipe"),S.outputRecipe=function(e,t){return["any",we(this,t)]},x.outputRecipe=function(e,t){return["end",we(this,t)]},k.prototype.outputRecipe=function(e,t){return["terminal",we(this,t),this.obj]},_.prototype.outputRecipe=function(e,t){return["range",we(this,t),this.from,this.to]},I.prototype.outputRecipe=function(e,t){return["param",we(this,t),this.index]},C.prototype.outputRecipe=function(e,t){return["alt",we(this,t)].concat(this.terms.map((n=>n.outputRecipe(e,t))))},A.prototype.outputRecipe=function(e,t){return this.terms[0].outputRecipe(e,t)},E.prototype.outputRecipe=function(e,t){const n=this.terms.slice(0,this.expansionPos),r=this.terms.slice(this.expansionPos+1);return["splice",we(this,t),n.map((n=>n.outputRecipe(e,t))),r.map((n=>n.outputRecipe(e,t)))]},O.prototype.outputRecipe=function(e,t){return["seq",we(this,t)].concat(this.factors.map((n=>n.outputRecipe(e,t))))},L.prototype.outputRecipe=R.prototype.outputRecipe=T.prototype.outputRecipe=N.prototype.outputRecipe=F.prototype.outputRecipe=M.prototype.outputRecipe=function(e,t){return[this.constructor.name.toLowerCase(),we(this,t),this.expr.outputRecipe(e,t)]},j.prototype.outputRecipe=function(e,t){return["app",we(this,t),this.ruleName,this.args.map((n=>n.outputRecipe(e,t)))]},D.prototype.outputRecipe=function(e,t){return["unicodeChar",we(this,t),this.category]},w.prototype.introduceParams=s("introduceParams"),S.introduceParams=x.introduceParams=k.prototype.introduceParams=_.prototype.introduceParams=I.prototype.introduceParams=D.prototype.introduceParams=function(e){return this},C.prototype.introduceParams=function(e){return this.terms.forEach(((t,n,r)=>{r[n]=t.introduceParams(e)})),this},O.prototype.introduceParams=function(e){return this.factors.forEach(((t,n,r)=>{r[n]=t.introduceParams(e)})),this},P.prototype.introduceParams=N.prototype.introduceParams=F.prototype.introduceParams=M.prototype.introduceParams=function(e){return this.expr=this.expr.introduceParams(e),this},j.prototype.introduceParams=function(e){const t=e.indexOf(this.ruleName);if(t>=0){if(this.args.length>0)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new I(t).withSource(this.source)}return this.args.forEach(((t,n,r)=>{r[n]=t.introduceParams(e)})),this},w.prototype.isNullable=function(e){return this._isNullable(e,Object.create(null))},w.prototype._isNullable=s("_isNullable"),S._isNullable=_.prototype._isNullable=I.prototype._isNullable=R.prototype._isNullable=D.prototype._isNullable=function(e,t){return!1},x._isNullable=function(e,t){return!0},k.prototype._isNullable=function(e,t){return"string"===typeof this.obj&&""===this.obj},C.prototype._isNullable=function(e,t){return 0===this.terms.length||this.terms.some((n=>n._isNullable(e,t)))},O.prototype._isNullable=function(e,t){return this.factors.every((n=>n._isNullable(e,t)))},L.prototype._isNullable=T.prototype._isNullable=N.prototype._isNullable=F.prototype._isNullable=function(e,t){return!0},M.prototype._isNullable=function(e,t){return this.expr._isNullable(e,t)},j.prototype._isNullable=function(e,t){const n=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(t,n)){const{body:r}=e.rules[this.ruleName],i=r.substituteParams(this.args);t[n]=!1,t[n]=i._isNullable(e,t)}return t[n]},w.prototype.substituteParams=s("substituteParams"),S.substituteParams=x.substituteParams=k.prototype.substituteParams=_.prototype.substituteParams=D.prototype.substituteParams=function(e){return this},I.prototype.substituteParams=function(e){return e[this.index]},C.prototype.substituteParams=function(e){return new C(this.terms.map((t=>t.substituteParams(e))))},O.prototype.substituteParams=function(e){return new O(this.factors.map((t=>t.substituteParams(e))))},P.prototype.substituteParams=N.prototype.substituteParams=F.prototype.substituteParams=M.prototype.substituteParams=function(e){return new this.constructor(this.expr.substituteParams(e))},j.prototype.substituteParams=function(e){if(0===this.args.length)return this;{const t=this.args.map((t=>t.substituteParams(e)));return new j(this.ruleName,t)}},w.prototype.toArgumentNameList=s("toArgumentNameList"),S.toArgumentNameList=function(e,t){return["any"]},x.toArgumentNameList=function(e,t){return["end"]},k.prototype.toArgumentNameList=function(e,t){return"string"===typeof this.obj&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+e]},_.prototype.toArgumentNameList=function(e,t){let n=this.from+"_to_"+this.to;return Se(n)||(n="_"+n),Se(n)||(n="$"+e),[n]},C.prototype.toArgumentNameList=function(e,t){const n=this.terms.map((t=>t.toArgumentNameList(e,!0))),r=[],i=n[0].length;for(let s=0;s<i;s++){const e=[];for(let r=0;r<this.terms.length;r++)e.push(n[r][s]);const t=p(e);r.push(t.join("_or_"))}return t||xe(r),r},O.prototype.toArgumentNameList=function(e,t){let n=[];return this.factors.forEach((t=>{const r=t.toArgumentNameList(e,!0);n=n.concat(r),e+=r.length})),t||xe(n),n},P.prototype.toArgumentNameList=function(e,t){const n=this.expr.toArgumentNameList(e,t).map((e=>"s"===e[e.length-1]?e+"es":e+"s"));return t||xe(n),n},T.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t).map((e=>"opt"+e[0].toUpperCase()+e.slice(1)))},N.prototype.toArgumentNameList=function(e,t){return[]},F.prototype.toArgumentNameList=M.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t)},j.prototype.toArgumentNameList=function(e,t){return[this.ruleName]},D.prototype.toArgumentNameList=function(e,t){return["$"+e]},I.prototype.toArgumentNameList=function(e,t){return["param"+this.index]},w.prototype.toDisplayString=s("toDisplayString"),C.prototype.toDisplayString=O.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"},S.toDisplayString=x.toDisplayString=P.prototype.toDisplayString=N.prototype.toDisplayString=F.prototype.toDisplayString=M.prototype.toDisplayString=k.prototype.toDisplayString=_.prototype.toDisplayString=I.prototype.toDisplayString=function(){return this.toString()},j.prototype.toDisplayString=function(){if(this.args.length>0){const e=this.args.map((e=>e.toDisplayString()));return this.ruleName+"<"+e.join(",")+">"}return this.ruleName},D.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};class ke{constructor(e,t,n){if(!function(e){return"description"===e||"string"===e||"code"===e}(n))throw new Error("invalid Failure type: "+n);this.pexpr=e,this.text=t,this.type=n,this.fluffy=!1}getPExpr(){return this.pexpr}getText(){return this.text}getType(){return this.type}isDescription(){return"description"===this.type}isStringTerminal(){return"string"===this.type}isCode(){return"code"===this.type}isFluffy(){return this.fluffy}makeFluffy(){this.fluffy=!0}clearFluffy(){this.fluffy=!1}subsumes(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())}toString(){return"string"===this.type?JSON.stringify(this.getText()):this.getText()}clone(){const e=new ke(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e}toKey(){return this.toString()+"#"+this.type}}w.prototype.toFailure=s("toFailure"),S.toFailure=function(e){return new ke(this,"any object","description")},x.toFailure=function(e){return new ke(this,"end of input","description")},k.prototype.toFailure=function(e){return new ke(this,this.obj,"string")},_.prototype.toFailure=function(e){return new ke(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")},N.prototype.toFailure=function(e){const t=this.expr===S?"nothing":"not "+this.expr.toFailure(e);return new ke(this,t,"description")},F.prototype.toFailure=function(e){return this.expr.toFailure(e)},j.prototype.toFailure=function(e){let{description:t}=e.rules[this.ruleName];if(!t){t=(/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a")+" "+this.ruleName}return new ke(this,t,"description")},D.prototype.toFailure=function(e){return new ke(this,"a Unicode ["+this.category+"] character","description")},C.prototype.toFailure=function(e){const t="("+this.terms.map((t=>t.toFailure(e))).join(" or ")+")";return new ke(this,t,"description")},O.prototype.toFailure=function(e){const t=this.factors.map((t=>t.toFailure(e))),n="("+t.join(" ")+")";return new ke(this,n,"description")},P.prototype.toFailure=function(e){const t="("+this.expr.toFailure(e)+this.operator+")";return new ke(this,t,"description")},w.prototype.toString=s("toString"),S.toString=function(){return"any"},x.toString=function(){return"end"},k.prototype.toString=function(){return JSON.stringify(this.obj)},_.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)},I.prototype.toString=function(){return"$"+this.index},M.prototype.toString=function(){return"#("+this.expr.toString()+")"},C.prototype.toString=function(){return 1===this.terms.length?this.terms[0].toString():"("+this.terms.map((e=>e.toString())).join(" | ")+")"},O.prototype.toString=function(){return 1===this.factors.length?this.factors[0].toString():"("+this.factors.map((e=>e.toString())).join(" ")+")"},P.prototype.toString=function(){return this.expr+this.operator},N.prototype.toString=function(){return"~"+this.expr},F.prototype.toString=function(){return"&"+this.expr},j.prototype.toString=function(){if(this.args.length>0){const e=this.args.map((e=>e.toString()));return this.ruleName+"<"+e.join(",")+">"}return this.ruleName},D.prototype.toString=function(){return"\\p{"+this.category+"}"};class _e extends w{constructor(e){super(),this.obj=e}_getString(e){const t=e.currentApplication().args[this.obj.index];return a(t instanceof k,"expected a Terminal expression"),t.obj}allowsSkippingPrecedingSpace(){return!0}eval(e){const{inputStream:t}=e,n=t.pos,r=this._getString(e);return t.matchString(r,!0)?(e.pushBinding(new ye(r.length),n),!0):(e.processFailure(n,this),!1)}getArity(){return 1}substituteParams(e){return new _e(this.obj.substituteParams(e))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(e){return new ke(this,this.obj.toFailure(e)+" (case-insensitive)","description")}_isNullable(e,t){return this.obj._isNullable(e,t)}}J((e=>{me=e.rules.applySyntactic.body}));const Ie=new j("spaces");class Ce{constructor(e,t,n){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.getInput(),this.inputStream=new re(this.input),this.memoTable=e._memoTable,this.userData=void 0,this.doNotMemoize=!1,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],void 0!==n&&(this.positionToRecordFailures=n,this.recordedFailures=Object.create(null))}posToOffset(e){return e-this._posStack[this._posStack.length-1]}enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1}exitApplication(e,t){const n=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,n)}enterLexifiedContext(){this.inLexifiedContextStack.push(!0)}exitLexifiedContext(){this.inLexifiedContextStack.pop()}currentApplication(){return this._applicationStack[this._applicationStack.length-1]}inSyntacticContext(){const e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()}inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]}skipSpaces(){return this.pushFailuresInfo(),this.eval(Ie),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos}skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos}maybeSkipSpacesBefore(e){return e.allowsSkippingPrecedingSpace()&&e!==Ie?this.skipSpacesIfInSyntacticContext():this.inputStream.pos}pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))}popBinding(){this._bindings.pop(),this._bindingOffsets.pop()}numBindings(){return this._bindings.length}truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()}getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)}getPosInfo(e){let t=this.memoTable[e];return t||(t=this.memoTable[e]=new se),t}processFailure(e,t){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures){const e=this.currentApplication();e&&(t=t.substituteParams(e.args)),this.recordFailure(t.toFailure(this.grammar),!1)}}recordFailure(e,t){const n=e.toKey();this.recordedFailures[n]?this.recordedFailures[n].isFluffy()&&!e.isFluffy()&&this.recordedFailures[n].clearFluffy():this.recordedFailures[n]=t?e.clone():e}recordFailures(e,t){Object.keys(e).forEach((n=>{this.recordFailure(e[n],t)}))}cloneRecordedFailures(){if(!this.recordedFailures)return;const e=Object.create(null);return Object.keys(this.recordedFailures).forEach((t=>{e[t]=this.recordedFailures[t].clone()})),e}getRightmostFailurePosition(){return this.rightmostFailurePosition}_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1}getMemoizedTraceEntry(e,t){const n=this.memoTable[e];if(n&&t instanceof j){const e=n.memo[t.toMemoKey()];if(e&&e.traceEntry){const n=e.traceEntry.cloneWithExpr(t);return n.isMemoized=!0,n}}return null}getTraceEntry(e,t,n,r){if(t instanceof j){const e=this.currentApplication(),n=e?e.args:[];t=t.substituteParams(n)}return this.getMemoizedTraceEntry(e,t)||new de(this.input,e,this.inputStream.pos,t,n,r,this.trace)}isTracing(){return!!this.trace}hasNecessaryInfo(e){return!(this.trace&&!e.traceEntry)&&(!this.recordedFailures||this.inputStream.pos+e.rightmostFailureOffset!==this.positionToRecordFailures||!!e.failuresAtRightmostPosition)}useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);const n=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,n),this.recordedFailures&&this.positionToRecordFailures===n&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),!!t.value&&(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0)}eval(e){const{inputStream:t}=this,n=this._bindings.length,r=this.userData;let i;this.recordedFailures&&(i=this.recordedFailures,this.recordedFailures=Object.create(null));const s=t.pos,a=this.maybeSkipSpacesBefore(e);let o;this.trace&&(o=this.trace,this.trace=[]);const l=e.eval(this);if(this.trace){const t=this._bindings.slice(n),r=this.getTraceEntry(a,e,l,t);r.isImplicitSpaces=e===Ie,r.isRootNode=e===this.startExpr,o.push(r),this.trace=o}return l?this.recordedFailures&&t.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach((e=>{this.recordedFailures[e].makeFluffy()})):(t.pos=s,this.truncateBindings(n),this.userData=r),this.recordedFailures&&this.recordFailures(i,!1),e===me&&this.skipSpaces(),l}getMatchResult(){let e;this.grammar._setUpMatchState(this),this.eval(this.startExpr),this.recordedFailures&&(e=Object.keys(this.recordedFailures).map((e=>this.recordedFailures[e])));const t=this._bindings[0];return t&&(t.grammar=this.grammar),new ie(this.matcher,this.input,this.startExpr,t,this._bindingOffsets[0],this.rightmostFailurePosition,e)}getTrace(){this.trace=[];const e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t}pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)}popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}}class Ae{constructor(e){this.grammar=e,this._memoTable=[],this._input="",this._isMemoTableStale=!1}_resetMemoTable(){this._memoTable=[],this._isMemoTableStale=!1}getInput(){return this._input}setInput(e){return this._input!==e&&this.replaceInputRange(0,this._input.length,e),this}replaceInputRange(e,t,n){const r=this._input,i=this._memoTable;if(e<0||e>r.length||t<0||t>r.length||e>t)throw new Error("Invalid indices: "+e+" and "+t);this._input=r.slice(0,e)+n+r.slice(t),this._input!==r&&i.length>0&&(this._isMemoTableStale=!0);const s=i.slice(t);i.length=e;for(let a=0;a<n.length;a++)i.push(void 0);for(const a of s)i.push(a);for(let a=0;a<e;a++){const t=i[a];t&&t.clearObsoleteEntries(a,e)}return this}match(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!1})}trace(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!0})}_match(e,t={}){const n={tracing:!1,incremental:!0,positionToRecordFailures:void 0,...t};if(n.incremental){if(this._isMemoTableStale&&!this.grammar.supportsIncrementalParsing)throw function(e){return $(`Grammar '${e.name}' does not support incremental parsing`)}(this.grammar)}else this._resetMemoTable();const r=new Ce(this,e,n.positionToRecordFailures);return n.tracing?r.getTrace():r.getMatchResult()}_getStartExpr(e){const t=e||this.grammar.defaultStartRule;if(!t)throw new Error("Missing start rule argument -- the grammar has no default start rule.");const n=this.grammar.parseApplication(t);return new O([n,x])}}const Ee=[],Oe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class Pe{constructor(e,t,n){this._node=e,this.source=t,this._baseInterval=n,e.isNonterminal()&&a(t===n),this._childWrappers=[]}_forgetMemoizedResultFor(e){delete this._node[this._semantics.attributeKeys[e]],this.children.forEach((t=>{t._forgetMemoizedResultFor(e)}))}child(e){if(!(0<=e&&e<this._node.numChildren()))return;let t=this._childWrappers[e];if(!t){const n=this._node.childAt(e),r=this._node.childOffsets[e],i=this._baseInterval.subInterval(r,n.matchLength),s=n.isNonterminal()?i:this._baseInterval;t=this._childWrappers[e]=this._semantics.wrap(n,i,s)}return t}_children(){for(let e=0;e<this._node.numChildren();e++)this.child(e);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(e){const t=e||[],n=t.map((e=>e._node)),r=new be(n,[],-1,!1),i=this._semantics.wrap(r,null,null);return i._childWrappers=t,i}get children(){return this._children()}get ctorName(){return this._node.ctorName}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}}class Le{constructor(e,t){const n=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:Pe){constructor(e,t,r){super(e,t,r),n.checkActionDictsIfHaventAlready(),this._semantics=n}toString(){return"[semantics wrapper for "+n.grammar.name+"]"}},this.super=t,t){if(!e.equals(this.super.grammar)&&!e._inheritsFrom(this.super.grammar))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+e.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(const e in this.attributes)Object.defineProperty(this.attributeKeys,e,{value:te(e)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}toString(){return"[semantics for "+this.grammar.name+"]"}checkActionDictsIfHaventAlready(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)}checkActionDicts(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)}toRecipe(e){function t(e){return e.super!==Le.BuiltInSemantics._getSemantics()}let n="(function(g) {\n";if(t(this)){n+="  var semantics = "+this.super.toRecipe(!0)+"(g";const e=this.super.grammar;let t=this.grammar;for(;t!==e;)n+=".superGrammar",t=t.superGrammar;n+=");\n",n+="  return g.extendSemantics(semantics)"}else n+="  return g.createSemantics()";return["Operation","Attribute"].forEach((e=>{const r=this[e.toLowerCase()+"s"];Object.keys(r).forEach((i=>{const{actionDict:s,formals:a,builtInDefault:o}=r[i];let l,u=i;a.length>0&&(u+="("+a.join(", ")+")"),l=t(this)&&this.super[e.toLowerCase()+"s"][i]?"extend"+e:"add"+e,n+="\n    ."+l+"("+JSON.stringify(u)+", {";const c=[];Object.keys(s).forEach((e=>{if(s[e]!==o){let t=s[e].toString().trim();t=t.replace(/^.*\(/,"function("),c.push("\n      "+JSON.stringify(e)+": "+t)}})),n+=c.join(",")+"\n    })"}))})),n+=";\n  })",e||(n="(function() {\n  var grammar = this.fromRecipe("+this.grammar.toRecipe()+");\n  var semantics = "+n+"(grammar);\n  return semantics;\n});\n"),n}addOperationOrAttribute(e,t,n){const r=e+"s",i=Re(t,e),{name:s}=i,{formals:a}=i;this.assertNewName(s,e);const o=function(e,t,n){return function(...r){const i=(this._semantics.operations[t]||this._semantics.attributes[t]).formals.map((e=>this.args[e]));if(this.isIteration()||1!==r.length)throw function(e,t,n,r){let i=r.slice(0,-1).map((e=>{const t="  "+e[0].name+" > "+e[1];return 3===e.length?t+" for '"+e[2]+"'":t})).join("\n");i+="\n  "+t+" > "+e;let s="";"_iter"===e&&(s=["\nNOTE: as of Ohm v16, there is no default action for iteration nodes \u2014 see ","  https://ohmjs.org/d/dsa for details."].join("\n"));const a=$([`Missing semantic action for '${e}' in ${n} '${t}'.${s}`,"Action stack (most recent call last):",i].join("\n"));return a.name="missingSemanticAction",a}(this.ctorName,t,e,Ee);return n.apply(r[0],i)}}(e,s,c),l={_default:o};Object.keys(n).forEach((e=>{l[e]=n[e]}));const u="operation"===e?new Te(s,a,l,o):new Ne(s,l,o);function c(...t){const n=this._semantics[r][s];if(arguments.length!==n.formals.length)throw new Error("Invalid number of arguments passed to "+s+" "+e+" (expected "+n.formals.length+", got "+arguments.length+")");const i=Object.create(null);for(const[e,r]of Object.entries(t)){i[n.formals[e]]=r}const a=this.args;this.args=i;const o=n.execute(this._semantics,this);return this.args=a,o}u.checkActionDict(this.grammar),this[r][s]=u,"operation"===e?(this.Wrapper.prototype[s]=c,this.Wrapper.prototype[s].toString=function(){return"["+s+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,s,{get:c,configurable:!0}),Object.defineProperty(this.attributeKeys,s,{value:te(s)}))}extendOperationOrAttribute(e,t,n){const r=e+"s";if(Re(t,"attribute"),!this.super||!(t in this.super[r]))throw new Error("Cannot extend "+e+" '"+t+"': did not inherit an "+e+" with that name");if(Oe(this[r],t))throw new Error("Cannot extend "+e+" '"+t+"' again");const i=this[r][t].formals,s=this[r][t].actionDict,a=Object.create(s);Object.keys(n).forEach((e=>{a[e]=n[e]})),this[r][t]="operation"===e?new Te(t,i,a):new Ne(t,a),this[r][t].checkActionDict(this.grammar)}assertNewName(e,t){if(Oe(Pe.prototype,e))throw new Error("Cannot add "+t+" '"+e+"': that's a reserved name");if(e in this.operations)throw new Error("Cannot add "+t+" '"+e+"': an operation with that name already exists");if(e in this.attributes)throw new Error("Cannot add "+t+" '"+e+"': an attribute with that name already exists")}wrap(e,t,n){const r=n||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,r)}}function Re(e,t){if(!Le.prototypeGrammar)return a(-1===e.indexOf("(")),{name:e,formals:[]};const n=Le.prototypeGrammar.match(e,"operation"===t?"OperationSignature":"AttributeSignature");if(n.failed())throw new Error(n.message);return Le.prototypeGrammarSemantics(n).parse()}Le.createSemantics=function(e,t){const n=new Le(e,void 0!==t?t:Le.BuiltInSemantics._getSemantics()),r=function(t){if(!(t instanceof ie))throw new TypeError("Semantics expected a MatchResult, but got "+v(t));if(t.failed())throw new TypeError("cannot apply Semantics to "+t.toString());const r=t._cst;if(r.grammar!==e)throw new Error("Cannot use a MatchResult from grammar '"+r.grammar.name+"' with a semantics for '"+e.name+"'");const i=new re(t.input);return n.wrap(r,i.interval(t._cstOffset,t.input.length))};return r.addOperation=function(e,t){return n.addOperationOrAttribute("operation",e,t),r},r.extendOperation=function(e,t){return n.extendOperationOrAttribute("operation",e,t),r},r.addAttribute=function(e,t){return n.addOperationOrAttribute("attribute",e,t),r},r.extendAttribute=function(e,t){return n.extendOperationOrAttribute("attribute",e,t),r},r._getActionDict=function(t){const r=n.operations[t]||n.attributes[t];if(!r)throw new Error('"'+t+'" is not a valid operation or attribute name in this semantics for "'+e.name+'"');return r.actionDict},r._remove=function(e){let t;return e in n.operations?(t=n.operations[e],delete n.operations[e]):e in n.attributes&&(t=n.attributes[e],delete n.attributes[e]),delete n.Wrapper.prototype[e],t},r.getOperationNames=function(){return Object.keys(n.operations)},r.getAttributeNames=function(){return Object.keys(n.attributes)},r.getGrammar=function(){return n.grammar},r.toRecipe=function(e){return n.toRecipe(e)},r.toString=n.toString.bind(n),r._getSemantics=function(){return n},r};class Te{constructor(e,t,n,r){this.name=e,this.formals=t,this.actionDict=n,this.builtInDefault=r}checkActionDict(e){e._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(e,t){try{const{ctorName:e}=t._node;let n=this.actionDict[e];return n?(Ee.push([this,e]),n.apply(t,t._children())):t.isNonterminal()&&(n=this.actionDict._nonterminal,n)?(Ee.push([this,"_nonterminal",e]),n.apply(t,t._children())):(Ee.push([this,"default action",e]),this.actionDict._default.apply(t,t._children()))}finally{Ee.pop()}}}Te.prototype.typeName="operation";class Ne extends Te{constructor(e,t,n){super(e,[],t,n)}execute(e,t){const n=t._node,r=e.attributeKeys[this.name];return Oe(n,r)||(n[r]=Te.prototype.execute.call(this,e,t)),n[r]}}Ne.prototype.typeName="attribute";const Fe=["_iter","_terminal","_nonterminal","_default"];function Me(e){return Object.keys(e.rules).sort().map((t=>e.rules[t]))}let je,De;class $e{constructor(e,t,n,r){if(this.name=e,this.superGrammar=t,this.rules=n,r){if(!(r in n))throw new Error("Invalid start rule: '"+r+"' is not a rule in grammar '"+e+"'");this.defaultStartRule=r}this._matchStateInitializer=void 0,this.supportsIncrementalParsing=!0}matcher(){return new Ae(this)}isBuiltIn(){return this===$e.ProtoBuiltInRules||this===$e.BuiltInRules}equals(e){if(this===e)return!0;if(null==e||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||this.superGrammar!==e.superGrammar&&!this.superGrammar.equals(e.superGrammar))return!1;const t=Me(this),n=Me(e);return t.length===n.length&&t.every(((e,t)=>e.description===n[t].description&&e.formals.join(",")===n[t].formals.join(",")&&e.body.toString()===n[t].body.toString()))}match(e,t){const n=this.matcher();return n.replaceInputRange(0,0,e),n.match(t)}trace(e,t){const n=this.matcher();return n.replaceInputRange(0,0,e),n.trace(t)}createSemantics(){return Le.createSemantics(this)}extendSemantics(e){return Le.createSemantics(this,e._getSemantics())}_checkTopDownActionDict(e,t,n){const r=[];for(const i in n){const e=n[i];if(!Fe.includes(i)&&!(i in this.rules)){r.push(`'${i}' is not a valid semantic action for '${this.name}'`);continue}if("function"!==typeof e){r.push(`'${i}' must be a function in an action dictionary for '${this.name}'`);continue}const t=e.length,s=this._topDownActionArity(i);if(t!==s){let e;e="_iter"===i||"_nonterminal"===i?`it should use a rest parameter, e.g. \`${i}(...children) {}\`. NOTE: this is new in Ohm v16 \u2014 see https://ohmjs.org/d/ati for details.`:`expected ${s}, got ${t}`,r.push(`Semantic action '${i}' has the wrong arity: ${e}`)}}if(r.length>0){const n=r.map((e=>"- "+e)),i=new Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...n].join("\n"));throw i.problems=r,i}}_topDownActionArity(e){return Fe.includes(e)?0:this.rules[e].body.getArity()}_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1}toRecipe(e=void 0){const t={};this.source&&(t.source=this.source.contents);let n=null;this.defaultStartRule&&(n=this.defaultStartRule);const r={};Object.keys(this.rules).forEach((e=>{const t=this.rules[e],{body:n}=t,i=!this.superGrammar||!this.superGrammar.rules[e];let s;s=i?"define":n instanceof A?"extend":"override";const a={};if(t.source&&this.source){const e=t.source.relativeTo(this.source);a.sourceInterval=[e.startIdx,e.endIdx]}const o=i?t.description:null,l=n.outputRecipe(t.formals,this.source);r[e]=[s,a,o,t.formals,l]}));let i="null";e?i=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(i=this.superGrammar.toRecipe());const s=[...["grammar",t,this.name].map(JSON.stringify),i,...[n,r].map(JSON.stringify)];return`[${s.join(",")}]`.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}_toOperationOrAttributeActionDictionaryTemplate(){const e=new m;e.append("{");let t=!0;for(const n in this.rules){const{body:r}=this.rules[n];t?t=!1:e.append(","),e.append("\n"),e.append("  "),this.addSemanticActionTemplate(n,r,e)}return e.append("\n}"),e.contents()}addSemanticActionTemplate(e,t,n){n.append(e),n.append(": function(");const r=this._topDownActionArity(e);n.append(u("_",r).join(", ")),n.append(") {\n"),n.append("  }")}parseApplication(e){let t;if(-1===e.indexOf("<"))t=new j(e);else{const n=je.match(e,"Base_application");t=De(n,{})}if(!(t.ruleName in this.rules))throw V(t.ruleName,this.name);const{formals:n}=this.rules[t.ruleName];if(n.length!==t.args.length){const{source:e}=this.rules[t.ruleName];throw B(t.ruleName,n.length,t.args.length,e)}return t}_setUpMatchState(e){this._matchStateInitializer&&this._matchStateInitializer(e)}}$e.ProtoBuiltInRules=new $e("ProtoBuiltInRules",void 0,{any:{body:S,formals:[],description:"any character",primitive:!0},end:{body:x,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new _e(new I(0)),formals:["str"],primitive:!0},lower:{body:new D("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new D("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new D("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new L(new j("space")),formals:[]},space:{body:new _("\0"," "),formals:[],description:"a space"}}),$e.initApplicationParser=function(e,t){je=e,De=t};class ze{constructor(e){this.name=e}sourceInterval(e,t){return this.source.subInterval(e,t-e)}ensureSuperGrammar(){return this.superGrammar||this.withSuperGrammar("BuiltInRules"===this.name?$e.ProtoBuiltInRules:$e.BuiltInRules),this.superGrammar}ensureSuperGrammarRuleForOverriding(e,t){const n=this.ensureSuperGrammar().rules[e];if(!n)throw r=e,i=this.superGrammar.name,$("Cannot override rule "+r+" because it is not declared in "+i,t);var r,i;return n}installOverriddenOrExtendedRule(e,t,n,r){const i=c(t);if(i.length>0)throw W(e,i,r);const s=this.ensureSuperGrammar().rules[e],a=s.formals,o=a?a.length:0;if(t.length!==o)throw B(e,o,t.length,r);return this.install(e,t,n,s.description,r)}install(e,t,n,r,i,s=!1){return this.rules[e]={body:n.introduceParams(t),formals:t,description:r,source:i,primitive:s},this}withSuperGrammar(e){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this}withDefaultStartRule(e){return this.defaultStartRule=e,this}withSource(e){return this.source=new re(e).interval(0,e.length),this}build(){const e=new $e(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule);e._matchStateInitializer=e.superGrammar._matchStateInitializer,e.supportsIncrementalParsing=e.superGrammar.supportsIncrementalParsing;const t=[];let n=!1;return Object.keys(e.rules).forEach((r=>{const{body:i}=e.rules[r];try{i.assertChoicesHaveUniformArity(r)}catch(s){t.push(s)}try{i.assertAllApplicationsAreValid(r,e)}catch(s){t.push(s),n=!0}})),n||Object.keys(e.rules).forEach((n=>{const{body:r}=e.rules[n];try{r.assertIteratedExprsAreNotNullable(e,[])}catch(i){t.push(i)}})),t.length>0&&K(t),this.source&&(e.source=this.source),e}define(e,t,n,r,i,s){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw U(e,this.name,this.superGrammar.name,i);if(this.rules[e])throw U(e,this.name,this.name,i);const a=c(t);if(a.length>0)throw W(e,a,i);return this.install(e,t,n,r,i,s)}override(e,t,n,r,i){return this.ensureSuperGrammarRuleForOverriding(e,i),this.installOverriddenOrExtendedRule(e,t,n,i),this}extend(e,t,n,r,i){if(!this.ensureSuperGrammar().rules[e])throw s=e,a=this.superGrammar.name,$("Cannot extend rule "+s+" because it is not declared in "+a,i);var s,a;const o=new A(this.superGrammar,e,n);return o.source=n.source,this.installOverriddenOrExtendedRule(e,t,o,i),this}}class Ve{constructor(){this.currentDecl=null,this.currentRuleName=null}newGrammar(e){return new ze(e)}grammar(e,t,n,r,i){const s=new ze(t);return n&&s.withSuperGrammar(n instanceof $e?n:this.fromRecipe(n)),r&&s.withDefaultStartRule(r),e&&e.source&&s.withSource(e.source),this.currentDecl=s,Object.keys(i).forEach((e=>{this.currentRuleName=e;const t=i[e],n=t[0],r=t[1],a=t[2],o=t[3],l=this.fromRecipe(t[4]);let u;s.source&&r&&r.sourceInterval&&(u=s.source.subInterval(r.sourceInterval[0],r.sourceInterval[1]-r.sourceInterval[0])),s[n](e,o,l,a,u)})),this.currentRuleName=this.currentDecl=null,s.build()}terminal(e){return new k(e)}range(e,t){return new _(e,t)}param(e){return new I(e)}alt(...e){let t=[];for(let n of e)n instanceof w||(n=this.fromRecipe(n)),n instanceof C?t=t.concat(n.terms):t.push(n);return 1===t.length?t[0]:new C(t)}seq(...e){let t=[];for(let n of e)n instanceof w||(n=this.fromRecipe(n)),n instanceof O?t=t.concat(n.factors):t.push(n);return 1===t.length?t[0]:new O(t)}star(e){return e instanceof w||(e=this.fromRecipe(e)),new L(e)}plus(e){return e instanceof w||(e=this.fromRecipe(e)),new R(e)}opt(e){return e instanceof w||(e=this.fromRecipe(e)),new T(e)}not(e){return e instanceof w||(e=this.fromRecipe(e)),new N(e)}lookahead(e){return e instanceof w||(e=this.fromRecipe(e)),new F(e)}lex(e){return e instanceof w||(e=this.fromRecipe(e)),new M(e)}app(e,t){return t&&t.length>0&&(t=t.map((function(e){return e instanceof w?e:this.fromRecipe(e)}),this)),new j(e,t)}splice(e,t){return new E(this.currentDecl.superGrammar,this.currentRuleName,e.map((e=>this.fromRecipe(e))),t.map((e=>this.fromRecipe(e))))}fromRecipe(e){const t="grammar"===e[0]?e.slice(1):e.slice(2),n=this[e[0]](...t),r=e[1];return r&&r.sourceInterval&&this.currentDecl&&n.withSource(this.currentDecl.sourceInterval(...r.sourceInterval)),n}}function Ue(e){return"function"===typeof e?e.call(new Ve):("string"===typeof e&&(e=JSON.parse(e)),(new Ve).fromRecipe(e))}const Be=Ue(["grammar",{source:'BuiltInRules {\n\n  alnum  (an alpha-numeric character)\n    = letter\n    | digit\n\n  letter  (a letter)\n    = lower\n    | upper\n    | unicodeLtmo\n\n  digit  (a digit)\n    = "0".."9"\n\n  hexDigit  (a hexadecimal digit)\n    = digit\n    | "a".."f"\n    | "A".."F"\n\n  ListOf<elem, sep>\n    = NonemptyListOf<elem, sep>\n    | EmptyListOf<elem, sep>\n\n  NonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  EmptyListOf<elem, sep>\n    = /* nothing */\n\n  listOf<elem, sep>\n    = nonemptyListOf<elem, sep>\n    | emptyListOf<elem, sep>\n\n  nonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  emptyListOf<elem, sep>\n    = /* nothing */\n\n  // Allows a syntactic rule application within a lexical context.\n  applySyntactic<app> = app\n}'},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]);$e.BuiltInRules=Be,function(e){X.forEach((t=>{t(e)})),X=null}($e.BuiltInRules);const We=Ue(["grammar",{source:'Ohm {\n\n  Grammars\n    = Grammar*\n\n  Grammar\n    = ident SuperGrammar? "{" Rule* "}"\n\n  SuperGrammar\n    = "<:" ident\n\n  Rule\n    = ident Formals? ruleDescr? "="  RuleBody  -- define\n    | ident Formals?            ":=" OverrideRuleBody  -- override\n    | ident Formals?            "+=" RuleBody  -- extend\n\n  RuleBody\n    = "|"? NonemptyListOf<TopLevelTerm, "|">\n\n  TopLevelTerm\n    = Seq caseName  -- inline\n    | Seq\n\n  OverrideRuleBody\n    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">\n\n  OverrideTopLevelTerm\n    = "..."  -- superSplice\n    | TopLevelTerm\n\n  Formals\n    = "<" ListOf<ident, ","> ">"\n\n  Params\n    = "<" ListOf<Seq, ","> ">"\n\n  Alt\n    = NonemptyListOf<Seq, "|">\n\n  Seq\n    = Iter*\n\n  Iter\n    = Pred "*"  -- star\n    | Pred "+"  -- plus\n    | Pred "?"  -- opt\n    | Pred\n\n  Pred\n    = "~" Lex  -- not\n    | "&" Lex  -- lookahead\n    | Lex\n\n  Lex\n    = "#" Base  -- lex\n    | Base\n\n  Base\n    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application\n    | oneCharTerminal ".." oneCharTerminal           -- range\n    | terminal                                       -- terminal\n    | "(" Alt ")"                                    -- paren\n\n  ruleDescr  (a rule description)\n    = "(" ruleDescrText ")"\n\n  ruleDescrText\n    = (~")" any)*\n\n  caseName\n    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n  ident  (an identifier)\n    = name\n\n  terminal\n    = "\\"" terminalChar* "\\""\n\n  oneCharTerminal\n    = "\\"" terminalChar "\\""\n\n  terminalChar\n    = escapeChar\n      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"\n\n  escapeChar  (an escape sequence)\n    = "\\\\\\\\"                                     -- backslash\n    | "\\\\\\""                                     -- doubleQuote\n    | "\\\\\\\'"                                     -- singleQuote\n    | "\\\\b"                                      -- backspace\n    | "\\\\n"                                      -- lineFeed\n    | "\\\\r"                                      -- carriageReturn\n    | "\\\\t"                                      -- tab\n    | "\\\\u{" hexDigit hexDigit? hexDigit?\n             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint\n    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\n    | "\\\\x" hexDigit hexDigit                    -- hexEscape\n\n  space\n   += comment\n\n  comment\n    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine\n    | "/*" (~"*/" any)* "*/"  -- multiLine\n\n  tokens = token*\n\n  token = caseName | comment | ident | operator | punctuation | terminal | any\n\n  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"\n\n  punctuation = "<" | ">" | "," | "--"\n}'},"Ohm",null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},"\n"]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},"\n"]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},"\n"],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},"\n"]],["range",{sourceInterval:[1639,1660]},"\0","\udbff\udfff"]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},"\n"]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},"\n"],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]),He=Object.create(w.prototype);function Ge(e,t){for(const n in e)if(n===t)return!0;return!1}function qe(e,t,n){const r=new Ve;let i,s,o,l=!1;const u=(n||We).createSemantics().addOperation("visit",{Grammars:e=>e.children.map((e=>e.visit())),Grammar(e,n,s,a,o){const l=e.visit();i=r.newGrammar(l),n.child(0)&&n.child(0).visit(),a.children.map((e=>e.visit()));const u=i.build();if(u.source=this.source.trimmed(),Ge(t,l))throw function(e){return $("Grammar "+e.name+" is already declared in this namespace")}(u);return t[l]=u,u},SuperGrammar(e,n){const r=n.visit();if("null"===r)i.withSuperGrammar(null);else{if(!t||!Ge(t,r))throw function(e,t,n){return $(t?`Grammar ${e} is not declared in namespace '${t}'`:"Undeclared grammar "+e,n)}(r,t,n.source);i.withSuperGrammar(t[r])}},Rule_define(e,t,n,r,a){s=e.visit(),o=t.children.map((e=>e.visit()))[0]||[],i.defaultStartRule||i.ensureSuperGrammar()===$e.ProtoBuiltInRules||i.withDefaultStartRule(s);const l=a.visit(),u=n.children.map((e=>e.visit()))[0],c=this.source.trimmed();return i.define(s,o,l,u,c)},Rule_override(e,t,n,r){s=e.visit(),o=t.children.map((e=>e.visit()))[0]||[];const a=this.source.trimmed();i.ensureSuperGrammarRuleForOverriding(s,a),l=!0;const u=r.visit();return l=!1,i.override(s,o,u,null,a)},Rule_extend(e,t,n,r){s=e.visit(),o=t.children.map((e=>e.visit()))[0]||[];const a=r.visit(),l=this.source.trimmed();return i.extend(s,o,a,null,l)},RuleBody(e,t){return r.alt(...t.visit()).withSource(this.source)},OverrideRuleBody(e,t){const n=t.visit(),a=n.indexOf(He);if(a>=0){const e=n.slice(0,a),t=n.slice(a+1);return t.forEach((e=>{if(e===He)throw $("'...' can appear at most once in a rule body",e.source)})),new E(i.superGrammar,s,e,t).withSource(this.source)}return r.alt(...n).withSource(this.source)},Formals:(e,t,n)=>t.visit(),Params:(e,t,n)=>t.visit(),Alt(e){return r.alt(...e.visit()).withSource(this.source)},TopLevelTerm_inline(e,t){const n=s+"_"+t.visit(),a=e.visit(),u=this.source.trimmed(),c=!(i.superGrammar&&i.superGrammar.rules[n]);l&&!c?i.override(n,o,a,null,u):i.define(n,o,a,null,u);const p=o.map((e=>r.app(e)));return r.app(n,p).withSource(a.source)},OverrideTopLevelTerm_superSplice:e=>He,Seq(e){return r.seq(...e.children.map((e=>e.visit()))).withSource(this.source)},Iter_star(e,t){return r.star(e.visit()).withSource(this.source)},Iter_plus(e,t){return r.plus(e.visit()).withSource(this.source)},Iter_opt(e,t){return r.opt(e.visit()).withSource(this.source)},Pred_not(e,t){return r.not(t.visit()).withSource(this.source)},Pred_lookahead(e,t){return r.lookahead(t.visit()).withSource(this.source)},Lex_lex(e,t){return r.lex(t.visit()).withSource(this.source)},Base_application(e,t){const n=t.children.map((e=>e.visit()))[0]||[];return r.app(e.visit(),n).withSource(this.source)},Base_range(e,t,n){return r.range(e.visit(),n.visit()).withSource(this.source)},Base_terminal(e){return r.terminal(e.visit()).withSource(this.source)},Base_paren:(e,t,n)=>t.visit(),ruleDescr:(e,t,n)=>t.visit(),ruleDescrText(e){return this.sourceString.trim()},caseName:(e,t,n,r,i)=>n.visit(),name(e,t){return this.sourceString},nameFirst(e){},nameRest(e){},terminal:(e,t,n)=>t.children.map((e=>e.visit())).join(""),oneCharTerminal:(e,t,n)=>t.visit(),escapeChar(e){try{return y(this.sourceString)}catch(t){if(t instanceof RangeError&&t.message.startsWith("Invalid code point "))throw function(e){const t=e._node;a(t&&t.isNonterminal()&&"escapeChar_unicodeCodePoint"===t.ctorName);const n=e.children.slice(1,-1).map((e=>e.source)),r=n[0].coverageWith(...n.slice(1));return $(`U+${r.contents} is not a valid Unicode code point`,r)}(e);throw t}},NonemptyListOf:(e,t,n)=>[e.visit()].concat(n.children.map((e=>e.visit()))),EmptyListOf:()=>[],_terminal(){return this.sourceString}});return u(e).visit()}const Ke=Ue(["grammar",{source:'OperationsAndAttributes {\n\n  AttributeSignature =\n    name\n\n  OperationSignature =\n    name Formals?\n\n  Formals\n    = "(" ListOf<name, ","> ")"\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n}'},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]);!function(e){const t={empty(){return this.iteration()},nonEmpty(e,t,n){return this.iteration([e].concat(n.children))}};Le.BuiltInSemantics=Le.createSemantics(e,null).addOperation("asIteration",{emptyListOf:t.empty,nonemptyListOf:t.nonEmpty,EmptyListOf:t.empty,NonemptyListOf:t.nonEmpty})}($e.BuiltInRules),function(e){Le.prototypeGrammarSemantics=e.createSemantics().addOperation("parse",{AttributeSignature:e=>({name:e.parse(),formals:[]}),OperationSignature:(e,t)=>({name:e.parse(),formals:t.children.map((e=>e.parse()))[0]||[]}),Formals:(e,t,n)=>t.asIteration().children.map((e=>e.parse())),name(e,t){return this.sourceString}}),Le.prototypeGrammar=e}(Ke);const Qe="an indented block",Ye="a dedent",Xe=1114112;class Je extends re{constructor(e){super(e.input),this.state=e}_indentationAt(e){return this.state.userData[e]||0}atEnd(){return super.atEnd()&&0===this._indentationAt(this.pos)}next(){if(0===this._indentationAt(this.pos))return super.next();this.examinedLength=Math.max(this.examinedLength,this.pos)}nextCharCode(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),Xe):super.nextCharCode()}nextCodePoint(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),Xe):super.nextCodePoint()}}class Ze extends w{constructor(e=!0){super(),this.isIndent=e}allowsSkippingPrecedingSpace(){return!0}eval(e){const{inputStream:t}=e,n=e.userData;e.doNotMemoize=!0;const r=t.pos,i=this.isIndent?1:-1;return(n[r]||0)*i>0?(e.userData=Object.create(n),e.userData[r]-=i,e.pushBinding(new ye(0),r),!0):(e.processFailure(r,this),!1)}getArity(){return 1}_assertAllApplicationsAreValid(e,t){}_isNullable(e,t){return!1}assertChoicesHaveUniformArity(e){}assertIteratedExprsAreNotNullable(e){}introduceParams(e){return this}substituteParams(e){return this}toString(){return this.isIndent?"indent":"dedent"}toDisplayString(){return this.toString()}toFailure(e){const t=this.isIndent?Qe:Ye;return new ke(this,t,"description")}}const et=new j("indent"),tt=new j("dedent"),nt=new E(Be,"any",[et,tt],[]),rt=(new Ve).newGrammar("IndentationSensitive").withSuperGrammar(Be).define("indent",[],new Ze(!0),Qe,void 0,!0).define("dedent",[],new Ze(!1),Ye,void 0,!0).extend("any",[],nt,"any character",void 0).build();Object.assign(rt,{_matchStateInitializer(e){e.userData=function(e){let t=0;const n=[0],r=()=>n[n.length-1],i={},s=/( *).*(?:$|\r?\n|\r)/g;let a;for(;null!=(a=s.exec(e));){const[e,s]=a;if(0===e.length)break;const o=s.length,l=r(),u=t+o;if(o>l)n.push(o),i[u]=1;else if(o<l){const e=n.length;for(;r()!==o;)n.pop();i[u]=-1*(e-n.length)}t+=e.length}return n.length>1&&(i[t]=1-n.length),i}(e.input),e.inputStream=new Je(e)},supportsIncrementalParsing:!1}),$e.initApplicationParser(We,qe);const it=e=>!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e);function st(e,t){const n=We.match(e,"Grammars");if(n.failed())throw function(e){const t=new Error;return Object.defineProperty(t,"message",{enumerable:!0,get:()=>e.message}),Object.defineProperty(t,"shortMessage",{enumerable:!0,get:()=>"Expected "+e.getExpectedText()}),t.interval=e.getInterval(),t}(n);return qe(n,t)}function at(e,t){const n=function(e,t){const n=Object.create(t||{});if("string"!==typeof e){if(!it(e))throw new TypeError("Expected string as first argument, got "+v(e));e=e.toString()}return st(e,n),n}(e,t),r=Object.keys(n);if(0===r.length)throw new Error("Missing grammar definition");if(r.length>1){const e=n[r[1]].source;throw new Error(ee(e.sourceString,e.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.")}return n[r[0]]}},8463:(e,t,n)=>{n.d(t,{J5:()=>r,iO:()=>a});const r="function Main.fibonacci 0\n    push argument 0\n    push constant 2\n    lt                     // checks if n<2\n    if-goto IF_TRUE\n    goto IF_FALSE\n    label IF_TRUE          // if n<2, return n\n    push argument 0        \n    return\n    label IF_FALSE         // if n>=2, returns fib(n-2)+fib(n-1)\n    push argument 0\n    push constant 2\n    sub\n    call Main.fibonacci 1  // computes fib(n-2)\n    push argument 0\n    push constant 1\n    sub\n    call Main.fibonacci 1  // computes fib(n-1)\n    add                    // returns fib(n-1) + fib(n-2)\n    return\nfunction Sys.init 0\n    push constant 4\n    call Main.fibonacci 1   // computes the 4'th fibonacci element\nlabel WHILE\n    goto WHILE              // loops infinitely\n",i={"01":["Not","And","Or","Xor","Mux","DMux","Not16","And16","Or16","Mux16","Or8Way","Mux4Way16","Mux8Way16","DMux4Way","DMux8Way"],"02":["HalfAdder","FullAdder","Add16","Inc16","ALU"],"03":["Bit","Register","RAM8","RAM64","RAM512","RAM4K","RAM16K","PC"],"05":["Memory","CPU","Computer"]};function s(e,t){const n=i[e],r=n.filter((e=>t.includes(e))),s=t.filter((e=>!n.includes(e)));return s.sort(),[...r,...s]}function a(e,t){switch(e){case"1":case"01":return s("01",t);case"2":case"02":return s("02",t);case"3":case"03":return s("03",t);case"5":case"05":return s("05",t);default:return t.sort(),t}}},5777:(e,t,n)=>{async function r(e,t){await(await Promise.all([n.e(828),n.e(288)]).then(n.bind(n,3288))).resetFiles(e,t)}async function i(e,t){await(await Promise.all([n.e(828),n.e(288)]).then(n.bind(n,3288))).resetTests(e,t)}async function s(e){await(await Promise.all([n.e(828),n.e(288)]).then(n.bind(n,3288))).createFiles(e)}async function a(e){(await Promise.all([n.e(828),n.e(297)]).then(n.bind(n,9297))).loadSamples(e)}async function o(e){(await n.e(269).then(n.bind(n,1269))).loadSolutions(e)}n.r(t),n.d(t,{createFiles:()=>s,default:()=>u,loadSamples:()=>a,loadSolutions:()=>o,loaders:()=>l,resetFiles:()=>r,resetTests:()=>i});const l={resetFiles:r,loadSolutions:o,loadSamples:a},u=l},7738:(e,t,n)=>{n.d(t,{qg:()=>u});var r=n(5874),i=n(3977),s=n(5005),a=n(6980),o=n(9651);function l(e){const t=e.start??0;return void 0===e.end?(0,r.Ok)(void 0):e.end>=t?(0,r.Ok)(e.end-t+1):(0,r._)((0,i.$5)("Bus start index should be less than or equal to bus end index",e.span))}async function u(e,t,n,i){const a=s.xP.parse(e.toString());return(0,r.ys)(a)?a:p({parts:(0,r.Ok)(a),dir:t,name:n,fs:i})}async function c(e,t,n){if((0,a.KQ)(e)||void 0===n)return await(0,a.M1)(e);try{const i=await n.readFile(`${t}/${e}.hdl`),a=s.xP.parse(i);let o;if((0,r.HQ)(a)){const i=await p({parts:(0,r.Ok)(a),dir:t,name:e,fs:n});o=(0,r.ys)(i)?(0,r._)(new Error((0,r._)(i).message)):i}else o=(0,r._)(new Error("HDL Was not parsed"));return o}catch(i){return(0,r._)(new Error(`Could not load chip ${e}.hdl`))}}async function p(...e){return await y.build(...e)}function d(e){if(void 0!=e.start&&void 0!=e.end)return e.end-e.start+1}function h(e){return void 0!=e.start&&void 0!=e.end?`${e.pin}[${e.start}..${e.end}]`:e.pin}function f(e,t){const n=l(e),i=l(t);return(0,r.ys)(n)?n:(0,r.ys)(i)?i:(0,r.Ok)({to:{name:e.pin.toString(),start:e.start??0,width:(0,r.Ok)(n)},from:{name:t.pin.toString(),start:t.start??0,width:(0,r.Ok)(i)}})}function m(e){if(void 0!=e.start&&void 0!=e.end){const t=[];for(let n=e.start;n<=e.end;n++)t.push(n);return t}return[-1]}function g(e,t){let n;const s=t.get(e.pin);if(s)if(s.has(-1))n=e.start??-1;else if(void 0!==e.start&&void 0!==e.end)for(const r of m(e))s.has(r)&&(n=r),s.add(r);else s.add(-1);else t.set(e.pin,new Set(m(e)));return void 0!=n?(0,r._)((0,i.$5)(`Cannot write to pin ${e.pin}${-1!=n?`[${n}]`:""} multiple times`,e.span)):(0,r.Ok)()}class y{parts;fs;dir;expectedName;chip;internalPins=new Map;inPins=new Map;outPins=new Map;wires=[];static build(e){return new y(e).build()}constructor({parts:e,fs:t,dir:n,name:r}){this.parts=e,this.expectedName=r,this.dir=n,this.fs=t,this.chip=new o.vu(e.ins.map((({pin:e,width:t})=>({pin:e.toString(),width:t}))),e.outs.map((({pin:e,width:t})=>({pin:e.toString(),width:t}))),e.name.value,[],e.clocked)}async build(){if(this.expectedName&&this.parts.name.value!=this.expectedName)return(0,r._)((0,i.$5)("Wrong chip name",this.parts.name.span));if("BUILTIN"===this.parts.parts)return await(0,a.M1)(this.parts.name.value);const e=await this.wireParts();if((0,r.ys)(e))return e;this.chip.clockedPins=new Set([...this.chip.ins.entries(),...this.chip.outs.entries()].map((e=>e.name)).filter((e=>this.chip.isClockedPin(e))));for(const t of this.chip.parts)t.subscribeToClock();return(0,r.Ok)(this.chip)}async wireParts(){if("BUILTIN"===this.parts.parts)return(0,r.Ok)();for(const t of this.parts.parts){const e=await c(t.name,this.dir,this.fs);if((0,r.ys)(e))return(0,r._)((0,i.$5)(`Undefined chip name: ${t.name}`,t.span));const n=(0,r.Ok)(e);if(n.name==this.chip.name)return(0,r._)((0,i.$5)(`Cannot use chip ${n.name} to implement itself`,t.span));const s=this.wirePart(t,n);if((0,r.ys)(s))return s}let e=this.validateInternalPins();return(0,r.ys)(e)?e:(e=this.validateWireWidths(),(0,r.ys)(e)?e:(0,r.Ok)())}checkLoops(e,t){const n=new Set,s=new Set;let a;for(const{lhs:r,rhs:i}of e.wires)if(t.isInPin(r.pin)){if(s.has(i.pin)){a=i.pin;break}n.add(i.pin)}else if(t.isOutPin(r.pin)){if(n.has(i.pin)){a=i.pin;break}s.add(i.pin)}return a?(0,r._)((0,i.$5)(`Looping wire ${a}`,e.span)):(0,r.Ok)()}wirePart(e,t){const n=this.checkLoops(e,t);if((0,r.ys)(n))return n;const s=[];this.inPins.clear();for(const{lhs:i,rhs:o}of e.wires){const e=this.validateWire(t,i,o);if((0,r.ys)(e))return e;const n=f(i,o);if((0,r.ys)(n))return n;s.push((0,r.Ok)(n))}try{const n=this.chip.wire(t,s);if((0,r.ys)(n)){const t=(0,r._)(n);return(0,r._)((0,i.$5)(t.message,t.lhs?e.wires[t.wireIndex].lhs.span:e.wires[t.wireIndex].rhs.span))}return(0,r.Ok)()}catch(a){return(0,r._)((0,i.$5)(a.message,e.span))}}validateWire(e,t,n){if(e.isInPin(t.pin)){const e=this.validateInputWire(t,n);if((0,r.ys)(e))return e}else{if(!e.isOutPin(t.pin))return(0,r._)((0,i.$5)(`Undefined pin name: ${t.pin}`,t.span));{const i=this.validateOutputWire(e,t,n);if((0,r.ys)(i))return i}}return(0,o.KK)(n.pin)||this.wires.push({partChip:e,lhs:t,rhs:n}),(0,r.Ok)()}validateInputWire(e,t){let n=this.validateInputSource(t);if((0,r.ys)(n))return n;if(n=g(e,this.inPins),(0,r.ys)(n))return n;if(this.chip.isInternalPin(t.pin)){const e=this.internalPins.get(t.pin);void 0==e?this.internalPins.set(t.pin,{isDefined:!1,firstUse:t.span}):e.firstUse=e.firstUse.start<t.span.start?e.firstUse:t.span}return(0,r.Ok)()}validateOutputWire(e,t,n){let s=this.validateWriteTarget(n);if((0,r.ys)(s))return s;if(this.chip.isOutPin(n.pin)){if(s=g(n,this.outPins),(0,r.ys)(s))return s}else{if(void 0!==n.start||void 0!==n.end)return(0,r._)((0,i.$5)(`Internal pins (in this case: ${n.pin}) cannot be subscripted or indexed`,n.span));const s=this.internalPins.get(n.pin),a=d(t)??e.get(t.pin)?.width;if(void 0==s)this.internalPins.set(n.pin,{isDefined:!0,firstUse:n.span,width:a});else{if(s.isDefined)return(0,r._)((0,i.$5)(`Internal pin ${n.pin} already defined`,n.span));s.isDefined=!0,s.width=a}}return(0,r.Ok)()}validateWriteTarget(e){return this.chip.isInPin(e.pin)?(0,r._)((0,i.$5)(`Cannot write to input pin ${e.pin}`,e.span)):(0,o.KK)(e.pin)?(0,r._)((0,i.$5)('Internal pin name cannot be "true" or "false"',e.span)):(0,r.Ok)()}validateInputSource(e){return this.chip.isOutPin(e.pin)?(0,r._)((0,i.$5)("Cannot use output pin as input",e.span)):this.chip.isInPin(e.pin)||void 0==e.start?(0,r.Ok)():(0,r._)((0,i.$5)((0,o.KK)(e.pin)?"Constant bus cannot be subscripted or indexed":`Internal pins (in this case: ${e.pin}) cannot be subscripted or indexed`,e.span))}validateInternalPins(){for(const[e,t]of this.internalPins)if(!t.isDefined)return(0,r._)((0,i.$5)("true"==e.toLowerCase()||"false"==e.toLowerCase()?`The constant bus ${e.toLowerCase()} must be in lower-case`:`Undefined internal pin name: ${e}`,t.firstUse));return(0,r.Ok)()}validateWireWidths(){for(const e of this.wires){const t=d(e.lhs)??e.partChip.get(e.lhs.pin)?.width,n=d(e.rhs)??this.chip.get(e.rhs.pin)?.width??this.internalPins.get(e.rhs.pin)?.width;if(t!=n)return(0,r._)((0,i.$5)(`Different bus widths: ${h(e.lhs)}(${t}) and ${h(e.rhs)}(${n})`,{start:e.lhs.span.start,end:e.rhs.span.end,line:e.lhs.span.line}))}return(0,r.Ok)()}}},7761:(e,t,n)=>{n.d(t,{N4:()=>u,Sc:()=>y,Z8:()=>g,ce:()=>d,ff:()=>c,s3:()=>p});var r=n(7721),i=n(7076),s=n(6983),a=n(7844),o=n(9651),l=n(836);class u extends l.XK{constructor(){super(15,"ROM")}async load(e,t){try{(await(0,s.Hh)(e,t)).map(((e,t)=>this.at(t).busVoltage=e))}catch(n){throw new Error(`ROM32K Failed to load file ${t}`)}}}class c extends l.XK{static SIZE=i.RL;static OFFSET=i.L7;constructor(){super(13,"Screen")}}class p extends o.vu{static OFFSET=i.ky;constructor(){super([],["out[16]"],"Keyboard")}getKey(){return this.out().busVoltage}setKey(e){this.out().busVoltage=65535&e}clearKey(){this.out().busVoltage=0}get(e){return e===this.name?new o.xo(this.name,this.getKey()):super.get(e)}}class d extends o._b{ram=new l.jV;screen=new c;keyboard=new p;address=0;constructor(){super(["in[16]","load","address[15])"],["out[16]"],"Memory",[],["in","load"]),this.parts.push(this.keyboard),this.parts.push(this.screen),this.parts.push(this.ram)}tick(){const e=this.in("load").voltage();if(this.address=this.in("address").busVoltage,e){const e=this.in().busVoltage;this.address>=p.OFFSET||(this.address>=c.OFFSET?this.screen.at(this.address-c.OFFSET).busVoltage=e:this.ram.at(this.address).busVoltage=e)}}tock(){this.eval()}eval(){if(!this.ram)return;this.address=this.in("address").busVoltage;let e=0;e=this.address>=p.OFFSET?this.keyboard?.out().busVoltage??0:this.address>=c.OFFSET?this.screen?.at(this.address-c.OFFSET).busVoltage??0:this.ram?.at(this.address).busVoltage??0,this.out().busVoltage=e}in(e){if(e?.startsWith("RAM16K")){const t=(0,a.ZR)(e.match(/\[(?<idx>\d+)]/)?.groups?.idx??"0");return this.ram.at(t)}if(e?.startsWith("Screen")){const t=(0,a.ZR)(e.match(/\[(?<idx>\d+)]/)?.groups?.idx??"0");return this.screen.at(t)}return super.in(e)}get(e,t=0){return e.startsWith("RAM16K")?this.at(16383&t):e.startsWith("Screen")?this.at(t&8191+c.OFFSET):e.startsWith("Keyboard")?this.at(p.OFFSET):e.startsWith("Memory")?this.at(t):super.get(e,t)}at(e){return e>=p.OFFSET?this.keyboard.out():e>=c.OFFSET?this.screen.at(e-c.OFFSET):this.ram.at(e)}reset(){this.address=0,this.ram.reset(),this.screen.reset(),super.reset()}}class h extends o.z7{cpu;constructor(e,t){super(e),this.cpu=t}get busVoltage(){return this.cpu.D}set busVoltage(e){this.cpu.D=e}}class f extends o.z7{cpu;constructor(e,t){super(e),this.cpu=t}get busVoltage(){return this.cpu.A}set busVoltage(e){this.cpu.A=e}}class m extends o.z7{cpu;constructor(e,t){super(e),this.cpu=t}get busVoltage(){return this.cpu.PC}set busVoltage(e){this.cpu.PC=e}}class g extends o._b{_state=(0,r.p$)();get state(){return this._state}constructor(){super(["inM[16]","instruction[16]","reset"],["outM[16]","writeM","addressM[15]","pc[15]"],"CPU",[],["pc","addressM","reset"])}tick(){const[e,t]=(0,r.gV)(this.cpuInput(),this._state);this._state=e,this.out("writeM").pull(t?o.RY:o.$L),this.out("outM").busVoltage=this._state.ALU??0}tock(){if(!this._state)return;const[e,t]=(0,r.I8)(this.cpuInput(),this._state);this._state=t,this.out("addressM").busVoltage=e.addressM??0,this.out("outM").busVoltage=e.outM??0,this.out("writeM").pull(e.writeM?o.RY:o.$L),this.out("pc").busVoltage=this._state?.PC??0}cpuInput(){return{inM:this.in("inM").busVoltage,instruction:this.in("instruction").busVoltage,reset:1===this.in("reset").busVoltage}}get(e,t){return e?.startsWith("ARegister")?new f("ARegister",this._state):e?.startsWith("DRegister")?new h("DRegister",this._state):e?.startsWith("PC")?new m("PC",this._state):super.get(e,t)}reset(){this._state=(0,r.p$)(),this._state.PC=-1,super.reset()}}class y extends o.vu{cpu=new g;ram=new d;rom=new u;constructor(){super(["reset"],[]),this.wire(this.cpu,[{from:{name:"reset",start:0},to:{name:"reset",start:0}},{from:{name:"instruction",start:0},to:{name:"instruction",start:0}},{from:{name:"oldOutM",start:0},to:{name:"inM",start:0}},{from:{name:"writeM",start:0},to:{name:"writeM",start:0}},{from:{name:"addressM",start:0},to:{name:"addressM",start:0}},{from:{name:"newInM",start:0},to:{name:"outM",start:0}},{from:{name:"pc",start:0},to:{name:"pc",start:0}}]),this.wire(this.rom,[{from:{name:"pc",start:0},to:{name:"address",start:0}},{from:{name:"instruction",start:0},to:{name:"out",start:0}}]),this.wire(this.ram,[{from:{name:"newInM",start:0},to:{name:"in",start:0}},{from:{name:"writeM",start:0},to:{name:"load",start:0}},{from:{name:"addressM",start:0},to:{name:"address",start:0}},{from:{name:"oldOutM",start:0},to:{name:"out",start:0}}]);for(const e of[...this.ins.entries(),...this.outs.entries()])this.isClockedPin(e.name)&&this.clockedPins.add(e.name)}eval(){super.eval()}get(e,t){return e.startsWith("PC")||e.startsWith("ARegister")||e.startsWith("DRegister")?this.cpu.get(e):e.startsWith("RAM16K")?this.ram.get(e,t):super.get(e,t)}async load(e,t){return await this.rom.load(e,t)}}},6980:(e,t,n)=>{n.d(t,{Hs:()=>L,Mo:()=>U,M1:()=>W,KQ:()=>B});var r=n(5874),i=n(9651);class s extends i.vu{constructor(){super(["a","b"],["out"])}eval(){const e=this.in("a").voltage(),t=this.in("b").voltage(),[n]=function(e,t){return[1===e&&1===t?i.RY:i.$L]}(e,t);this.out().pull(n)}}class a extends i.vu{constructor(){super(["a[16]","b[16]"],["out[16]"])}eval(){const e=this.in("a").busVoltage,t=this.in("b").busVoltage,[n]=function(e,t){return[e&t&65535]}(e,t);this.out().busVoltage=n}}class o extends i.vu{constructor(){super(["in","sel"],["a","b"])}eval(){const e=this.in("in").voltage(),t=this.in("sel").voltage(),[n,r]=function(e,t){return[t===i.$L&&e===i.RY?i.RY:i.$L,t===i.RY&&e===i.RY?i.RY:i.$L]}(e,t);this.out("a").pull(n),this.out("b").pull(r)}}class l extends i.vu{constructor(){super(["in","sel[2]"],["a","b","c","d"])}eval(){const e=this.in("in").voltage(),t=this.in("sel").busVoltage,[n,r,s,a]=function(e,t){return[0===t&&e===i.RY?i.RY:i.$L,1===t&&e===i.RY?i.RY:i.$L,2===t&&e===i.RY?i.RY:i.$L,3===t&&e===i.RY?i.RY:i.$L]}(e,t);this.out("a").pull(n),this.out("b").pull(r),this.out("c").pull(s),this.out("d").pull(a)}}class u extends i.vu{constructor(){super(["in","sel[3]"],["a","b","c","d","e","f","g","h"])}eval(){const e=this.in("in").voltage(),t=this.in("sel").busVoltage,[n,r,s,a,o,l,u,c]=function(e,t){return[0===t&&e===i.RY?i.RY:i.$L,1===t&&e===i.RY?i.RY:i.$L,2===t&&e===i.RY?i.RY:i.$L,3===t&&e===i.RY?i.RY:i.$L,4===t&&e===i.RY?i.RY:i.$L,5===t&&e===i.RY?i.RY:i.$L,6===t&&e===i.RY?i.RY:i.$L,7===t&&e===i.RY?i.RY:i.$L]}(e,t);this.out("a").pull(n),this.out("b").pull(r),this.out("c").pull(s),this.out("d").pull(a),this.out("e").pull(o),this.out("f").pull(l),this.out("g").pull(u),this.out("h").pull(c)}}function c(e,t,n){return[n===i.$L?e:t]}function p(e,t,n,r,i){const s=1&i;return 0===(2&i)?c(e,t,s):c(n,r,s)}class d extends i.vu{constructor(){super(["a","b","sel"],["out"])}eval(){const e=this.in("a").voltage(),t=this.in("b").voltage(),n=this.in("sel").voltage(),[r]=function(e,t,n){return[n===i.$L?e:t]}(e,t,n);this.out().pull(r)}}class h extends i.vu{constructor(){super(["a[16]","b[16]","sel"],["out[16]"])}eval(){const e=this.in("a").busVoltage,t=this.in("b").busVoltage,n=this.in("sel").voltage(),[r]=c(e,t,n);this.out().busVoltage=r}}class f extends i.vu{constructor(){super(["a[16]","b[16]","c[16]","d[16]","sel[2]"],["out[16]"])}eval(){const e=this.in("a").busVoltage,t=this.in("b").busVoltage,n=this.in("c").busVoltage,r=this.in("d").busVoltage,i=this.in("sel").busVoltage,[s]=p(e,t,n,r,i);this.out().busVoltage=s}}class m extends i.vu{constructor(){super(["a[16]","b[16]","c[16]","d[16]","e[16]","f[16]","g[16]","h[16]","sel[3]"],["out[16]"])}eval(){const e=this.in("a").busVoltage,t=this.in("b").busVoltage,n=this.in("c").busVoltage,r=this.in("d").busVoltage,i=this.in("e").busVoltage,s=this.in("f").busVoltage,a=this.in("g").busVoltage,o=this.in("h").busVoltage,l=this.in("sel").busVoltage,[u]=function(e,t,n,r,i,s,a,o,l){const u=3&l;return 0===(4&l)?p(e,t,n,r,u):p(i,s,a,o,u)}(e,t,n,r,i,s,a,o,l);this.out().busVoltage=u}}var g=n(7844);class y extends i.vu{constructor(){super(["a","b"],["out"])}eval(){const e=this.in("a").voltage(),t=this.in("b").voltage(),[n]=function(e,t){return[1===e&&1===t?i.$L:i.RY]}(e,t);this.out().pull(n)}}class v extends i.vu{constructor(){super(["a[16]","b[16]"],["out[16]"])}eval(){const e=this.in("a").busVoltage,t=this.in("b").busVoltage;this.out().busVoltage=(0,g.xu)(e,t)}}class b extends i.vu{constructor(){super(["in"],["out"])}eval(){const e=this.in("in").voltage(),[t]=[e===i.$L?i.RY:i.$L];this.out().pull(t)}}class w extends i.vu{constructor(){super(["in[16]"],["out[16]"])}eval(){const[e]=[65535&~this.in().busVoltage];this.out().busVoltage=e}}function S(e,t){return[1===e||1===t?i.RY:i.$L]}class x extends i.vu{constructor(){super(["a","b"],["out"])}eval(){const e=this.in("a").voltage(),t=this.in("b").voltage(),[n]=S(e,t);this.out().pull(n)}}class k extends i.vu{constructor(){super(["a[16]","b[16]"],["out[16]"])}eval(){const e=this.in("a").busVoltage,t=this.in("b").busVoltage,[n]=function(e,t){return[65535&(e|t)]}(e,t);this.out().busVoltage=n}}class _ extends i.vu{constructor(){super(["in[8]"],["out"],"Or8way")}eval(){const e=this.in().busVoltage,[t]=function(e){return[0===(255&e)?i.$L:i.RY]}(e);this.out().pull(t)}}class I extends i.vu{constructor(){super(["a","b"],["out"])}eval(){const e=this.in("a").voltage(),t=this.in("b").voltage(),[n]=function(e,t){return[e===i.RY&&t===i.$L||e===i.$L&&t===i.RY?i.RY:i.$L]}(e,t);this.out().pull(n)}}class C extends i.vu{constructor(){super(["a[16]","b[16]"],["out[16]"])}eval(){const e=this.in("a").busVoltage,t=this.in("b").busVoltage,[n]=function(e,t){return[65535&(e^t)]}(e,t);this.out().busVoltage=n}}function A(e,t){return[e+t&65535]}class E extends i.vu{constructor(){super(["a[16]","b[16]"],["out[16]"],"Add16")}eval(){const e=this.in("a").busVoltage,t=this.in("b").busVoltage,[n]=A(e,t);this.out().busVoltage=n}}var O=n(8739);class P extends i.vu{constructor(){super(["x[16]","y[16]","zx","nx","zy","ny","f","no"],["out[16]"],"ALU")}eval(){const e=this.in("x").busVoltage,t=this.in("y").busVoltage,n=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage|0),[r]=(0,O.v0)(n,e,t);this.out().busVoltage=r}}class L extends i.vu{constructor(){super(["x[16]","y[16]","zx","nx","zy","ny","f","no"],["out[16]","zr","ng"],"ALU")}eval(){const e=this.in("x").busVoltage,t=this.in("y").busVoltage,n=(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage|0),[r,s]=(0,O.v0)(n,e,t),a=s===O.iI.Negative?i.RY:i.$L,o=s===O.iI.Zero?i.RY:i.$L;this.out("out").busVoltage=r,this.out("ng").pull(a),this.out("zr").pull(o)}op(){return(this.in("zx").busVoltage<<5)+(this.in("nx").busVoltage<<4)+(this.in("zy").busVoltage<<3)+(this.in("ny").busVoltage<<2)+(this.in("f").busVoltage<<1)+(this.in("no").busVoltage|0)}}i.vu;function R(e,t){return[1===e&&0===t||0===e&&1===t?i.RY:i.$L,1===e&&1===t?i.RY:i.$L]}class T extends i.vu{constructor(){super(["a","b"],["sum","carry"])}eval(){const e=this.in("a").voltage(),t=this.in("b").voltage(),[n,r]=R(e,t);this.out("sum").pull(n),this.out("carry").pull(r)}}class N extends i.vu{constructor(){super(["a","b","c"],["sum","carry"])}eval(){const e=this.in("a").voltage(),t=this.in("b").voltage(),n=this.in("c").voltage(),[r,i]=function(e,t,n){const[r,i]=R(e,t),[s,a]=R(r,n),[o]=S(i,a);return[s,o]}(e,t,n);this.out("sum").pull(r),this.out("carry").pull(i)}}class F extends i.vu{constructor(){super(["in[16]"],["out[16]"],"Inc16")}eval(){const e=this.in().busVoltage,[t]=A(e,1);this.out().busVoltage=t}}var M=n(7738);const j={CPU:"CHIP CPU {\n\n    IN  inM[16],         // M value input  (M = contents of RAM[A])\n        instruction[16], // Instruction for execution\n        reset;           // Signals whether to re-start the current\n                         // program (reset==1) or continue executing\n                         // the current program (reset==0).\n\n    OUT outM[16],        // M value output\n        writeM,          // Write to M? \n        addressM[15],    // Address in data memory (of M)\n        pc[15];          // address of next instruction\n\n    PARTS:\n    Mux16(a=instruction, b=ALUoutput, sel=instruction[15], out=Ainput);\n    Not(in=instruction[15], out=Ainstruction);\n    Or(a=Ainstruction, b=instruction[5], out=loadA);\n    ARegister(in=Ainput, load=loadA, out=Aoutput, out[0..14]=addressM);\n\n    And(a=instruction[15], b=instruction[4], out=loadD);\n    DRegister(in=ALUoutput, load=loadD, out=Doutput);\n\n    Mux16(a=Aoutput, b=inM, sel=instruction[12], out=ALUsecondInput);\n\n    ALU(x=Doutput, y=ALUsecondInput, \n        zx=instruction[11], nx=instruction[10], \n        zy=instruction[9], ny=instruction[8],\n        f=instruction[7], no=instruction[6], \n        out=ALUoutput, out=outM, ng=negative, zr=zero);\n\n    And(a=instruction[15], b=instruction[3], out=writeM);\n\n    Or(a=negative, b=zero, out=notPositive);\n    Not(in=notPositive, out=positive);\n\n    And(a=positive, b=instruction[0], out=j1);\n    And(a=zero, b=instruction[1], out=j2);\n    And(a=negative, b=instruction[2], out=j3);\n    Or(a=j1, b=j2, out=jTemp);\n    Or(a=jTemp, b=j3, out=jumpIfC);\n    And(a=jumpIfC, b=instruction[15], out=jump);\n\n    PC(reset=reset, inc=true, load=jump, in=Aoutput, out[0..14]=pc);\n}"};var D=n(7761),$=n(2331);class z extends i._b{constructor(e){super(["in"],["out"],e,["t"],["in"])}tick(){const e=this.in().voltage();this.pin("t").pull(e)}tock(){const e=this.pin("t").voltage();this.out().pull(e)}}var V=n(836);const U=new Map([["Nand",y],["Nand16",v],["Not",b],["Not16",w],["And",s],["And16",a],["Or",x],["Or16",k],["Or8Way",_],["XOr",I],["XOr16",C],["Xor",I],["Xor16",C],["Mux",d],["Mux16",h],["Mux4Way16",f],["Mux8Way16",m],["DMux",o],["DMux4Way",l],["DMux8Way",u],["HalfAdder",T],["FullAdder",N],["Add16",E],["Inc16",F],["ALU",L],["ALUNoStat",P],["DFF",z],["Bit",$.G],["Register",$.UZ],["ARegister",$.UZ],["DRegister",$.UZ],["PC",$.PC],["RAM8",V.Z4],["RAM64",V.JG],["RAM512",V.fn],["RAM4K",V.g0],["RAM16K",V.jV],["ROM32K",D.N4],["Screen",D.ff],["Keyboard",D.s3],["CPU",D.Z8],["Computer",D.Sc],["Memory",D.ce],["ARegister",$.s$],["DRegister",$.s$]].map((([e,t])=>[e,()=>{const n=new t;return n.name=e,n}])));function B(e){return U.has(e)}async function W(e){if(j[e]){const t=await(0,M.qg)(j[e],e);return(0,r.ys)(t)?(0,r._)(new Error((0,r._)(t).message)):t}const t=U.get(e);return t?(0,r.Ok)(t()):(0,r._)(new Error(`Chip ${e} not in builtin registry`))}},2331:(e,t,n)=>{n.d(t,{G:()=>i,PC:()=>l,UZ:()=>a,s$:()=>o});var r=n(9651);class i extends r._b{bit=r.$L;constructor(e){super(["in","load"],["out"],e,[],["in","load"])}tick(){this.in("load").voltage()===r.RY&&(this.bit=this.in().voltage())}tock(){this.out().pull(this.bit??0)}reset(){this.bit=r.$L,super.reset()}}class s extends r.z7{register;constructor(e,t){super(e),this.register=t}get busVoltage(){return 65535&this.register.bits}set busVoltage(e){this.register.bits=65535&e}}class a extends r._b{bits=0;constructor(e){super(["in[16]","load"],["out[16]"],e,[],["in","load"])}tick(){this.in("load").voltage()===r.RY&&(this.bits=65535&this.in().busVoltage)}tock(){this.out().busVoltage=65535&this.bits}get(e,t){return e===this.name?new s(this.name,this):super.get(e,t)}reset(){this.bits=0,super.reset()}}class o extends a{}class l extends r._b{bits=0;constructor(e){super(["in[16]","reset","load","inc"],["out[16]"],e,[],["in","reset","load","inc"])}tick(){this.in("reset").voltage()===r.RY?this.bits=0:this.in("load").voltage()===r.RY?this.bits=65535&this.in().busVoltage:this.in("inc").voltage()===r.RY&&(this.bits+=1)}tock(){this.out().busVoltage=65535&this.bits}get(e,t){return e===this.name?new s(this.name,this):super.get(e,t)}reset(){this.bits=0,super.reset()}}},836:(e,t,n)=>{n.d(t,{JG:()=>u,XK:()=>a,Z4:()=>l,fn:()=>c,g0:()=>p,jV:()=>d});var r=n(2469),i=n(7076),s=n(9651);class a extends s._b{width;_memory;_nextData=0;_address=0;get memory(){return this._memory}get address(){return this._address}constructor(e,t){super(["in[16]","load",`address[${e}]`],["out[16]"],t,[],["in","load"]),this.width=e,this._memory=new i.ce(Math.pow(2,this.width))}tick(){const e=this.in("load").voltage();this._address=this.in("address").busVoltage,e&&(this._nextData=this.in().busVoltage,this._memory.set(this._address,this._nextData))}tock(){this.out().busVoltage=this._memory?.get(this._address)??0}eval(){const e=this.in("address").busVoltage;this.out().busVoltage=this._memory?.get(e)??0}at(e){return(0,r.vA)(e<this._memory.size,(()=>`Request out of bounds (${e} >= ${this._memory.size})`)),new o(`${this.name}[${e}]`,e,this._memory)}get(e,t){return e===this.name?this.at(t??0):super.get(e)}reset(){this._memory.reset(),super.reset()}}class o extends s.z7{index;ram;constructor(e,t,n){super(e),this.index=t,this.ram=n}get busVoltage(){return this.ram.get(this.index)}set busVoltage(e){this.ram.set(this.index,e)}}class l extends a{constructor(){super(3,"RAM8")}}class u extends a{constructor(){super(6,"RAM64")}}class c extends a{constructor(){super(9,"RAM512")}}class p extends a{constructor(){super(12,"RAM4K")}}class d extends a{constructor(){super(14,"RAM16K")}}},9651:(e,t,n)=>{n.d(t,{$L:()=>l,KK:()=>u,RY:()=>o,_b:()=>x,ti:()=>S,vu:()=>w,xo:()=>h,z7:()=>c});var r=n(2469),i=n(742),s=n(5874),a=n(3096);const o=1,l=0;function u(e){return"false"===e||"true"===e||"0"===e||"1"===e}class c{name;width;state;next=[];constructor(e,t=1){this.name=e,this.width=t,this.state=(0,i.y)(0,this.width).map((()=>l))}ensureWidth(e){(0,r.vA)(e<=16,`Cannot widen past 16 to ${e} bits`),this.width<e&&(this.width=e,this.state=[...this.state,...(0,i.y)(this.width,e).map((()=>l))])}connect(e){this.next.push(e),e.busVoltage=this.busVoltage}pull(e,t=0){(0,r.vA)(t>=0&&t<this.width,`Bit out of bounds: ${this.name}@${t}`),this.state[t]=e,this.next.forEach((n=>n.pull(e,t)))}voltage(e=0){return(0,r.vA)(e>=0&&e<this.width),this.state[e]}set busVoltage(e){for(const t of(0,i.y)(0,this.width))this.state[t]=(e&1<<t)>>t;this.next.forEach((e=>e.busVoltage=this.busVoltage))}get busVoltage(){return(0,i.y)(0,this.width).reduce(((e,t)=>e|this.state[t]<<t),0)}toggle(e=0){const t=this.voltage(e)===l?o:l;this.pull(t,e)}}class p extends c{bus;start;width;constructor(e,t,n=1){super(e.name),this.bus=e,this.start=t,this.width=n,(0,r.vA)(t>=0&&t+n<=e.width,`Mismatched InSubBus dimensions on ${e.name} (${n} + ${t} > ${e.width})`),this.connect(e)}pull(e,t=0){(0,r.vA)(t>=0&&t<this.width),this.bus.pull(e,this.start+t)}voltage(e=0){return(0,r.vA)(e>=0&&e<this.width),this.bus.voltage(this.start+e)}set busVoltage(e){const t=this.bus.busVoltage&~k(this.width+this.start),n=this.bus.busVoltage&k(this.start),r=(e&k(this.width))<<this.start;this.bus.busVoltage=t|r|n}get busVoltage(){return this.bus.busVoltage>>this.start&k(this.width)}connect(e){(0,r.vA)(this.start+this.width<=e.width,`Mismatched InSubBus connection dimensions (From ${e.name} to ${this.name})`),this.bus=e}}class d extends c{bus;start;width;constructor(e,t,n=1){super(e.name),this.bus=e,this.start=t,this.width=n,(0,r.vA)(t>=0&&n<=e.width,"Mismatched OutSubBus dimensions"),this.connect(e)}pull(e,t=0){t>=this.start&&t<this.start+this.width&&this.bus.pull(e,t-this.start)}set busVoltage(e){this.bus.busVoltage=(e&k(this.width+this.start))>>this.start}get busVoltage(){return this.bus.busVoltage>>this.start&k(this.width)}connect(e){(0,r.vA)(this.width<=e.width,"Mismatched OutSubBus connection dimensions"),this.bus=e}}class h extends c{value;constructor(e,t){super(e,16),this.value=t}pullHigh(e=0){}pullLow(e=0){}voltage(e=0){return 1&this.busVoltage}set busVoltage(e){}get busVoltage(){return this.value}}const f=new h("true",65535),m=new h("false",0);function g(e){const{pin:t,w:n}=e.match(/(?<pin>[a-zA-Z]+)(\[(?<w>\d+)\])?/)?.groups;return{pin:t,width:n?Number(n):1}}class y{map=new Map;insert(e){const{name:t}=e;(0,r.vA)(!this.map.has(t),`Pins already has ${t}!`),this.map.set(t,e)}emplace(e,t){if(this.has(e))return this.get(e);{const n=new c(e,t);return this.insert(n),n}}has(e){return this.map.has(e)}get(e){return this.map.get(e)}entries(){return this.map.values()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}function v(e,t,n){return e+t<=n.width?(0,s.Ok)():(0,s._)(`Sub-bus index out of range (${n.name} has width ${n.width})`)}let b=0;class w{name;id=b++;ins=new y;outs=new y;pins=new y;insToPart=new Map;partToOuts=new Map;parts=[];clockedPins;clockSubscription;get clocked(){if(this.clockedPins.size>0)return!0;for(const e of this.parts)if(e.clocked)return!0;return!1}constructor(e,t,n,r=[],i=[]){this.name=n;for(const s of e){const{pin:e,width:t=1}=void 0!==s.pin?s:g(s);this.ins.insert(new c(e,t))}for(const s of t){const{pin:e,width:t=1}=void 0!==s.pin?s:g(s);this.outs.insert(new c(e,t))}for(const s of r){const{pin:e,width:t=1}=void 0!==s.pin?s:g(s);this.pins.insert(new c(e,t))}this.clockedPins=new Set(i),this.subscribeToClock()}subscribeToClock(){this.clockSubscription?.unsubscribe(),this.clockSubscription=a.z.subscribe((()=>this.eval()))}reset(){for(const[e,t]of this.ins)t.busVoltage=0;for(const e of this.parts)e.reset();this.eval()}in(e="in"){return(0,r.vA)(this.hasIn(e),`No in pin ${e}`),this.ins.get(e)}out(e="out"){return(0,r.vA)(this.hasOut(e),`No in pin ${e}`),this.outs.get(e)}hasIn(e){return this.ins.has(e)}hasOut(e){return this.outs.has(e)}pin(e){return(0,r.vA)(this.pins.has(e)),this.pins.get(e)}get(e,t){return this.ins.has(e)?this.ins.get(e):this.outs.has(e)?this.outs.get(e):this.pins.has(e)?this.pins.get(e):this.getBuiltin(e,t)}getBuiltin(e,t=0){if(_.includes(e))for(const n of this.parts){const r=n.get(e,t);if(r)return r}}isInPin(e){return this.ins.has(e)}isOutPin(e){return this.outs.has(e)}isExternalPin(e){return this.isInPin(e)||this.isOutPin(e)||u(e)}isInternalPin(e){return!this.isExternalPin(e)}pathExists(e,t){const n=[e];for(;n.length>0;){const e=(0,r.Z1)(n.pop());if("string"==typeof e){if(e==t)return!0;n.push(...this.insToPart.get(e)??[])}else n.push(...this.partToOuts.get(e)??[])}return!1}isClockedPin(e){return this.isInPin(e)?![...this.outs].some((([t,n])=>this.pathExists(e,t))):![...this.ins].some((([t,n])=>this.pathExists(t,e)))}hasConnection(e,t){return[...this.partToOuts.get(e)??[]].some((e=>this.insToPart.get(e)?.has(t)))}wire(e,t){for(let n=0;n<t.length;n++){const{from:r,to:i}=t[n];if(e.isOutPin(i.name)){const t=this.wireOutPin(e,i,r);if((0,s.ys)(t))return(0,s._)({wireIndex:n,lhs:(0,s._)(t).lhs,message:(0,s._)(t).message})}else{const t=this.wireInPin(e,i,r);if((0,s.ys)(t))return(0,s._)({wireIndex:n,lhs:(0,s._)(t).lhs,message:(0,s._)(t).message})}}return this.parts.push(e),(0,s.Ok)()}sortParts(){const e=[],t=new Set,n=new Set,i=this.parts.map((e=>({part:e,isReturning:!1})));for(;i.length>0;){const s=(0,r.Z1)(i.pop());if(s.isReturning)t.add(s.part),e.push(s.part);else if(!t.has(s.part)){if(n.has(s.part))return!0;n.add(s.part),i.push({part:s.part,isReturning:!0});for(const e of this.partToOuts.get(s.part)??[])i.push(...Array.from(this.insToPart.get(e)??[]).filter((e=>!t.has(e))).map((e=>({part:e,isReturning:!1}))))}}return this.parts=e.reverse(),!1}findPin(e,t){return"true"===e||"1"===e?f:"false"===e||"0"===e?m:this.ins.has(e)?this.ins.get(e):this.outs.has(e)?this.outs.get(e):this.pins.emplace(e,t)}wireOutPin(e,t,n){const i=(0,r.Z1)(e.outs.get(t.name),(()=>`Cannot wire to missing pin ${t.name}`));t.width??=i.width;let a=this.findPin(n.name,n.width??t.width);const o=this.pins.has(a.name);if(n.width??=a.width,a instanceof h)return(0,s._)({message:"Cannot wire to constant bus",lhs:!0});if(o&&a instanceof c&&a.ensureWidth(n.start+n.width),n.start>0||n.width!==a.width){const e=v(n.start,n.width,a);if((0,s.ys)(e))return(0,s._)({message:(0,s._)(e),lhs:!0});a=new p(a,n.start,n.width)}if(t.start>0||t.width!==i.width){const e=v(t.start,t.width,i);if((0,s.ys)(e))return(0,s._)({message:(0,s._)(e),lhs:!1});a=new d(a,t.start,t.width)}if(!e.clockedPins.has(i.name)){const t=this.partToOuts.get(e)??new Set;t.add(a.name),this.partToOuts.set(e,t)}if(this.sortParts()){const t=this.partToOuts.get(e)??new Set;return t.delete(a.name),this.partToOuts.set(e,t),(0,s._)({message:"Circular pin dependency",lhs:!1})}return i.connect(a),(0,s.Ok)()}wireInPin(e,t,n){let i=(0,r.Z1)(e.ins.get(t.name),(()=>`Cannot wire to missing pin ${t.name}`));t.width??=i.width;const a=this.findPin(n.name,n.width??t.width);if(n.width??=a.width,t.start>0||t.width!==i.width){const e=v(t.start,t.width,i);if((0,s.ys)(e))return(0,s._)({message:(0,s._)(e),lhs:!0});i=new p(i,t.start,t.width)}if(!["true","false"].includes(a.name)&&(n.start>0||n.width!==a.width)){const e=v(n.start,n.width,a);if((0,s.ys)(e))return(0,s._)({message:(0,s._)(e),lhs:!1});i=new d(i,n.start,n.width)}if(!e.clockedPins.has(i.name)){const t=this.insToPart.get(a.name)??new Set;t.add(e),this.insToPart.set(a.name,t)}if(this.sortParts()){const t=this.insToPart.get(a.name)??new Set;return t.delete(e),this.insToPart.set(a.name,t),(0,s._)({message:"Circular pin dependency",lhs:!0})}return a.connect(i),(0,s.Ok)()}eval(){for(const e of this.parts)f.next.forEach((e=>e.busVoltage=f.busVoltage)),m.next.forEach((e=>e.busVoltage=m.busVoltage)),e.eval()}tick(){this.eval()}tock(){this.eval()}remove(){this.clockSubscription?.unsubscribe();for(const e of this.parts)e.remove()}async load(e,t){for(const n of this.parts)"ROM32K"===n.name&&await n.load(e,t)}}class S extends w{constructor(){super([],[]),this.outs.insert(m)}}class x extends w{get clocked(){return!0}subscribeToClock(){this.clockSubscription?.unsubscribe(),this.clockSubscription=a.z.subscribe((({level:e})=>{e===l?this.tock():this.tick()}))}remove(){this.clockSubscription?.unsubscribe(),super.remove()}reset(){super.reset(),this.tick(),this.tock()}}function k(e){return Math.pow(2,e)-1}const _=["Register","ARegister","DRegister","PC","RAM8","RAM64","RAM512","RAM4K","RAM16K","ROM32K","Screen","Keyboard","Memory"]},3096:(e,t,n)=>{n.d(t,{z:()=>B});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;function s(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a}function o(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function l(e){return"function"===typeof e}function u(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var c=u((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function p(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var d=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var p=s(u),d=p.next();!d.done;d=p.next()){d.value.remove(this)}}catch(b){e={error:b}}finally{try{d&&!d.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}else u.remove(this);var h=this.initialTeardown;if(l(h))try{h()}catch(w){i=w instanceof c?w.errors:[w]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var g=s(f),y=g.next();!y.done;y=g.next()){var v=y.value;try{m(v)}catch(S){i=null!==i&&void 0!==i?i:[],S instanceof c?i=o(o([],a(i)),a(S.errors)):i.push(S)}}}catch(x){n={error:x}}finally{try{y&&!y.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}}if(i)throw new c(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)m(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&p(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&p(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),h=d.EMPTY;function f(e){return e instanceof d||e&&"closed"in e&&l(e.remove)&&l(e.add)&&l(e.unsubscribe)}function m(e){l(e)?e():e.unsubscribe()}var g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},y={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=y.delegate;return(null===i||void 0===i?void 0:i.setTimeout)?i.setTimeout.apply(i,o([e,t],a(n))):setTimeout.apply(void 0,o([e,t],a(n)))},clearTimeout:function(e){var t=y.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function v(){}var b=w("C",void 0,void 0);function w(e,t,n){return{kind:e,value:t,error:n}}var S=null;function x(e){if(g.useDeprecatedSynchronousErrorHandling){var t=!S;if(t&&(S={errorThrown:!1,error:null}),e(),t){var n=S,r=n.errorThrown,i=n.error;if(S=null,r)throw i}}else e()}var k=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,f(t)&&t.add(n)):n.destination=P,n}return i(t,e),t.create=function(e,t,n){return new A(e,t,n)},t.prototype.next=function(e){this.isStopped?O(function(e){return w("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?O(w("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?O(b,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(d),_=Function.prototype.bind;function I(e,t){return _.call(e,t)}var C=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){E(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){E(n)}else E(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){E(t)}},e}(),A=function(e){function t(t,n,r){var i,s,a=e.call(this)||this;l(t)||!t?i={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:a&&g.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},i={next:t.next&&I(t.next,s),error:t.error&&I(t.error,s),complete:t.complete&&I(t.complete,s)}):i=t;return a.destination=new C(i),a}return i(t,e),t}(k);function E(e){var t;g.useDeprecatedSynchronousErrorHandling?(t=e,g.useDeprecatedSynchronousErrorHandling&&S&&(S.errorThrown=!0,S.error=t)):function(e){y.setTimeout((function(){var t=g.onUnhandledError;if(!t)throw e;t(e)}))}(e)}function O(e,t){var n=g.onStoppedNotification;n&&y.setTimeout((function(){return n(e,t)}))}var P={closed:!0,next:v,error:function(e){throw e},complete:v},L="function"===typeof Symbol&&Symbol.observable||"@@observable";function R(e){return e}function T(e){return 0===e.length?R:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var N=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,s=(r=e)&&r instanceof k||function(e){return e&&l(e.next)&&l(e.error)&&l(e.complete)}(r)&&f(r)?e:new A(e,t,n);return x((function(){var e=i,t=e.operator,n=e.source;s.add(t?t.call(s,n):n?i._subscribe(s):i._trySubscribe(s))})),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=F(t))((function(t,r){var i=new A({next:function(t){try{e(t)}catch(n){r(n),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return T(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=F(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function F(e){var t;return null!==(t=null!==e&&void 0!==e?e:g.Promise)&&void 0!==t?t:Promise}var M=u((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),j=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype.lift=function(e){var t=new D(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new M},t.prototype.next=function(e){var t=this;x((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=s(t.currentObservers),a=i.next();!a.done;a=i.next()){a.value.next(e)}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;x((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;x((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,s=n.observers;return r||i?h:(this.currentObservers=null,s.push(e),new d((function(){t.currentObservers=null,p(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new N;return e.source=this,e},t.create=function(e,t){return new D(e,t)},t}(N),D=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return i(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:h},t}(j),$=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(j),z=n(2469),V=n(9651);let U;class B{level=V.$L;ticks=0;static get(){return void 0===U&&(U=new B),U}static subscribe(e){return B.get().$.subscribe(e)}get isHigh(){return this.level===V.RY}get isLow(){return this.level===V.$L}subject=new $({level:this.level,ticks:this.ticks});frameSubject=new j;resetSubject=new j;$=this.subject;frame$=this.frameSubject;reset$=this.resetSubject;next(){this.subject.next({level:this.level,ticks:this.ticks})}constructor(){}reset(){this.level=V.$L,this.ticks=0,this.next(),this.resetSubject.next()}tick(){(0,z.vA)(this.level===V.$L,"Can only tick up from LOW"),this.level=V.RY,this.next()}tock(){(0,z.vA)(this.level===V.RY,"Can only tock down from HIGH"),this.level=V.$L,this.ticks+=1,this.next()}toggle(){this.level===V.RY?this.tock():this.tick()}eval(){this.tick(),this.tock()}frame(){this.frameSubject.next()}toString(){return`${this.ticks}${this.level===V.RY?"+":""}`}}},8739:(e,t,n)=>{n.d(t,{Lo:()=>a,Nt:()=>l,Qv:()=>p,_0:()=>s,ft:()=>d,iI:()=>h,nf:()=>i,qn:()=>m,uW:()=>u,v0:()=>f});const r=new Set(["0","1","-1","D","A","!D","!A","-D","-A","D+1","A+1","D-1","A-1","D+A","D-A","A-D","D&A","D|A"]);function i(e){return r.has(e)||r.has(e.replace("M","A"))}const s={op:{42:"0",63:"1",58:"-1",12:"x",48:"y",13:"!x",49:"!y",15:"-x",51:"-y",31:"x+1",55:"y+1",14:"x-1",50:"y-1",2:"x+y",19:"x-y",7:"y-x",0:"x&y",21:"x|y"}},a={asm:{0:42,1:63,"-1":58,D:12,A:48,"!D":13,"!A":49,"-D":15,"-A":51,"D+1":31,"A+1":55,"D-1":14,"A-1":50,"D+A":2,"D-A":19,"A-D":7,"D&A":0,"D|A":21},op:{42:"0",63:"1",58:"-1",12:"D",48:"A",13:"!D",49:"!A",15:"-D",51:"-A",31:"D+1",55:"A+1",14:"D-1",50:"A-1",2:"D+A",19:"D-A",7:"A-D",0:"D&A",21:"D|A"},getOp:e=>a.asm[e.replace("M","A")]},o=new Set(["","M","D","MD","A","AM","AD","AMD"]);function l(e){return o.has(e)}const u={asm:{"":0,M:1,D:2,MD:3,A:4,AM:5,AD:6,AMD:7},op:{0:"",1:"M",2:"D",3:"MD",4:"A",5:"AM",6:"AD",7:"AMD"}},c=new Set(["","JGT","JEQ","JGE","JLT","JNE","JLE","JMP"]);function p(e){return c.has(e)}const d={asm:{"":0,JGT:1,JEQ:2,JGE:3,JLT:4,JNE:5,JLE:6,JMP:7},op:{0:"",1:"JGT",2:"JEQ",3:"JGE",4:"JLT",5:"JNE",6:"JLE",7:"JMP"}},h={1:"Positive",0:"Zero",15:"Negative",Positive:1,Zero:0,Negative:15};function f(e,t,n){let r=0;switch(e){case 42:r=0;break;case 63:r=1;break;case 58:r=-1;break;case 12:r=t;break;case 48:r=n;break;case 13:r=~t;break;case 49:r=~n;break;case 15:r=-t;break;case 51:r=-n;break;case 31:r=t+1;break;case 55:r=n+1;break;case 14:r=t-1;break;case 50:r=n-1;break;case 2:r=t+n;break;case 19:r=t-n;break;case 7:r=n-t;break;case 0:r=t&n;break;case 21:r=t|n}r&=65535;return[r,0===r?h.Zero:32768&r?h.Negative:h.Positive]}function m(e,t,n){32&e&&(t=0),16&e&&(t=65535&~t),8&e&&(n=0),4&e&&(n=65535&~n);let r=65535&(2&e?t+n:t&n);1&e&&(r=65535&~r);return[r,0===r?h.Zero:32768&r?h.Negative:h.Positive]}},7721:(e,t,n)=>{n.d(t,{D4:()=>o,I8:()=>u,Z8:()=>c,gV:()=>l,p$:()=>s});var r=n(8739),i=n(7076);function s(){return{A:0,D:0,PC:0,ALU:0,flag:r.iI.Zero}}const a={c:32768,x1:36864,x2:36864,am:36864,op:4032,d1:32800,d2:32784,d3:32776,j1:32769,j2:32770,j3:32772};function o(e){function t(t){return(e&t)===t}return{c:t(a.c),x1:t(a.x1),x2:t(a.x2),am:t(a.am),op:(e&a.op)>>6,d1:t(a.d1),d2:t(a.d2),d3:t(a.d3),j1:t(a.j1),j2:t(a.j2),j3:t(a.j3)}}function l({inM:e,instruction:t},{A:n,D:i,PC:s}){const a=o(t),l=a.am?e:n,[u,c]=(0,r.v0)(a.op,i,l);return a.d2&&(i=u),[{A:n,D:i,PC:s+1,ALU:u,flag:c},a.d3,u]}function u({inM:e,instruction:t,reset:n},{A:i,D:s,PC:a,ALU:l,flag:u}){const c=o(t),p=c.j1&&u===r.iI.Positive,d=c.j2&&u===r.iI.Zero,h=c.j3&&u===r.iI.Negative;a=n?0:p||d||h?i:a,c.c?c.d1&&(i=l):i=32767&t;const f=c.am?e:i,m=(0,r.v0)(c.op,s,f);l=m[0],u=m[1];return[{addressM:i,outM:l,writeM:c.d3},{A:i,D:s,ALU:l,flag:u,PC:a}]}class c{RAM;ROM;Screen;Keyboard;#e=0;#t=0;#n=0;#r={A:0,D:0,PC:0,ALU:0,flag:r.iI.Zero};get state(){return this.#r}get PC(){return this.#e}get A(){return this.#t}get D(){return this.#n}setA(e){this.#t=e}setD(e){this.#n=e}setPC(e){this.#e=e}constructor({RAM:e=new i.XK,ROM:t}){this.RAM=e,this.ROM=t,this.Screen=new i.qN(this.RAM,i.RL,i.L7),this.Keyboard=new i.PC(this.RAM)}reset(){this.#e=0,this.#t=0,this.#n=0}tick(){const e=this.#t,t={inM:this.RAM.get(this.#t),instruction:this.ROM.get(this.#e),reset:!1},[n,i,s]=l(t,{A:this.#t,D:this.#n,PC:this.#e,ALU:this.#n,flag:r.iI.Zero});i&&this.RAM.set(e,s);const[a,{A:o,D:c,PC:p}]=u(t,n);this.#t=o,this.#n=c,this.#e=p}}},7076:(e,t,n)=>{n.d(t,{L7:()=>l,PC:()=>m,RL:()=>p,XK:()=>y,ce:()=>h,dh:()=>u,hR:()=>o,ky:()=>d,n9:()=>g,pc:()=>c,qN:()=>f});var r=n(2469),i=n(6983),s=n(7496),a=n(7844);const o=["bin","dec","hex","asm"],l=16384,u=256,c=32,p=u*c,d=24576;class h{memory;get size(){return this.memory.length}constructor(e){this.memory=new Int16Array(e)}get(e){return e<0||e>=this.size?65535:this.memory[e]??0}set(e,t){e>=0&&e<this.size&&(this.memory[e]=65535&t)}reset(){this.memory.fill(0)}update(e,t,n){let r;switch(n){case"asm":try{r=(0,s.op)(t)}catch{r=void 0}break;case"bin":r=(0,a.Yp)(t);break;case"hex":r=(0,a.l8)(t);break;default:r=(0,a.ZR)(t)}void 0!==r&&isFinite(r)&&r<=65535&&this.set(e,r)}async load(e,t,n){try{this.loadBytes(await(0,i.Hh)(e,t),n)}catch(r){throw new Error(`Memory Failed to load file ${t}`)}}loadBytes(e,t){this.memory.set(new Int16Array(e),t),this.memory.fill(0,e.length,this.size)}range(e=0,t=this.size){return[...this.memory.slice(e,t)]}*map(e,t=0,n=this.size){(0,r.vA)(t<=n);for(let r=t;r<n;r++)yield e(r,this.get(r))}[Symbol.iterator](){return this.map(((e,t)=>t))}isEmpty(){return this.memory.every((e=>0===e))}}class f{parent;size;offset;constructor(e,t,n){this.parent=e,this.size=t,this.offset=n}get(e){return e<0||e>=this.size?65535:this.parent.get(this.offset+e)}set(e,t,n=!0){e>=0&&e<this.size&&this.parent.set(e+this.offset,t)}reset(){for(let e=0;e<this.size;e++)this.set(e,0,!1)}update(e,t,n){e>=0&&e<this.size&&this.parent.update(e+this.offset,t,n)}load(e,t){return this.parent.load(e,t,this.offset)}loadBytes(e){return this.parent.loadBytes(e,this.offset)}range(e,t){return this.parent.range(e,t)}map(e,t=0,n=this.size){return this.parent.map(e,t+this.offset,n+this.offset)}[Symbol.iterator](){return this.map(((e,t)=>t))}}class m extends f{constructor(e){super(e,1,24576)}getKey(){return this.get(0)}setKey(e){this.set(0,65535&e)}clearKey(){this.set(0,0)}}class g extends h{static SIZE=32768;constructor(e){if(e){const t=new Int16Array(g.SIZE);t.set(e),super(t)}else super(g.SIZE)}}class y extends h{keyboard=new f(this,1,d);screen=new f(this,p,l);static SIZE=24577;constructor(){super(y.SIZE)}}},6983:(e,t,n)=>{n.d(t,{Hh:()=>i});var r=n(9547);async function i(e,t){if(t.endsWith(".hack"))return async function(e,t){return r.aU(await e.readFile(t))}(e,t);if(t.endsWith(".asm"))return async function(e,t){return r.aY(await e.readFile(t))}(e,t);throw new Error(`Cannot load file without hack or asm extension ${t}`)}},4666:(e,t,n)=>{n.d(t,{y0:()=>b,EU:()=>f,J$:()=>d,ld:()=>m});var r=n(2469),i=n(8739),s=n(7076),a=n(7496),o=n(3977),l=n(5874);const u='ASM <: Base {\n  Root := ASM\n  ASM = intermediateInstruction* instruction?\n  \n  instruction = label|aInstruction|cInstruction\n  intermediateInstruction = instruction space+\n\n  identifier := (letter|underscore|dot|dollar|colon) (alnum|underscore|dot|dollar|colon)*\n\n  label = openParen identifier closeParen\n  aInstruction = at (identifier | decNumber)\n  cInstruction = assign? op jmp?\n\n  assignChar = "A" | "M" | "D"\n  opChar = assignChar | "0" | "1" | "!" | "-" | "+" | "|" | "&"\n  \n  assign = assignChar+ equal\n  op = opChar+\n\n  jmp = semi ("JGT" | "JEQ" | "JGE" | "JLT" | "JNE" | "JLE" | "JMP")\n}';const c=(0,n(9563).qN)(u,o.lN),p=c.extendSemantics(o.JE);function d(e){return"A"==e.type&&void 0!==e.value}function h(e){return"A"==e.type&&void 0!==e.label}function f(e,t){let n=16;const i=new Map([["R0",0],["R1",1],["R2",2],["R3",3],["R4",4],["R5",5],["R6",6],["R7",7],["R8",8],["R9",9],["R10",10],["R11",11],["R12",12],["R13",13],["R14",14],["R15",15],["SP",0],["LCL",1],["ARG",2],["THIS",3],["THAT",4],["SCREEN",s.L7],["KBD",s.ky]]);const a=[];let u=0;for(const r of e.instructions)if("L"!==r.type)u+=1,"A"===r.type&&h(r)&&a.push(r);else{if(i.has(r.label))return(0,l._)((0,o.$5)(`Duplicate label ${r.label}`,r.span));i.set(r.label,u),t?.(r.label,u,!1)}return a.forEach((function(e){const s=(a=e.label,i.has(a)||(i.set(a,n),t?.(a,n,!0),n+=1),(0,r.Z1)(i.get(a),`Label not in symbols: ${a}`));var a;e.value=s,delete e.label})),(0,l.Ok)()}p.addAttribute("root",{Root(e){return this.asm}}),p.addAttribute("asm",{ASM(e,t){const n=e.children.map((e=>e.intermediateInstruction))??[];return{instructions:t.child(0)?[...n,t.child(0).instruction]:n}}}),p.addAttribute("intermediateInstruction",{intermediateInstruction:(e,t)=>e.instruction}),p.addAttribute("instruction",{aInstruction(e,t){return g(t.value,(0,o.Ln)(this.source))},cInstruction(e,t,n){const r=function(e){let t=e.child(0)?.child(0)?.sourceString??"";if("DM"==t&&(t="MD"),"ADM"==t&&(t="AMD"),""!=t&&!(0,i.Nt)(t)){const n=t.split("").reverse().join(""),r=(0,i.Nt)(n)?`. Did you mean ${n}?`:"";throw(0,o.$5)(`Invalid ASM target: ${t}${r}`,(0,o.Ln)(e.source))}return t}(e),s=function(e){const t=e.sourceString;if(!(0,i.nf)(t)){const n=t.split("").reverse().join(""),r=(0,i.nf)(n)?`. Did you mean ${n}?`:"";throw(0,o.$5)(`Invalid ASM value: ${e.sourceString}${r}`,(0,o.Ln)(e.source))}return t}(t),a=n.child(0)?.child(1)?.sourceString??"";return y(r,s,a,(0,o.Ln)(this.source))},label(e,{name:t},n){return v(t,(0,o.Ln)(this.source))}});function m(e){if("A"===e.type){if(h(e))throw new Error("ASM Emitting unfilled A instruction");return e.value}if("C"===e.type)return(0,a.m)(e.isM,e.op,e.store??0,e.jump??0)}const g=(e,t)=>"string"===typeof e?{type:"A",label:e,span:t}:{type:"A",value:e,span:t},y=(e,t,n,r)=>{const s={type:"C",op:i.Lo.getOp(t),isM:t.includes("M"),span:r};return n&&(s.jump=i.ft.asm[n]),e&&(s.store=i.uW.asm[e]),s},v=(e,t)=>({type:"L",label:e,span:t}),b={grammar:u,semantics:p,parser:c,parse:(0,o.Q5)(c,p),passes:{fillLabel:f,emit:function(e){return e.instructions.map(m).filter((e=>void 0!==e))}},A:g,C:y,AC:(e,t,n,r)=>[g(e),y(t,n,r)],L:v}},3977:(e,t,n)=>{n.d(t,{JE:()=>o,$5:()=>u,lN:()=>a,Q5:()=>c,Ln:()=>p});var r=n(5874),i=n(9563),s=n(7844);const a={Base:(0,i.qN)('\nBase {\n  Root = Value*\n\n  At = at\n  Bang = bang\n  Bar = bar\n  CloseAngle = closeAngle\n  CloseBrace = closeBrace\n  CloseParen = closeParen\n  CloseSquare = closeSquare\n  Comma = comma\n  Dollar = dollar\n  Dot = dot\n  DoubleQuote = doubleQuote\n  Equal = equal\n  OpenAngle = openAngle\n  OpenBrace = openBrace\n  OpenParen = openParen\n  OpenSquare = openSquare\n  Percent = percent\n  Semi = semi\n  Underscore = underscore\n\n  at = "@"\n  bang = "!"\n  bar = "|"\n  closeAngle = ">"\n  closeBrace = "}"\n  closeParen = ")"\n  closeSquare = "]"\n  comma = ","\n  dollar = "$"\n  dot = "."\n  doubleQuote = "\\""\n  equal = "="\n  minus = "-"\n  newline = "\\r"? "\\n"\n  openAngle = "<"\n  openBrace = "{"\n  openParen = "("\n  openSquare = "["\n  percent = "%"\n  semi = ";"\n  underscore = "_"\n  colon = ":"\n\n  Value = identifier | number | boolean\n\n  boolean = true | false\n  True = true\n  False = false\n  true = "true"\n  false = "false"\n\n  Name = identifier\n  identifier = (letter|underscore|dot|dollar) (alnum|underscore|dot|dollar)*\n\n  Number = number\n  number = hexNumber | decNumber | binNumber\n  binNumber = ("%B") ("0"|"1")+\n  hexNumber = ("%X") hexDigit+\n  decNumber = ("%D")? (wholeDec | realDec)\n  wholeDec = minus? digit+\n  realDec = minus? digit* "." digit+\n\n  String = DoubleQuote (~doubleQuote any)* doubleQuote\n  \n  spaces := (lineComment | comment | space)*\n  commentStart = "/*"\n  commentEnd = "*/"\n  comment = commentStart (~commentEnd any)* commentEnd\n  lineCommentStart = "//"\n  lineComment = lineCommentStart (~"\\n" any)*\n\n  List<elem, sep> = NonemptyListOf<elem, sep> sep?\n  EmptyList<elem, sep> = EmptyList<elem, sep> sep?\n}')},o=a.Base.createSemantics();o.extendOperation("asIteration",{List:(e,t)=>e.asIteration()}),o.addAttribute("value",{decNumber:(e,t)=>(0,s.ZR)(t.sourceString),wholeDec:(e,t)=>(0,s.ZR)(t.sourceString),binNumber:(e,t)=>(0,s.Yp)(t.sourceString),hexNumber:(e,t)=>(0,s.l8)(t.sourceString),Number:e=>e.value,Name:e=>e.name,identifier(e,t){return this.sourceString}}),o.addAttribute("name",{identifier(e,t){return this.sourceString},Name(e){return this.child(0)?.name}}),o.addAttribute("String",{String:(e,t,n)=>t.sourceString});const l="HDL statement has a syntax error";function u(e,t){const n=e.match(/Line \d+, col \d+: (?<message>.*)/),r=n?.groups?.message?n.groups.message:e;return{message:`${void 0!=t?.line?`Line ${t.line}: `:""}${r}`,span:t}}function c(e,t,n=({root:e})=>e){return function(i){try{const s=e.match(i);if(s.succeeded()){const e=t(s),i=n(e);return(0,r.Ok)(i)}return(0,r._)(u(s.shortMessage??l,p(s.getInterval())))}catch(s){return(0,r._)(s)}}}function p(e){return{start:e.startIdx,end:e.endIdx,line:e.getLineAndColumn().lineNum}}},7589:(e,t,n)=>{n.d(t,{dl:()=>l});var r=n(9563),i=n(3977);const s="\nCmp <: Base {\n  Root := line*\n  line = bar cell+ newline?\n  cell = cellvalue bar\n  cellvalue = (~(bar|newline) any)*\n}",a=(0,r.qN)(s,i.lN),o=a.extendSemantics(i.JE);o.addAttribute("cell",{cell:(e,t)=>e.sourceString}),o.addAttribute("line",{line:(e,t,n)=>t.children.map((e=>e.cell))}),o.addAttribute("root",{Root:e=>e.children.map((e=>e.line))});const l={grammar:s,semantics:o,parser:a,parse:(0,i.Q5)(a,o)}},5005:(e,t,n)=>{n.d(t,{xP:()=>l});var r=n(9563),i=n(3977);const s='\nHdl <: Base{\n  Root := Chip\n  identifier := (letter) (alnum)*\n  Name := identifier\n  Chip = "CHIP" Name OpenBrace ChipBody CloseBrace\n  ChipBody = InList? OutList? PartList ClockedList?\n  InList = "IN" PinList Semi\n  OutList = "OUT" PinList Semi\n  PartList = BuiltinPart | Parts\n  PinList = List<PinDecl, Comma>\n  PinDecl = Name PinWidth?\n  PinWidth = OpenSquare decNumber CloseSquare\n  BuiltinPart = "BUILTIN" Semi\n  Parts = "PARTS:" Part*\n  Part = Name "(" Wires ")" Semi\n  Wires = List<Wire, Comma>\n  Wire = WireSide Equal (WireSide | True | False) \n  WireSide = Name SubBus? \n  SubBus = OpenSquare decNumber subBusRest? CloseSquare\n  subBusRest = ".." decNumber\n  ClockedList = "CLOCKED" SimplePinList Semi\n  SimplePinList = List<Name, Comma>\n}',a=(0,r.qN)(s,i.lN),o=a.extendSemantics(i.JE);o.addAttribute("SubBus",{SubBus(e,t,n,r){const i=t.value;return{start:i,end:n.child(0)?.child(1)?.value??i}}}),o.addAttribute("WireSide",{WireSide({name:e},t){const{start:n,end:r}=t.child(0)?.SubBus??{start:void 0,end:void 0};return{pin:e,start:n,end:r,span:(0,i.Ln)(this.source)}}}),o.addAttribute("Wire",{Wire(e,t,n){const r=n.isTerminal()?{pin:n.sourceString}:n.WireSide;return{lhs:e.WireSide,rhs:r}}}),o.addAttribute("Wires",{Wires:e=>e.asIteration().children.map((e=>e.Wire))}),o.addAttribute("Part",{Part({name:e},t,{Wires:n},r,s){return{name:e,wires:n,span:(0,i.Ln)(this.source)}}}),o.addAttribute("Parts",{Parts:(e,t)=>t.children.map((e=>e.Part)),BuiltinPart:(e,t)=>"BUILTIN"}),o.addAttribute("PartList",{PartList:e=>e.Parts}),o.addAttribute("Clocked",{ClockedList:(e,t,n)=>t.asIteration().children.map((({sourceString:e})=>e))??[]}),o.addAttribute("PinDecl",{PinDecl:({name:e},t)=>({pin:e,width:t.child(0)?.child(1)?.value??1})}),o.addAttribute("PinList",{PinList:e=>e.asIteration().children.map((e=>e.PinDecl))}),o.addAttribute("Chip",{Chip:(e,t,n,r,s)=>({name:{value:t.sourceString,span:(0,i.Ln)(t.source)},ins:r.child(0).child(0)?.child(1)?.PinList??[],outs:r.child(1).child(0)?.child(1)?.PinList??[],parts:r.child(2).PartList??[],clocked:r.child(3).child(0)?.Clocked})}),o.addAttribute("Root",{Root:e=>e.child(0)?.Chip});const l={parser:a,grammar:s,semantics:o,parse:(0,i.Q5)(a,o,(e=>e.Chip))}},6554:(e,t,n)=>{n.d(t,{uG:()=>l});var r=n(9563),i=n(3977);const s='\nTst <: Base {\n  Root := Tst\n  Tst = (TstStatement | TstRepeat | TstWhile)+\n\n  TstRepeat = Repeat Number? OpenBrace TstCommand+ CloseBrace\n  TstWhile = While Condition OpenBrace TstCommand+ CloseBrace\n  TstStatement = TstCommand\n\n  TstCommand = TstOperation Separator\n  Separator = (Semi | Bang | Comma)\n\n  TstOperation =\n    | TstFileOperation\n    | TstOutputListOperation\n    | TstEvalOperation\n    | TstSetOperation\n    | TstOutputOperation\n    | TstEchoOperation\n    | TstClearEchoOperation\n    | TstLoadROMOperation\n    | TstResetRAMOperation\n\n  TstLoadROMOperation = ROM32K Load FileName\n  TstFileOperation = FileOperation FileName?\n  TstOutputListOperation = "output-list" OutputFormat+\n  OutputFormat = Name Index? FormatSpec?\n  FormatSpec = percent FormatStyle wholeDec dot wholeDec dot wholeDec\n  TstSetOperation = Set Name Index? Number\n  Index = OpenSquare wholeDec? CloseSquare\n  Condition = Value CompareOp Value\n  TstEvalOperation = Eval | TickTock | Tick | Tock | VmStep\n  TstOutputOperation = Output\n  TstEchoOperation = Echo String\n  TstClearEchoOperation = ClearEcho\n  TstResetRAMOperation = ResetRAM\n\n  filename = (alnum|underscore|dot|dollar|minus)+\n  FileName = filename\n  FileOperation = "load" | "output-file" | "compare-to"\n\n  Set = "set"\n  Eval = "eval"\n  Tick = "tick"\n  Tock = "tock"\n  TickTock = "ticktock"\n  VmStep = "vmstep"\n  Echo = "echo"\n  Repeat = "repeat"\n  ClearEcho = "clear-echo"\n  Output = "output"\n  OutputList = "output-list"\n  FormatStyle = "B"|"D"|"S"|"X"\n  ROM32K = "ROM32K"\n  Load = "load"\n  While = "while"\n  ResetRAM = "resetRam"\n\n  CompareOp = "<>" | "<=" | ">=" | "=" | "<" | ">"\n}',a=(0,r.qN)(s,i.lN),o=a.extendSemantics(i.JE);o.extendAttribute("value",{Index:(e,t,n)=>t?.child(0)?.value??-1}),o.extendAttribute("name",{FileName:({name:e})=>e}),o.addAttribute("index",{Index:(e,t,n)=>t.child(0)?.value??0}),o.addAttribute("formatSpec",{FormatSpec:(e,{sourceString:t},{value:n},r,{value:i},s,{value:a})=>({style:t,width:i,lpad:n,rpad:a})}),o.addAttribute("format",{OutputFormat:({name:e},t,n)=>({id:e,builtin:void 0!==t?.child(0),address:t?.child(0)?.value??-1,format:n?.child(0)?.formatSpec})}),o.addAttribute("operation",{TstEvalOperation:e=>({op:e.sourceString}),TstOutputOperation:e=>({op:"output"}),TstOutputListOperation:(e,t)=>({op:"output-list",spec:t.children.map((e=>e.format))}),TstSetOperation(e,{name:t},n,{value:r}){const i={op:"set",id:t,value:r},s=n.child(0)?.child(1)?.child(0);return s&&(i.index=s.value),i},TstEchoOperation:(e,t)=>({op:"echo",message:t.String}),TstClearEchoOperation:e=>({op:"clear-echo"}),TstLoadROMOperation:(e,t,n)=>({op:"loadRom",file:n.sourceString}),TstFileOperation:(e,t)=>({op:e.sourceString,file:t?.sourceString}),TstResetRAMOperation:e=>({op:"resetRam"})}),o.addAttribute("command",{TstCommand(e,t){return{op:e.operation,separator:t.sourceString,span:(0,i.Ln)(this.source)}}}),o.addAttribute("condition",{Condition:({value:e},{sourceString:t},{value:n})=>({left:e,right:n,op:t})}),o.addAttribute("statement",{TstWhile(e,t,n,r,s){return{statements:r.children.map((e=>e.command)),condition:t.condition,span:(0,i.Ln)(this.source)}},TstRepeat(e,t,n,r,s){return{statements:r.children.map((e=>e.command)),count:t.sourceString?Number(t.sourceString):-1,span:(0,i.Ln)(this.source)}},TstStatement:e=>e.command}),o.addAttribute("tst",{Tst:e=>({lines:e.children.map((e=>e.statement))})}),o.addAttribute("root",{Root:({tst:e})=>e});const l={grammar:s,semantics:o,parser:a,parse:(0,i.Q5)(a,o)}},9547:(e,t,n)=>{n.d(t,{aU:()=>o,aY:()=>a,yt:()=>l});var r=n(5874),i=n(4666),s=n(7844);async function a(e){const t=(0,r.oA)(i.y0.parse(e));return i.y0.passes.fillLabel(t),i.y0.passes.emit(t)}async function o(e){return e.split("\n").filter((e=>""!==e.trim())).map(s.Yp)}async function l(e){return e.split("\n").filter((e=>""!==e.trim())).map(s._Q)}},9976:(e,t,n)=>{n.d(t,{G:()=>d,d:()=>u});var r=n(2469),i=n(5874),s=n(1106),a=n(6418),o=n(4867),l=n(8783);function u(e){return void 0!==e.op}function c(e){return void 0!==e.condition}function p(e){const{op:t}=e;switch(t){case"tick":return new s.IJ;case"tock":return new s.CX;case"ticktock":return new a.zB;case"eval":return new s.Nq;case"vmstep":return new l.a;case"output":return new o.ik;case"set":return new o.jl(e.id,e.value,e.index);case"output-list":return new o.Ad(e.spec);case"echo":return new o.S0(e.message);case"clear-echo":return new o.Tn;case"loadRom":return new o.fK(e.file);case"load":return new o.hh(e.file);case"output-file":return new o.gM(e.file);case"compare-to":return new o.Rh(e.file);case"resetRam":return new a.aC;default:(0,r.H8)(t,`Unknown tst operation ${t}`)}}function d(e,t,n=!0){let r,s=[],a=e,l=[],d=!1;for(const i of t.lines){if(u(i))a=e,l=[i];else{const t=c(i)?new o.eB(new o.kW(i.condition.left,i.condition.right,i.condition.op)):new o.UM(i.count);t.span=i.span,e.addInstruction(t),a=t,l=i.statements}for(const e of l){"load"==e.op.op&&(d=!0);const t=p(e.op);if(void 0!==t&&(void 0===r?r=i.span:r.end=i.span.end,a.addInstruction(t),s.push(t)),","!=e.separator){";"==e.separator?a.addInstruction(new o.fe(r??e.span)):"!"==e.separator&&a.addInstruction(new o.Ge(r??e.span));for(const t of s)t.span=r??e.span;r=void 0,s=[]}}}return n&&!d?(0,i._)(new Error("A test script must have a load command")):(e.reset(),(0,i.Ok)(e))}},1106:(e,t,n)=>{n.d(t,{BX:()=>o,CX:()=>c,IJ:()=>u,Nq:()=>l});var r=n(9651),i=n(3096),s=n(9976),a=n(9937);class o extends a.V{chip=new r.ti;doLoad;get chipId(){return this.chip.id}clock=i.z.get();static from(e,t={}){const n=new o(t);return(0,s.G)(n,e,t.requireLoad)}constructor({dir:e,setStatus:t,loadAction:n,compareTo:r}={}){super(e,t,r),this.doLoad=n}with(e){return this.chip=e,this}async load(e){if(!this.dir)return;const t=await(this.doLoad?.(e?`${this.dir}/${e}`:this.dir));t&&(this.chip=t)}hasVar(e){return"time"===e||(e=`${e}`,this.chip.hasIn(e)||this.chip.hasOut(e))}getVar(e,t){if("time"===(e=`${e}`))return this.clock.toString();const n=this.chip.get(e,t);return n?n instanceof r.z7?n.busVoltage:n.voltage():0}getWidth(e,t){const n=this.chip.get(e,t);return n?n.width:0}setVar(e,t,n){const i=this.chip.get(e,n);i instanceof r.z7?i.busVoltage=t:i?.pull(0===t?r.$L:r.RY)}eval(){this.chip.eval()}tick(){this.chip.eval(),this.clock.tick()}tock(){this.chip.eval(),this.clock.tock()}async loadROM(e){await this.chip.load(this.fs,[this.dir??"",e].join("/"))}async run(){this.clock.reset(),await super.run()}}class l{_chipTestInstruction_=!0;async do(e){e.eval()}*steps(){yield this}}class u{_chipTestInstruction_=!0;async do(e){e.tick()}*steps(){yield this}}class c{_chipTestInstruction_=!0;async do(e){e.tock()}*steps(){yield this}}},6418:(e,t,n)=>{n.d(t,{aC:()=>c,bJ:()=>l,zB:()=>u});var r=n(2469),i=n(7721),s=n(7076),a=n(9976),o=n(9937);class l extends o.V{cpu;ticks=0;doLoad;fileLoaded=!1;hasLoad=!1;static from(e,t={}){const n=new l(t);return n.hasLoad=e.lines.some((e=>(0,a.d)(e)&&"load"==e.op.op)),(0,a.G)(n,e,t.requireLoad)}constructor({dir:e,rom:t=new s.n9,doEcho:n,doLoad:r,compareTo:a}={}){super(e,n,a),this.doLoad=r,this.cpu=new i.Z8({ROM:t}),this.reset()}async step(){if(!this.hasLoad&&this.cpu.ROM.isEmpty())throw new Error("Cannot execute the test without first loading an .asm or .hack file");return super.step()}async load(e){if(!e&&!this.dir)return;const t=(0,r.Z1)(this.dir?.split("/").slice(0,-1).join("/")),n=await(this.doLoad?.(e?`${t}/${e}`:t));n&&(this.cpu=new i.Z8({ROM:n}))}reset(){return super.reset(),this.cpu.reset(),this.ticks=0,this}hasVar(e){return"number"!==typeof e&&!("A"!==e&&"D"!==e&&"PC"!==e&&"time"!==e&&!e.startsWith("RAM"))}getVar(e,t){switch(e){case"A":return this.cpu.A;case"D":return this.cpu.D;case"PC":return this.cpu.PC;case"time":return this.ticks;case"RAM":return void 0===t?0:this.cpu.RAM.get(t)}if("number"===typeof e)return 0;if(e.startsWith("RAM")){const t=Number(e.substring(4,e.length-1));return this.cpu.RAM.get(t)}return 0}getWidth(e,t){return 16}setVar(e,t,n){switch(e){case"A":this.cpu.setA(t);break;case"D":this.cpu.setD(t);break;case"PC":this.cpu.setPC(t);break;case"RAM":this.cpu.RAM.set(n??0,t)}}ticktock(){this.ticks+=1,this.cpu.tick()}async loadROM(e){await this.cpu.ROM.load(this.fs,e)}}class u{_cpuTestInstruction_=!0;async do(e){e.ticktock()}*steps(){yield this}}class c{_cpuTestInstruction_=!0;async do(e){e.cpu.RAM.reset()}*steps(){yield this}}},4867:(e,t,n)=>{n.d(t,{Ad:()=>l,Ge:()=>s,Rh:()=>y,S0:()=>h,Tn:()=>f,UM:()=>c,eB:()=>d,fK:()=>m,fe:()=>i,gM:()=>v,hh:()=>g,ik:()=>o,jl:()=>a,kW:()=>p});class r{span;constructor(e){this.span=e}async do(){}*steps(){yield this}}class i extends r{}class s extends r{}class a{variable;value;index;constructor(e,t,n){this.variable=e,this.value=t,this.index=n}async do(e){e.setVar(this.variable,this.value,this.index)}*steps(){yield this}}class o{async do(e){e.output()}*steps(){yield this}}class l{outputs=[];constructor(e=[]){for(const t of e)this.addOutput(t)}addOutput(e){this.outputs.push({id:e.id,style:e.format?.style??"B",len:e.format?.width??-1,lpad:e.format?.lpad??1,rpad:e.format?.rpad??1,builtin:e.builtin,address:e.address})}async do(e){e.outputList(this.outputs),e.header()}*steps(){yield this}}class u{instructions=[];span;addInstruction(e){this.instructions.push(e)}async do(e){for(const t of this.instructions)t.do(e)}*steps(e){yield this}}class c extends u{repeat;constructor(e){super(),this.repeat=e}async do(){}*innerSteps(e){for(const t of this.instructions)yield*t.steps(e)}*steps(e){if(-1===this.repeat)for(yield this;;)yield*this.innerSteps(e);else for(let t=0;t<this.repeat;t++)yield this,yield*this.innerSteps(e)}}class p{x;y;op;constructor(e,t,n){this.x=e,this.y=t,this.op=n}check(e){const t=e.hasVar(this.x)?e.getVar(this.x):this.x,n=e.hasVar(this.y)?e.getVar(this.y):this.y;if("string"===typeof t||"string"===typeof n)switch(this.op){case"=":return`${t}`===`${n}`;case"<>":return`${t}`!==`${n}`}else switch(this.op){case"<":return t<n;case"<=":return t<=n;case">":return t>n;case">=":return t>=n;case"=":return t===n;case"<>":return t!==n}return!1}}class d extends u{condition;constructor(e){super(),this.condition=e}*steps(e){for(;this.condition.check(e);){yield this;for(const t of this.instructions)yield*t.steps(e)}}}class h{content;constructor(e){this.content=e}async do(e){e.echo(this.content)}*steps(){yield this}}class f{async do(e){e.clearEcho()}*steps(){yield this}}class m{file;constructor(e){this.file=e}async do(e){await e.loadROM(this.file)}*steps(){yield this}}class g{file;constructor(e){this.file=e}async do(e){await e.load(this.file)}*steps(){yield this}}class y{file;constructor(e){this.file=e}async do(e){this.file&&await e.compareTo(this.file)}*steps(){yield this}}class v{file;constructor(e){this.file=e}async do(e){this.file&&e.outputFile(this.file)}*steps(){yield this}}},9937:(e,t,n)=>{n.d(t,{V:()=>l});var r=n(2469),i=n(4544),s=n(7844);class a{variable;fmt;lPad;rPad;len;index;builtin;constructor(e,t="%B1.1.1",n,i,s,a,o){if(this.variable=e,t.startsWith("%")&&void 0===n&&void 0===i&&void 0===s){const{fmt:e,lPad:n,rPad:r,len:i}=t.match(/^%(?<fmt>[BDXS])(?<lPad>\d+)\.(?<len>\d+)\.(?<rPad>\d+)$/)?.groups;this.fmt=e,this.lPad=parseInt(n),this.rPad=parseInt(r),this.len=parseInt(i),this.builtin=!1,this.index=-1}else(0,r.vA)(["B","X","D","S"].includes(t[0])),this.fmt=t[0],this.len=n??3,this.lPad=i??1,this.rPad=s??1,this.builtin=a??!1,this.index=o??-1}header(e){let t=`${this.variable}`;if(this.builtin){t=`${t}[${this.index>=0?this.index:""}]`}return t.length>this.len+this.lPad+this.rPad?t.substring(0,this.len+this.lPad+this.rPad):this.padCenter(t)}print(e){const t=e.getVar(this.variable,this.index);if("S"===this.fmt)return this.padLeft(t);const n=(0,{B:s.e5,D:s.FN,X:s.uh}[this.fmt])(t);return"D"===this.fmt?this.padRight(n):this.padLeft(n.slice(n.length-this.len))}padCenter(e){const t=this.lPad+this.len+this.rPad,n=Math.floor((t-e.length)/2),r=t-n-e.length,i=n+e.length,s=i+r;return e=(e=e.padStart(i)).padEnd(s)}padLeft(e){e=e.substring(0,this.len);const t=this.rPad+this.len,n=this.lPad+t;return e=(e=e.padEnd(t)).padStart(n)}padRight(e){e=e.substring(0,this.len);const t=this.lPad+this.len,n=this.rPad+t;return e=(e=e.padStart(t)).padEnd(n)}}var o=n(4867);class l{instructions=[];_outputList=[];_log="";fs=new i.Q2;doEcho;doCompareTo;dir;outputFileName;constructor(e,t,n){this.doEcho=t,this.doCompareTo=n,this.dir=e}setFileSystem(e){return this.fs=e,this}echo(e){this.doEcho?.(e)}clearEcho(){this.doEcho?.("")}async loadROM(e){}async load(e){}async compareTo(e){this.doCompareTo?.(e)}outputFile(e){this.outputFileName=e}createOutputs(e){return e.map((e=>{if(-1===e.len)if("time"===e.id)e.len=7,e.style="S";else{const t=this.getWidth(e.id,e.address);"B"===e.style?e.len=t:"D"===e.style?e.len=Math.ceil(Math.log(t)):"X"===e.style&&(e.len=Math.ceil(t/4))}return new a(e.id,e.style,e.len,e.lpad,e.rpad,e.builtin,e.address)}))}outputList(e){this._outputList=this.createOutputs(e)}addInstruction(e){this.instructions.push(e)}reset(){return this._steps=function*(e){for(const t of e.instructions)yield*t.steps(e)}(this),this._step=this._steps.next(),this._log="",this}_steps;_step;get steps(){return void 0===this._steps&&(this.reset(),this._steps=(0,r.Z1)(this._steps,"Reset did not initialize steps"),this._step=(0,r.Z1)(this._step,"Reset did not find first step")),this._steps}get currentStep(){return this._step?.value}get done(){return this._step?.done??!1}async step(){for(;!this._step.done;){if(await this._step.value.do(this),this._step=this.steps.next(),this._step.value instanceof o.fe)return this._step=this.steps.next(),!1;if(this._step.value instanceof o.Ge)return!0}return!0}async run(){for(this.reset();!await this.step(););}breakpoints=new Map;addBreakpoint(e,t){this.breakpoints.set(e,t)}clearBreakpoints(){this.breakpoints.clear()}output(){const e=this._outputList.map((e=>e.print(this)));this._log+=`|${e.join("|")}|\n`}header(){const e=this._outputList.map((e=>e.header(this)));this._log+=`|${e.join("|")}|\n`}log(){return this._log}}},8783:(e,t,n)=>{n.d(t,{Y:()=>l,a:()=>u});var r=n(2469),i=n(7076),s=n(5087),a=n(9976),o=n(9937);class l extends o.V{vm=new s.Vm;doLoad;static from(e,t={}){const n=new l(t);return(0,a.G)(n,e)}constructor({dir:e,doEcho:t,doLoad:n,compareTo:r}={}){super(e,t,r),this.doLoad=n}using(e){return this.fs=e,this}with(e){return this.vm=e,this}async load(e){if(!this.dir)return;const t=(0,r.Z1)(this.dir?.split("/").slice(0,-1).join("/")),n=await(this.doLoad?.(e?`${t}/${e}`:t));n&&(this.vm=n)}hasVar(e,t){return"string"!==typeof e&&(t=e,e="RAM"),"RAM"===e&&void 0!==t&&t>0&&t<i.XK.SIZE||["argument","local","static","constant","this","that","pointer","temp"].includes(e.toLowerCase())}getVar(e,t){return"string"!==typeof e&&(t=e,e="RAM"),"RAM"===e&&void 0!==t?this.vm.RAM.get(t):this.vm.memory.getSegment(e,t??0)}getWidth(e,t){return 16}setVar(e,t,n){if("string"!==typeof e&&(n=e,e="RAM"),"RAM"!==e||void 0===n)if(void 0!==n)this.vm.memory.setSegment(e,n,t);else switch(e.toLowerCase()){case"sp":this.vm.memory.SP=t;break;case"arg":case"argument":this.vm.memory.ARG=t,this.vm.segmentInitializations.argument.initialized=!0;break;case"lcl":case"local":this.vm.memory.LCL=t,this.vm.segmentInitializations.local.initialized=!0;break;case"this":this.vm.memory.THIS=t,this.vm.invocation.thisInitialized=!0;break;case"that":this.vm.memory.THAT=t,this.vm.invocation.thatInitialized=!0}else this.vm.RAM.set(n,t)}vmstep(){this.vm.step()}}class u{_vmTestInstruction_=!0;async do(e){e.vmstep()}*steps(){yield this}}},7496:(e,t,n)=>{n.d(t,{k:()=>i,m:()=>a,op:()=>s});var r=n(8739);function i(e){return 32768&e?function(e){e&=65535;const t=(4096&e)>>12,n=(4032&e)>>6,i=(56&e)>>3,s=7&e;if(void 0===r.Lo.op[n])return"#ERR";let a=r.Lo.op[n];t&&(a=a.replace(/A/g,"M"));const o=r.uW.op[i],l=r.ft.op[s];let u=a;o&&(u=`${o}=${u}`);l&&(u=`${u};${l}`);return u}(e):function(e){return"@"+(32767&e).toString(10)}(e)}function s(e){return"@"===e[0]?function(e){return parseInt(e.substring(1),10)}(e):function(e){const t=e.match(/(?:(?<assignExists>.+)=)?(.+)(?:;(?<jumpExists>.+))?/),{assignExists:n,jumpExists:i}=t?.groups??{},s=e.match(/(?:(?<assign>[AMD]{1,3})=)?(?<operation>[-+!01ADM&|]{1,3})(?:;(?<jump>JGT|JLT|JGE|JLE|JEQ|JMP))?/);let{assign:o,jump:l}=s?.groups??{};const{operation:u}=s?.groups??{};if(o=o??(n?void 0:""),l=l??(i?void 0:""),s?.[0]!=e||!(0,r.Nt)(o)||!(0,r.Qv)(l)||!(0,r.nf)(u))throw new Error("Invalid c instruction");const c=u.includes("M"),p=r.uW.asm[o],d=r.ft.asm[l],h=r.Lo.getOp(u);return a(c,h,p,d)}(e)}function a(e,t,n,r){return 57344+(e?4096:0)+(t<<6)+(n<<3)+r}},7844:(e,t,n)=>{n.d(t,{FN:()=>h,Yp:()=>u,ZR:()=>l,_Q:()=>c,ad:()=>f,e5:()=>d,l8:()=>o,uh:()=>p,xu:()=>m});const r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];function i(e){return r[e]??"X"}function s(e){switch(e){case 0:return"0000";case 1:return"0001";case 2:return"0010";case 3:return"0011";case 4:return"0100";case 5:return"0101";case 6:return"0110";case 7:return"0111";case 8:return"1000";case 9:return"1001";case 10:return"1010";case 11:return"1011";case 12:return"1100";case 13:return"1101";case 14:return"1110";case 15:return"1111";default:return"erro"}}function a(e,t){return 65535&parseInt(e.replace(/[^\d a-f A-F +-.]/g,""),t)}function o(e){return a(e,16)}function l(e){return a(e,10)}function u(e){return a(e.replaceAll(" ",""),2)}function c(e){return e.toUpperCase().includes("X")?o(e):l(e)}function p(e){return`0x${i((61440&e)>>12)}${i((3840&e)>>8)}${i((240&e)>>4)}${i(15&e)}`}function d(e,t=16){return`${s((61440&e)>>12)}${s((3840&e)>>8)}${s((240&e)>>4)}${s(15&e)}`.substring(16-t)}function h(e){return 32768===(e&=65535)?"-32768":32768&e?`-${e=1+~e&32767}`:`${e}`}function f(e){return`${e&=65535}`}function m(e,t){let n=~((e&=65535)&(t&=65535));return n&=65535,n}},2548:(e,t,n)=>{n.d(t,{FY:()=>a,P9:()=>l,aN:()=>o});var r=n(270),i=n(8032);function s(e,t){const n=[];for(let r=0;r<t;r++)n.push(e.get(e.SP-t+r));return n}function a(e,t){const n=l[`${e}.${t.name.value}`];return n&&n.args.length==t.parameters.length&&n.args.every(((e,n)=>e==t.parameters[n].type.value))&&n.returnType==t.returnType.value}function o(e,t){return`${t.returnType} ${e}(${t.args.join(",")}`}const l={"Math.init":{func:(e,t)=>0,args:[],returnType:"void",type:"function"},"Math.multiply":{func:(e,t)=>{const[n,r]=s(e,2);return n*r&65535},args:["int","int"],returnType:"int",type:"function"},"Math.divide":{func:(e,t)=>{const[n,i]=s(e,2);return 0==i?(t.sys.error(r.X.DIVIDE_BY_ZERO),0):65535&Math.floor(n/i)},args:["int","int"],returnType:"int",type:"function"},"Math.min":{func:(e,t)=>{const[n,r]=s(e,2);return 65535&Math.min(n,r)},args:["int","int"],returnType:"int",type:"function"},"Math.max":{func:(e,t)=>{const[n,r]=s(e,2);return 65535&Math.max(n,r)},args:["int","int"],returnType:"int",type:"function"},"Math.sqrt":{func:(e,t)=>{const[n]=s(e,1);return n<0?(t.sys.error(r.X.SQRT_NEG),0):65535&Math.floor(Math.sqrt(n))},args:["int"],returnType:"int",type:"function"},"Math.abs":{func:(e,t)=>{const[n]=s(e,1);return 65535&Math.abs(n)},args:["int"],returnType:"int",type:"function"},"Screen.init":{func:(e,t)=>0,args:[],returnType:"void",type:"function"},"Screen.clearScreen":{func:(e,t)=>(t.screen.clear(),0),args:[],returnType:"void",type:"function"},"Screen.setColor":{func:(e,t)=>{const[n]=s(e,1);return t.screen.color=0!==n,0},args:["boolean"],returnType:"void",type:"function"},"Screen.drawPixel":{func:(e,t)=>{const[n,r]=s(e,2);return t.screen.drawPixel(n,r),0},args:["int","int"],returnType:"void",type:"function"},"Screen.drawLine":{func:(e,t)=>{const[n,r,i,a]=s(e,4);return t.screen.drawLine(n,r,i,a),0},args:["int","int","int","int"],returnType:"void",type:"function"},"Screen.drawRectangle":{func:(e,t)=>{const[n,r,i,a]=s(e,4);return t.screen.drawRect(n,r,i,a),0},args:["int","int","int","int"],returnType:"void",type:"function"},"Screen.drawCircle":{func:(e,t)=>{const[n,r,i]=s(e,3);return t.screen.drawCircle(n,r,i),0},args:["int","int","int"],returnType:"void",type:"function"},"Memory.init":{func:(e,t)=>0,args:[],returnType:"void",type:"function"},"Memory.peek":{func:(e,t)=>{const[n]=s(e,1);return e.get(n)},args:["int"],returnType:"int",type:"function"},"Memory.poke":{func:(e,t)=>{const[n,r]=s(e,2);return e.set(n,r),0},args:["int","int"],returnType:"void",type:"function"},"Memory.alloc":{func:(e,t)=>{const[n]=s(e,1);return t.memory.alloc(n)},args:["int"],returnType:"Array",type:"function"},"Memory.deAlloc":{func:(e,t)=>{const[n]=s(e,1);return t.memory.deAlloc(n),0},args:["Array"],returnType:"void",type:"function"},"Array.init":{func:(e,t)=>0,args:[],returnType:"void",type:"function"},"Array.new":{func:(e,t)=>{const[n]=s(e,1);return n<=0?(t.sys.error(r.X.ARRAY_SIZE_NOT_POSITIVE),0):t.memory.alloc(n)},args:["int"],returnType:"Array",type:"constructor"},"Array.dispose":{func:(e,t)=>{const[n]=s(e,1);return t.memory.deAlloc(n),0},args:[],returnType:"void",type:"method"},"String.init":{func:(e,t)=>0,args:[],returnType:"void",type:"function"},"String.new":{func:(e,t)=>{const[n]=s(e,1);return t.string.new(n)},args:["int"],returnType:"String",type:"constructor"},"String.dispose":{func:(e,t)=>{const[n]=s(e,1);return t.string.dispose(n),0},args:[],returnType:"void",type:"method"},"String.length":{func:(e,t)=>{const[n]=s(e,1);return t.string.length(n)},args:[],returnType:"int",type:"method"},"String.charAt":{func:(e,t)=>{const[n,r]=s(e,2);return t.string.charAt(n,r)},args:["int"],returnType:"char",type:"method"},"String.setCharAt":{func:(e,t)=>{const[n,r,i]=s(e,3);return t.string.setCharAt(n,r,i),0},args:["int","char"],returnType:"void",type:"method"},"String.appendChar":{func:(e,t)=>{const[n,r]=s(e,2);return t.string.appendChar(n,r)},args:["char"],returnType:"String",type:"method"},"String.eraseLastChar":{func:(e,t)=>{const[n]=s(e,1);return t.string.eraseLastChar(n),0},args:[],returnType:"void",type:"method"},"String.intValue":{func:(e,t)=>{const[n]=s(e,1);return t.string.intValue(n)},args:[],returnType:"int",type:"method"},"String.setInt":{func:(e,t)=>{const[n,r]=s(e,2);return t.string.setInt(n,r),0},args:["int"],returnType:"void",type:"method"},"String.backSpace":{func:(e,t)=>i.G_,args:[],returnType:"char",type:"function"},"String.doubleQuote":{func:(e,t)=>i.MD,args:[],returnType:"char",type:"function"},"String.newLine":{func:(e,t)=>i.qK,args:[],returnType:"char",type:"function"},"Output.init":{func:(e,t)=>0,args:[],returnType:"void",type:"function"},"Output.moveCursor":{func:(e,t)=>{const[n,r]=s(e,2);return t.output.moveCursor(n,r),0},args:["int","int"],returnType:"void",type:"function"},"Output.printChar":{func:(e,t)=>{const[n]=s(e,1);return t.output.printChar(n),0},args:["char"],returnType:"void",type:"function"},"Output.printString":{func:(e,t)=>{const[n]=s(e,1);return t.output.printString(n),0},args:["String"],returnType:"void",type:"function"},"Output.printInt":{func:(e,t)=>{const[n]=s(e,1);return t.output.printInt(n),0},args:["int"],returnType:"void",type:"function"},"Output.println":{func:(e,t)=>(t.output.println(),0),args:[],returnType:"void",type:"function"},"Output.backSpace":{func:(e,t)=>(t.output.backspace(),0),args:[],returnType:"void",type:"function"},"Keyboard.init":{func:(e,t)=>0,args:[],returnType:"void",type:"function"},"Keyboard.keyPressed":{func:(e,t)=>t.keyboard.keyPressed(),args:[],returnType:"char",type:"function"},"Keyboard.readChar":{func:(e,t)=>(t.keyboard.readChar(),0),args:[],returnType:"char",type:"function"},"Keyboard.readLine":{func:(e,t)=>{const[n]=s(e,1);return t.keyboard.readLine(n),0},args:["String"],returnType:"String",type:"function"},"Keyboard.readInt":{func:(e,t)=>{const[n]=s(e,1);return t.keyboard.readInt(n),0},args:["String"],returnType:"int",type:"function"},"Sys.halt":{func:(e,t)=>(t.sys.halt(),0),args:[],returnType:"void",type:"function"},"Sys.error":{func:(e,t)=>{const[n]=s(e,1);return t.sys.error(n),0},args:["int"],returnType:"void",type:"function"},"Sys.wait":{func:(e,t)=>{const[n]=s(e,1);return t.sys.wait(n),0},args:["int"],returnType:"void",type:"function"}}},270:(e,t,n)=>{var r;function i(e){return Object.values(r).includes(e)}n.d(t,{U:()=>i,X:()=>r}),function(e){e[e.SYS_WAIT_DURATION_NOT_POSITIVE=1]="SYS_WAIT_DURATION_NOT_POSITIVE",e[e.ARRAY_SIZE_NOT_POSITIVE=2]="ARRAY_SIZE_NOT_POSITIVE",e[e.DIVIDE_BY_ZERO=3]="DIVIDE_BY_ZERO",e[e.SQRT_NEG=4]="SQRT_NEG",e[e.ALLOC_SIZE_NOT_POSITIVE=5]="ALLOC_SIZE_NOT_POSITIVE",e[e.HEAP_OVERFLOW=6]="HEAP_OVERFLOW",e[e.ILLEGAL_PIXEL_COORD=7]="ILLEGAL_PIXEL_COORD",e[e.ILLEGAL_LINE_COORD=8]="ILLEGAL_LINE_COORD",e[e.ILLEGAL_RECT_COORD=9]="ILLEGAL_RECT_COORD",e[e.ILLEGAL_CENTER_COORD=12]="ILLEGAL_CENTER_COORD",e[e.ILLEGAL_RADIUS=13]="ILLEGAL_RADIUS",e[e.STRING_LENGTH_NEG=14]="STRING_LENGTH_NEG",e[e.GET_CHAR_INDEX_OUT_OF_BOUNDS=15]="GET_CHAR_INDEX_OUT_OF_BOUNDS",e[e.SET_CHAR_INDEX_OUT_OF_BOUNDS=16]="SET_CHAR_INDEX_OUT_OF_BOUNDS",e[e.STRING_FULL=17]="STRING_FULL",e[e.STRING_EMPTY=18]="STRING_EMPTY",e[e.STRING_INSUFFICIENT_CAPACITY=19]="STRING_INSUFFICIENT_CAPACITY",e[e.ILLEGAL_CURSOR_LOCATION=20]="ILLEGAL_CURSOR_LOCATION"}(r||(r={}))},8032:(e,t,n)=>{n.d(t,{Fz:()=>u,G_:()=>s,MD:()=>a,eY:()=>l,qK:()=>i});var r=n(270);const i=128,s=129,a=34;function o(e){return e-48}function l(e){return e.toString().split("").map((e=>e.charCodeAt(0)))}class u{memory;os;constructor(e,t){this.memory=e,this.os=t}new(e){e<0&&this.os.sys.error(r.X.STRING_LENGTH_NEG);const t=this.os.memory.alloc(e+2);return this.os.sys.halted?0:(this.memory.set(t,e),this.memory.set(t+1,0),t)}dispose(e){this.os.memory.deAlloc(e)}maxLength(e){return this.memory.get(e)}length(e){return this.memory.get(e+1)}setLength(e,t){this.memory.set(e+1,t)}charAt(e,t){return t<0||t>=this.length(e)?(this.os.sys.error(r.X.GET_CHAR_INDEX_OUT_OF_BOUNDS),0):this.memory.get(e+t+2)}setCharAt(e,t,n){t<0||t>=this.length(e)?this.os.sys.error(r.X.SET_CHAR_INDEX_OUT_OF_BOUNDS):this.memory.set(e+t+2,n)}appendChar(e,t){const n=this.length(e);return n==this.maxLength(e)?(this.os.sys.error(r.X.STRING_FULL),0):(this.setLength(e,n+1),this.setCharAt(e,n,t),e)}eraseLastChar(e){const t=this.length(e);0!=t?this.setLength(e,t-1):this.os.sys.error(r.X.STRING_EMPTY)}intValue(e){const t=[],n=45==this.charAt(e,0);for(let s=n?1:0;s<this.length(e)&&((r=this.charAt(e,s))>=48&&r<=57);s++)t.push(o(this.charAt(e,s)));var r;const i=t.reduce(((e,t)=>10*e+t),0);return n?-i:i}setInt(e,t){const n=l(t);if(n.length>this.maxLength(e))this.os.sys.error(r.X.STRING_INSUFFICIENT_CAPACITY);else{this.setLength(e,0);for(const t of n)this.appendChar(e,t)}}}},5087:(e,t,n)=>{n.d(t,{IG:()=>w,h0:()=>S,Vm:()=>x});var r=n(5874),i=n(3977),s=n(2548),a=n(7076);class o extends a.XK{strict=!0;get SP(){return this.get(0)}set SP(e){this.set(0,e)}get LCL(){return this.get(1)}set LCL(e){this.set(1,e)}get ARG(){return this.get(2)}set ARG(e){this.set(2,e)}get THIS(){return this.get(3)}set THIS(e){this.set(3,e)}get THAT(){return this.get(4)}set THAT(e){this.set(4,e)}get statics(){const e=[];for(let t=16;t<256;t++)e.push(this.get(t));return e}constructor(){super(),this.set(0,256)}baseSegment(e,t){if(this.strict&&(t<0||t>32767))return(0,r._)(new Error(`Illegal offset value ${t} (must be between 0 and 32767)`));switch(e){case"argument":return(0,r.Ok)(this.ARG+t);case"constant":return(0,r.Ok)(t);case"local":return(0,r.Ok)(this.LCL+t);case"pointer":if(this.strict&&t>1)throw new Error(`pointer out of bounds access (pointer can be 0 for this, 1 for that, but got ${t}`);return(0,r.Ok)(0===t?3:4);case"static":return this.strict&&t>239?(0,r._)(new Error(`Cannot access statics beyond 239: ${t}`)):(0,r.Ok)(16+t);case"temp":return this.strict&&t>7?(0,r._)(new Error(`Temp out of bounds access (temp can be 0 to 7, but got ${t}`)):(0,r.Ok)(5+t);case"that":return(0,r.Ok)(this.THAT+t);case"this":return(0,r.Ok)(this.THIS+t)}}getSegment(e,t){if("constant"===e){if(this.strict&&(t<0||t>32767))throw new Error(`Illegal offset value ${t} (must be between 0 and 32767)`);return t}const n=this.baseSegment(e,t);if((0,r.ys)(n))throw(0,r._)(n);return this.get((0,r.Ok)(n))}setSegment(e,t,n){const i=this.baseSegment(e,t);if((0,r.ys)(i))throw(0,r._)(i);this.set((0,r.Ok)(i),n)}argument(e){return this.getSegment("argument",e)}local(e){return this.getSegment("local",e)}static(e){return this.getSegment("static",e)}constant(e){return this.getSegment("constant",e)}this(e){return this.getSegment("this",e)}that(e){return this.getSegment("that",e)}pointer(e){return this.getSegment("pointer",e)}temp(e){return this.getSegment("temp",e)}push(e){const t=this.SP;this.set(t,e),this.set(0,t+1)}pop(){if(this.strict&&256===this.SP)throw new Error("Cannot pop the stack below 256 in strict mode");this.set(0,this.SP-1);return this.get(this.SP)}pushFrame(e,t,n){const r=this.SP,i=r-t;this.set(r,e),this.set(r+1,this.LCL),this.set(r+2,this.ARG),this.set(r+3,this.THIS),this.set(r+4,this.THAT),this.set(2,i),this.set(1,r+5);const s=r+5;for(let a=0;a<n;a++)this.set(s+a,0);return this.set(0,s+n),r}popFrame(){const e=this.LCL,t=this.get(e-5),n=this.pop();return this.set(this.ARG,n),this.set(0,this.ARG+1),this.set(4,this.get(e-1)),this.set(3,this.get(e-2)),this.set(2,this.get(e-3)),this.set(1,this.get(e-4)),t}getFrame(e,t,n,r,i,s){const a=e-t,o=e+5,l=o+n,u=s-l;return{args:{base:a,count:t,values:[...this.map(((e,t)=>t),a,a+t)]},locals:{base:o,count:n,values:[...this.map(((e,t)=>t),o,o+n)]},stack:{base:l,count:u,values:[...this.map(((e,t)=>t),l,l+u)]},this:{base:l,count:r,values:[...this.map(((e,t)=>t),this.THIS,this.THIS+r)]},that:{base:l,count:i,values:[...this.map(((e,t)=>t),this.THAT,this.THAT+i)]},frame:{RET:this.get(e),LCL:this.LCL,ARG:this.ARG,THIS:this.THIS,THAT:this.THAT}}}getVmState(e=240){const t=[...this.map(((e,t)=>t),5,13)],n=[...this.map(((e,t)=>t),13,16)],r=[...this.map(((e,t)=>t),16,16+e)];return{"0: SP":this.SP,"1: LCL":this.LCL,"2: ARG":this.ARG,"3: THIS":this.THIS,"4: THAT":this.THAT,temps:t,internal:n,static:r}}binOp(e){const t=65535&e(this.get(this.SP-2),this.get(this.SP-1));this.set(this.SP-2,t),this.set(0,this.SP-1)}unOp(e){const t=65535&e(this.get(this.SP-1));this.set(this.SP-1,t)}comp(e){this.binOp(((t,n)=>e(t,n)?-1:0))}}var l=n(8032);class u{memory;os;animationFrameId=void 0;cancel=!1;constructor(e,t){this.memory=e,this.os=t}keyPressed(){return this.memory.get(a.ky)}readCharLoop(e){let t=!1,n=0;const r=()=>{if(this.cancel)return;let i=!1;this.os.paused||(t||0===this.keyPressed()||(t=!0,n=this.keyPressed()),t&&0===this.keyPressed()&&(i=!0,e(n))),i||(this.animationFrameId=requestAnimationFrame(r))};r()}readChar(){this.os.sys.block(),this.os.output.drawCursor(),new Promise((e=>{this.readCharLoop(e)})).then((e=>{this.os.output.printChar(e),this.os.sys.release(e)}))}readLineLoop(e){const t=this.os.string.new(100);this.os.sys.halted&&e(0);let n=!1,r=0;const i=()=>{if(this.cancel)return;let s=!1;this.os.paused||(n||0==this.keyPressed()||(n=!0,r=this.keyPressed()),n&&0==this.keyPressed()&&(n=!1,r==l.G_?(this.os.string.length(t)>0&&this.os.output.backspace(),this.os.string.eraseLastChar(t)):r==l.qK?(e(t),s=!0):(this.os.string.appendChar(t,r),this.os.sys.halted&&e(0),this.os.output.printChar(r),this.os.output.drawCursor()))),s||(this.animationFrameId=requestAnimationFrame(i))};i()}readLine(e){this.os.sys.block(),this.os.output.printString(e),this.os.output.drawCursor(),new Promise((e=>{this.readLineLoop(e)})).then((e=>{this.os.sys.halted||(this.os.output.clearChar(),this.os.output.println()),this.os.sys.release(e)}))}readInt(e){this.os.sys.block(),this.os.output.printString(e),this.os.output.drawCursor(),new Promise((e=>{this.readLineLoop(e)})).then((e=>{this.os.sys.halted||(this.os.output.clearChar(),this.os.output.println()),this.os.sys.release(this.os.string.intValue(e))}))}dispose(){this.cancel=!0,this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}}var c=n(270);class p{memory;os;freeSegments=[{address:2048,length:14336}];constructor(e,t){this.memory=e,this.os=t}alloc(e){if(e<=0)return this.os.sys.error(c.X.ARRAY_SIZE_NOT_POSITIVE),0;for(let t=0;t<this.freeSegments.length;t++){const n=this.freeSegments[t];if(n.length>=e){const r=n.address;return n.address+=e+1,n.length-=e+1,0===n.length&&this.freeSegments.splice(t,1),this.memory.set(r,e),r+1}}return this.os.sys.error(c.X.HEAP_OVERFLOW),0}deAlloc(e){const t=this.memory.get(e-1);this.freeSegments.push({address:e-1,length:t+1})}}const d=function(){const e=new Array(126);return e[32]=h(["        ","        ","        ","        ","        ","        ","        ","        ","        ","        ","        "]),e[33]=h(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),e[34]=h([" \u2588\u2588 \u2588\u2588  "," \u2588\u2588 \u2588\u2588  ","  \u2588 \u2588   ","        ","        ","        ","        ","        ","        ","        ","        "]),e[35]=h(["        "," \u2588  \u2588   "," \u2588  \u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   "," \u2588  \u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   "," \u2588  \u2588   ","        ","        "]),e[36]=h(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588      "," \u2588\u2588\u2588\u2588   ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        "]),e[37]=h(["        ","        ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588  \u2588\u2588  ","\u2588   \u2588\u2588  ","        ","        "]),e[38]=h(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        "]),e[39]=h(["  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588     ","        ","        ","        ","        ","        ","        ","        ","        "]),e[40]=h(["   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","        ","        "]),e[41]=h([" \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","        ","        "]),e[42]=h(["        ","        ","        ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","        ","        ","        "]),e[43]=h(["        ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588\u2588\u2588\u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","        "]),e[44]=h(["        ","        ","        ","        ","        ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588     ","        "]),e[45]=h(["        ","        ","        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        ","        ","        ","        "]),e[46]=h(["        ","        ","        ","        ","        ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),e[47]=h(["        ","        ","     \u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      ","\u2588       ","        ","        "]),e[48]=h(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","        ","        "]),e[49]=h(["  \u2588\u2588    "," \u2588\u2588\u2588    ","\u2588\u2588\u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),e[50]=h([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),e[51]=h([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","  \u2588\u2588\u2588   ","    \u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[52]=h(["    \u2588   ","   \u2588\u2588   ","  \u2588\u2588\u2588   "," \u2588 \u2588\u2588   ","\u2588  \u2588\u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  ","   \u2588\u2588   ","   \u2588\u2588   ","  \u2588\u2588\u2588\u2588  ","        ","        "]),e[53]=h(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588\u2588\u2588   ","    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[54]=h(["  \u2588\u2588\u2588   "," \u2588\u2588     ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[55]=h(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588   \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),e[56]=h([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[57]=h([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   "," \u2588\u2588\u2588    ","        ","        "]),e[58]=h(["        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","        "]),e[59]=h(["        ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588     ","        ","        "]),e[60]=h(["        ","        ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","        ","        "]),e[61]=h(["        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        ","        ","        "]),e[62]=h(["        ","        ","\u2588\u2588      "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588      ","        ","        "]),e[64]=h([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588      "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[63]=h([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),e[65]=h(["  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[66]=h(["\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","        ","        "]),e[67]=h(["  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588   \u2588  "," \u2588\u2588 \u2588\u2588  ","  \u2588\u2588\u2588   ","        ","        "]),e[68]=h(["\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","        ","        "]),e[69]=h(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588 \u2588    ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588    ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),e[70]=h(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588 \u2588    ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588    ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","        ","        "]),e[71]=h(["  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588   \u2588  ","\u2588\u2588      ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588 \u2588\u2588  ","  \u2588\u2588 \u2588  ","        ","        "]),e[72]=h(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[73]=h([" \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[74]=h(["  \u2588\u2588\u2588\u2588  ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","   \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588\u2588    ","        ","        "]),e[75]=h(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[76]=h(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),e[77]=h(["\u2588    \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[78]=h(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[79]=h([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[80]=h(["\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","        ","        "]),e[81]=h([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588\u2588  "," \u2588\u2588\u2588\u2588   ","    \u2588\u2588  ","        "]),e[82]=h(["\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[83]=h([" \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588     ","  \u2588\u2588\u2588   ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[84]=h(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588 \u2588\u2588 \u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[85]=h(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[86]=h(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),e[87]=h(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   ","        ","        "]),e[88]=h(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[89]=h(["\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[90]=h(["\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588   \u2588\u2588  ","   \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588   \u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),e[91]=h([" \u2588\u2588\u2588\u2588   "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[92]=h(["        ","        ","\u2588       ","\u2588\u2588      "," \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","    \u2588\u2588  ","     \u2588  ","        ","        "]),e[94]=h(["   \u2588    ","  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        ","        ","        ","        ","        ","        ","        "]),e[95]=h(["        ","        ","        ","        ","        ","        ","        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        "]),e[96]=h([" \u2588\u2588     ","  \u2588\u2588    ","   \u2588\u2588   ","        ","        ","        ","        ","        ","        ","        ","        "]),e[97]=h(["        ","        ","        "," \u2588\u2588\u2588    ","   \u2588\u2588   "," \u2588\u2588\u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        "]),e[98]=h(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[99]=h(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[100]=h(["    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","  \u2588\u2588\u2588\u2588  "," \u2588\u2588 \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[101]=h(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[102]=h(["  \u2588\u2588\u2588   "," \u2588\u2588 \u2588\u2588  "," \u2588\u2588  \u2588  "," \u2588\u2588     ","\u2588\u2588\u2588\u2588    "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     ","\u2588\u2588\u2588\u2588    ","        ","        "]),e[103]=h(["        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        "]),e[104]=h(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[105]=h(["  \u2588\u2588    ","  \u2588\u2588    ","        "," \u2588\u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[106]=h(["    \u2588\u2588  ","    \u2588\u2588  ","        ","   \u2588\u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        "]),e[107]=h(["\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","\u2588\u2588\u2588\u2588    ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[108]=h([" \u2588\u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[109]=h(["        ","        ","        ","\u2588 \u2588\u2588\u2588   ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588 \u2588  ","\u2588\u2588 \u2588 \u2588  ","\u2588\u2588 \u2588 \u2588  ","\u2588\u2588 \u2588 \u2588  ","        ","        "]),e[110]=h(["        ","        ","        ","\u2588 \u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[111]=h(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[112]=h(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588   ","\u2588\u2588      ","\u2588\u2588      ","        "]),e[113]=h(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","    \u2588\u2588  ","        "]),e[114]=h(["        ","        ","        ","\u2588 \u2588\u2588\u2588   ","\u2588\u2588\u2588 \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588      ","\u2588\u2588      ","\u2588\u2588\u2588     ","        ","        "]),e[115]=h(["        ","        ","        "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588     ","   \u2588\u2588   ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","        ","        "]),e[116]=h(["  \u2588     "," \u2588\u2588     "," \u2588\u2588     ","\u2588\u2588\u2588\u2588    "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588     "," \u2588\u2588 \u2588\u2588  ","  \u2588\u2588\u2588   ","        ","        "]),e[117]=h(["        ","        ","        ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   ","\u2588\u2588 \u2588\u2588   "," \u2588\u2588 \u2588\u2588  ","        ","        "]),e[118]=h(["        ","        ","        ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","        ","        "]),e[119]=h(["        ","        ","        ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  "," \u2588  \u2588   ","        ","        "]),e[120]=h(["        ","        ","        ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588   ","  \u2588\u2588    ","  \u2588\u2588    "," \u2588\u2588\u2588\u2588   ","\u2588\u2588  \u2588\u2588  ","        ","        "]),e[121]=h(["        ","        ","        ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588  \u2588\u2588  "," \u2588\u2588\u2588\u2588\u2588  ","    \u2588\u2588  ","   \u2588\u2588   ","\u2588\u2588\u2588\u2588    ","        "]),e[122]=h(["        ","        ","        ","\u2588\u2588\u2588\u2588\u2588\u2588  ","\u2588\u2588 \u2588\u2588   ","  \u2588\u2588    "," \u2588\u2588     ","\u2588\u2588  \u2588\u2588  ","\u2588\u2588\u2588\u2588\u2588\u2588  ","        ","        "]),e[123]=h(["   \u2588\u2588\u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588     ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","   \u2588\u2588\u2588  ","        ","        "]),e[124]=h(["  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","        ","        "]),e[125]=h(["\u2588\u2588\u2588     ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","   \u2588\u2588\u2588  ","  \u2588\u2588    ","  \u2588\u2588    ","  \u2588\u2588    ","\u2588\u2588\u2588     ","        ","        "]),e[126]=h([" \u2588\u2588  \u2588  ","\u2588 \u2588\u2588 \u2588  ","\u2588  \u2588\u2588   ","        ","        ","        ","        ","        ","        ","        ","        "]),e}();function h(e){return e.map((e=>e.split("").map((e=>"\u2588"==e))))}const f=new Array(a.RL).fill(0),m=!0;class g{memory;os;color=m;constructor(e,t){this.memory=e,this.os=t}clear(){this.memory.screen.loadBytes(f)}outOfBounds(e,t){return e<0||e>16*a.pc||t<0||t>a.dh}drawPixel(e,t){if(this.outOfBounds(e,t))return void this.os.sys.error(c.X.ILLEGAL_PIXEL_COORD);const n=32*t+Math.floor(e/16);let r=this.memory.screen.get(n);this.color?r|=1<<e%16:r&=~(1<<e%16),this.memory.screen.set(n,r)}drawLine(e,t,n,r){this.outOfBounds(e,t)||this.outOfBounds(n,r)?this.os.sys.error(c.X.ILLEGAL_LINE_COORD):e==n?this.drawVerticalLine(e,t,r):t==r?this.drawHorizontalLine(t,e,n):this.drawGeneralLine(e,t,n,r)}drawHorizontalLine(e,t,n){for(let r=Math.min(t,n);r<=Math.max(t,n);r++)this.drawPixel(r,e)}drawVerticalLine(e,t,n){for(let r=Math.min(t,n);r<=Math.max(t,n);r++)this.drawPixel(e,r)}drawGeneralLine(e,t,n,r){const i=Math.abs(n-e),s=Math.abs(r-t);let a=0,o=0,l=0;const u=e<n?1:-1,c=t<r?1:-1;for(;a<=i&&o<=s;)this.drawPixel(e+u*a,t+c*o),l<0?(a+=1,l+=s):(o+=1,l-=i)}drawRect(e,t,n,r){if(this.outOfBounds(e,t)||this.outOfBounds(n,r))this.os.sys.error(c.X.ILLEGAL_RECT_COORD);else for(let i=e;i<=n;i++)for(let e=t;e<=r;e++)this.drawPixel(i,e)}drawCircle(e,t,n){if(this.outOfBounds(e,t))this.os.sys.error(c.X.ILLEGAL_CENTER_COORD);else if(n>181)this.os.sys.error(c.X.ILLEGAL_RADIUS);else for(let r=-n;r<=n;r++)this.drawLine(e-Math.floor(Math.sqrt(n*n-r*r)),t+r,e+Math.floor(Math.sqrt(n*n-r*r)),t+r)}}class y{os;col=0;row=0;lastColor=!1;constructor(e){this.os=e}setColor(e){this.lastColor=this.os.screen.color,this.os.screen.color=e}restoreColor(){this.os.screen.color=this.lastColor}clearChar(){this.setColor(false),this.os.screen.drawRect(8*this.col,11*this.row,8*(this.col+1),11*(this.row+1)),this.restoreColor()}moveCursor(e,t){e<0||e>22||t<0||t>64?this.os.sys.error(c.X.ILLEGAL_CURSOR_LOCATION):(this.row=e,this.col=t,this.drawCursor())}println(){this.row=22==this.row?0:this.row+1,this.col=0}drawCursor(){this.clearChar(),this.setColor(m),this.os.screen.drawRect(8*this.col+2,11*this.row+2,8*(this.col+1)-2,11*(this.row+1)-2),this.restoreColor()}printChar(e){const t=d[e];if(t){this.clearChar(),this.setColor(m);for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)t[e][n]&&this.os.screen.drawPixel(8*this.col+n,11*this.row+e);this.restoreColor()}this.col+=1,64==this.col&&this.println()}printString(e){for(let t=0;t<this.os.string.length(e);t++)this.printChar(this.os.string.charAt(e,t))}printJsString(e){for(const t of e)this.printChar(t.charCodeAt(0))}printInt(e){for(const t of(0,l.eY)(e))this.printChar(t)}backspace(){this.clearChar(),this.col-=1,this.col<0&&(this.col=0,this.row-=1,this.row<0&&(this.row=0)),this.drawCursor()}}class v{os;_blocked=!1;_released=!1;_returnValue=0;_halted=!1;_exitCode=0;cancelWait=!1;animationFrameId;constructor(e){this.os=e}get blocked(){return this._blocked}get released(){return this._released}get halted(){return this._halted}get exitCode(){return this._exitCode}block(){this._blocked=!0}release(e){this._blocked=!1,this._returnValue=e??0,this._released=!0}readReturnValue(){return this._released=!1,this._returnValue}wait(e){e<=0?this.error(c.X.SYS_WAIT_DURATION_NOT_POSITIVE):(this.block(),(async()=>{await new Promise((t=>setTimeout(t,e))),this.release()})())}halt(){this._halted=!0,this._exitCode=0}error(e){this.os.output.printJsString(`ERR${e}`),this._halted=!0,this._exitCode=e}dispose(){this.cancelWait=!0,this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}}class b{vmMemory;screen;memory;string;output;keyboard;sys;paused=!1;constructor(e){this.vmMemory=e,this.screen=new g(this.vmMemory,this),this.memory=new p(this.vmMemory,this),this.string=new l.Fz(this.vmMemory,this),this.output=new y(this),this.keyboard=new u(this.vmMemory,this),this.sys=new v(this)}dispose(){this.keyboard.dispose(),this.sys.dispose()}}const w="__implicit",S={name:"Sys.init",labels:{},nVars:0,opBase:0,operations:[{op:"function",name:"Sys.init",nVars:0},{op:"call",name:"Math.init",nArgs:0},{op:"call",name:"String.init",nArgs:0},{op:"call",name:"Array.init",nArgs:0},{op:"call",name:"Output.init",nArgs:0},{op:"call",name:"Screen.init",nArgs:0},{op:"call",name:"Keyboard.init",nArgs:0},{op:"call",name:"Memory.init",nArgs:0},{op:"call",name:"Main.main",nArgs:0}]};class x{memory=new o;os=new b(this.memory);functionMap={};executionStack=[];entry="";segmentInitializations={local:{initialized:!1,n:0},argument:{initialized:!1,n:0}};functions=[];program=[];addedSysInit=!1;staticCount=0;statics={};getStaticCount(){return this.staticCount}returnLine=void 0;registerStatic(e,t){const n=e.split(".")[0],r=this.statics[n]??[];this.statics[n]=r;const i=r[t]??this.staticCount++;return r[t]=i,i}registerStatics(){for(const e of Object.values(this.functionMap))for(const t of e.operations)"push"!==t.op&&"pop"!==t.op||"static"!==t?.segment||(t.offset=this.registerStatic(e.name,t.offset))}static fileBasenameNoExtension(e){return e.includes("/")&&(e=e.split("/").pop()??""),e.includes(".")&&(e=e.split(".")[0]),e}static validateFile(e){for(const t of e.instructions)if("function"==t.op){const n=t.name.split(".");if(2!=n.length)return(0,r._)((0,i.$5)(`Illegal subroutine name ${t.name} (Expected <className>.<SubroutineName>)`,t.span));if(n[0]!=this.fileBasenameNoExtension(e.name))return(0,r._)((0,i.$5)(`File name ${e.name} doesn't match class name ${n[0]} (at ${t.name})`,t.span))}return(0,r.Ok)()}static validateFiles(e){const t=new Set;for(const n of e){if(t.has(n.name))return(0,r._)((0,i.$5)(`File ${n.name} already exists`));const e=this.validateFile(n);if((0,r.ys)(e))return e;t.add(n.name)}return(0,r.Ok)()}validateStackInstructions(){for(const e of Object.values(this.functionMap))for(const t of e.operations)if("pop"==t.op||"push"==t.op){const e=this.memory.baseSegment(t.segment,t.offset);if((0,r.ys)(e))return(0,r._)((0,i.$5)((0,r._)(e).message,t.span))}return(0,r.Ok)()}static validateFunctions(e){const t=new Set,n=[];for(const s of e){if("function"==s.op){if(s.nVars<0||s.nVars>32767)return(0,r._)((0,i.$5)(`Illegal number of local variables ${s.nVars} (Expected 0-32767)`,s.span));t.add(s.name)}if("call"==s.op){if(s.nArgs<0||s.nArgs>32767)return(0,r._)((0,i.$5)(`Illegal number of arguments ${s.nArgs} (Expected 0-32767)`,s.span));n.push(s)}}for(const a of n)if(!t.has(a.name)){const e=s.P9[a.name];if(!e)return(0,r._)((0,i.$5)(`Undefined function ${a.name}`,a.span));{const t="method"==e.type?e.args.length+1:e.args.length;if(t!=a.nArgs)return(0,r._)((0,i.$5)(`OS function ${a.name} expects ${t} arguments, not ${a.nArgs}`,a.span))}}return(0,r.Ok)()}static buildFromFiles(e){let t=this.validateFiles(e);if((0,r.ys)(t))return t;const n=e.map((e=>e.instructions)).reduce(((e,t)=>e.concat(t)));if(t=this.validateFunctions(n),(0,r.ys)(t))return t;const i=new x,s=i.load(n);return(0,r.ys)(s)?s:i.bootstrap()}static build(e){const t=this.validateFunctions(e);if((0,r.ys)(t))return t;const n=new x,i=n.load(e);return(0,r.ys)(i)?i:n.bootstrap()}static buildFunction(e,t){if("function"!==e[t].op)throw new Error("Only call buildFunction at the initial Function instruction");const{name:n,nVars:s}=e[t],a={name:n,nVars:s,labels:{},operations:[{op:"function",name:n,nVars:s,span:e[t].span}],opBase:0},o=new Set,l={};t+=1;e:for(;t<e.length;){switch(e[t].op){case"function":break e;case"add":case"sub":case"neg":case"and":case"or":case"not":case"gt":case"lt":case"eq":a.operations.push({op:e[t].op,span:e[t].span});break;case"push":case"pop":a.operations.push({op:e[t].op,segment:e[t].segment,offset:e[t].offset,span:e[t].span});break;case"call":a.operations.push({op:"call",name:e[t].name,nArgs:e[t].nArgs,span:e[t].span});break;case"goto":case"if-goto":{const{label:n}=e[t];l[n]=e[t].span,a.operations.push({op:e[t].op,label:n,span:e[t].span});break}case"label":{const{label:n}=e[t];if(o.add(n),a.labels[n])return(0,r._)((0,i.$5)(`Cannot redeclare label ${n} in function ${a.name} (previously at line ${a.labels[n]+1})`,e[t].span));a.labels[n]=a.operations.length,a.operations.push({op:"label",label:n,span:e[t].span});break}case"return":a.operations.push({op:"return",span:e[t].span})}t+=1}for(const u of Object.keys(l))if(!o.has(u))return(0,r._)((0,i.$5)(`Undeclared label ${u}`,l[u]));return(0,r.Ok)([a,t])}get RAM(){return this.memory}get Keyboard(){return this.memory.keyboard}get Screen(){return this.memory.screen}get invocation(){const e=this.executionStack.at(-1);return void 0===e?{frameBase:256,function:w,nArgs:0,opPtr:0,thisInitialized:!1,thatInitialized:!1}:e}get currentFunction(){return this.functionMap[this.invocation.function]}get operation(){if(this.currentFunction){if(this.invocation.opPtr>this.currentFunction.operations.length)throw new Error(`Current operation step beyond end of function operations (${this.invocation.opPtr} > ${this.currentFunction.operations.length})`);return this.currentFunction.operations[this.invocation.opPtr]}}load(e,t=!1){t&&(this.functionMap={},this.statics={},this.staticCount=0),"function"!==e[0]?.op&&e.unshift({op:"function",name:w,nVars:0});let n=0;for(;n<e.length;){const t=x.buildFunction(e,n);if((0,r.ys)(t))return t;const[s,a]=(0,r.oA)(t);if(this.functionMap[s.name]&&this.memory.strict&&s.name!==w&&s.name!==S.name)return(0,r._)((0,i.$5)(`VM Already has a function named ${s.name}`,e[0].span));this.functionMap[s.name]=s,n=a}const s=this.validateStackInstructions();return(0,r.ys)(s)?s:(this.registerStatics(),t&&this.bootstrap(),(0,r.Ok)(this))}bootstrap(){if(!this.functionMap[S.name]&&this.functionMap["Main.main"]&&(this.functionMap[S.name]=S,this.addedSysInit=!0),this.functionMap[S.name])this.entry=S.name;else if(this.functionMap[w])this.entry=w;else{const e=Object.keys(this.functionMap);1===e.length&&(this.entry=e[0])}if(this.functionMap[w]&&this.functionMap[S.name])return(0,r._)((0,i.$5)("Cannot use both bootstrap and an implicit function"));if(""===this.entry)return(0,r._)((0,i.$5)("Could not determine an entry point for VM"));this.functions=Object.values(this.functionMap),this.functions.sort(((e,t)=>e.name===this.entry?-1:t.name===this.entry?1:0));let e=0;return this.program=this.functions.reduce(((t,n)=>(n.name!=S.name&&(n.opBase=e),e+=n.operations.length,t.concat(n.operations))),[]),this.reset(),(0,r.Ok)(this)}reset(){this.executionStack=[{function:this.entry,opPtr:1,frameBase:256,nArgs:0,thisInitialized:!1,thatInitialized:!1}],this.memory.reset(),this.memory.SP=256,this.segmentInitializations={local:{initialized:!1,n:0},argument:{initialized:!1,n:0}},this.os.dispose(),this.os=new b(this.memory)}validateStackOp(e){if(this.currentFunction?.name==this.entry){for(const t of["local","argument"])if(e.segment==t){if(this.segmentInitializations[t].initialized)return void(this.segmentInitializations[t].n=Math.max(e.offset+1,this.segmentInitializations[t].n));throw new Error(`The ${t} segment cannot be accessed since it was not initialized`)}if("this"==e.segment&&this.invocation.thisInitialized)return void(this.invocation.thisN=Math.max(e.offset+1,this.invocation.thisN??0))}if("argument"==e.segment&&e.offset>=this.invocation.nArgs)throw new Error("Argument offset out of bounds");if("local"==e.segment&&e.offset>=this.functionMap[this.invocation.function]?.nVars)throw new Error("Local offset out of bounds");if("this"==e.segment&&!this.invocation.thisInitialized)throw new Error("The this segment cannot be accessed since it was not initialized");if("that"==e.segment&&!this.invocation.thatInitialized)throw new Error("The that segment cannot be accessed since it was not initialized")}setPaused(e=!0){this.os.paused=e}step(){if(this.os.sys.halted)return this.os.sys.exitCode;if(this.os.sys.blocked)return;if(this.os.sys.released&&"call"==this.operation?.op){const e=this.os.sys.readReturnValue(),t=this.memory.SP-this.operation.nArgs;return this.memory.set(t,e),this.memory.SP=t+1,void(this.invocation.opPtr+=1)}if(void 0==this.operation)return this.os.sys.halt(),this.step();const e=this.operation;if("label"===e.op)return this.invocation.opPtr+=1,this.step();switch(e.op){case"push":{this.validateStackOp(e);const t=this.memory.getSegment(e.segment,e.offset);this.memory.push(t);break}case"pop":{this.validateStackOp(e);const t=this.memory.pop();this.memory.setSegment(e.segment,e.offset,t),"pointer"==e.segment&&(0==e.offset?(this.invocation.thisInitialized=!0,this.invocation.thisN=this.memory.get(this.memory.THIS-1)):1==e.offset&&(this.invocation.thatInitialized=!0));break}case"add":this.memory.binOp(((e,t)=>e+t));break;case"sub":this.memory.binOp(((e,t)=>e-t));break;case"neg":this.memory.unOp((e=>-e));break;case"and":this.memory.binOp(((e,t)=>e&t));break;case"or":this.memory.binOp(((e,t)=>e|t));break;case"not":this.memory.unOp((e=>~e));break;case"eq":this.memory.comp(((e,t)=>e===t));break;case"lt":this.memory.comp(((e,t)=>e<t));break;case"gt":this.memory.comp(((e,t)=>e>t));break;case"goto":this.goto(e.label);break;case"if-goto":0!=this.memory.pop()&&this.goto(e.label);break;case"call":{const t=e.name;if(this.functionMap[t]){const n=this.memory.pushFrame(this.invocation.opPtr,e.nArgs,this.functionMap[t].nVars);this.executionStack.push({function:t,opPtr:0,nArgs:e.nArgs,frameBase:n,thisInitialized:!1,thatInitialized:!1})}else if(s.P9[t]){const n=s.P9[t].func(this.memory,this.os);if(this.os.sys.blocked)return;const r=this.memory.SP-e.nArgs;this.memory.set(r,n),this.memory.SP=r+1}break}case"return":{const e=this.derivedLine();this.executionStack.pop();const t=this.memory.popFrame();if(this.invocation.opPtr=t,0===this.executionStack.length)return this.returnLine=e,0;break}}this.invocation.opPtr+=1}goto(e){if(this.currentFunction){if(void 0===this.currentFunction.labels[e])throw new Error(`Attempting GOTO to unknown label ${e} in ${this.currentFunction.name}`);this.invocation.opPtr=this.currentFunction.labels[e]}}write(e){e.map((([e,t])=>{this.memory.set(e,t)}))}read(e){return e.map((e=>this.memory.get(e)))}vmStack(){return this.executionStack.map(((e,t)=>{const n=this.executionStack[t+1],r=n?n.frameBase-n.nArgs:this.memory.get(0);return this.makeFrame(e,r)}))}getUsedSegments(e){const t=new Set;for(const n of this.functionMap[e.function].operations)"push"!==n.op&&"pop"!=n.op||t.add(n.segment);return t}makeFrame(e=this.invocation,t){const n=this.functionMap[e.function];if(n.name===this.entry){const t=256+n.nVars,r=this.executionStack[1],i=r?r.frameBase-r.nArgs:this.memory.get(0),{ARG:s,LCL:a,THAT:o,THIS:l}=this.memory,u=this.segmentInitializations.argument.n,c=this.segmentInitializations.local.n,p=this.invocation.thisN??0;return{fn:n,args:{base:s,count:u,values:[...this.memory.map(((e,t)=>t),s,s+u)]},locals:{base:a,count:c,values:[...this.memory.map(((e,t)=>t),a,a+c)]},stack:{base:256,count:i-t,values:[...this.memory.map(((e,t)=>t),t,i)]},this:{base:l,count:p,values:[...this.memory.map(((e,t)=>t),l,l+p)]},that:{base:o,count:1,values:[this.memory.THAT]},frame:{ARG:s,LCL:a,RET:65535,THAT:o,THIS:l},usedSegments:this.getUsedSegments(e)}}const r=this.memory.getFrame(e.frameBase,e.nArgs,n.nVars,this.invocation.thisN??0,1,t);return r.fn=n,r.usedSegments=this.getUsedSegments(e),r}derivedLine(){return this.operation?.span?.line??this.returnLine??0}writeDebug(){const e=this.derivedLine(),t=Math.max(e-5,0),n=Math.min(e+3,this.program.length),r=this.program.slice(t,n).map(((n,r)=>`${r===e-t?"->":"  "} ${function(e){switch(e.op){case"add":case"and":case"sub":case"eq":case"gt":case"lt":case"neg":case"not":case"or":case"return":return`  ${e.op}`;case"goto":return`  ${e.op}    ${e.label}`;case"if-goto":return`  ${e.op} ${e.label}`;case"label":return`${e.op}     ${e.label}`;case"call":return`  ${e.op}    ${e.name} ${e.nArgs}`;case"function":return`${e.op}  ${e.name} ${e.nVars}`;case"pop":return`  ${e.op}     ${e.segment} ${e.offset}`;case"push":return`  ${e.op}    ${e.segment} ${e.offset}`}}(n)}`)).join("\n"),i=this.vmStack().at(-1);return i?r+"\n\n"+function(e){return[`Frame: ${e.fn?.name??"Unknown Fn"} ARG:${e.frame.ARG} LCL:${e.frame.LCL}`,`Args: ${k(e.args)}`,`Lcls: ${k(e.locals)}`,`Stck: ${k(e.stack)}`].join("\n")}(i):r}}function k(e){return`[${e.base};${e.count}][${e.values.join(", ")}]`}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.amdO={},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{34:"4001cc45",265:"c972afe7",269:"15067b76",288:"1e9ddeb7",297:"ced44b19",323:"dd594c2a",408:"0e94042f",510:"deba6b2d",519:"21373383",537:"20af7fd0",598:"4a05b889",608:"b28751cf",614:"f0939537",656:"1619e63a",744:"67ebdbf7",787:"f8bbd0db",828:"e024ae6c",965:"304934a8",983:"7ed0fcc0"}[e]+".chunk.js",n.miniCssF=e=>"static/css/"+e+"."+{34:"e91bd2aa",265:"b6d16a62",408:"4548b55f",519:"b31f5f69",598:"ea1594aa",744:"7dc0fc85",787:"e4fdad8f"}[e]+".chunk.css",n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="@nand2tetris/web:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var p=u[c];if(p.getAttribute("src")==r||p.getAttribute("data-webpack")==t+s){o=p;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(h);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/web-ide/",(()=>{if("undefined"!==typeof document){var e=e=>new Promise(((t,r)=>{var i=n.miniCssF(e),s=n.p+i;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){var a;if((i=(a=s[r]).getAttribute("data-href"))===e||i===t)return a}})(i,s))return t();((e,t,r,i,s)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",n.nc&&(a.nonce=n.nc),a.onerror=a.onload=n=>{if(a.onerror=a.onload=null,"load"===n.type)i();else{var r=n&&n.type,o=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+o+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,a.parentNode&&a.parentNode.removeChild(a),s(l)}},a.href=t,r?r.parentNode.insertBefore(a,r.nextSibling):document.head.appendChild(a)})(e,s,null,t,r)})),t={792:0};n.f.miniCss=(n,r)=>{t[n]?r.push(t[n]):0!==t[n]&&{34:1,265:1,408:1,519:1,598:1,744:1,787:1}[n]&&r.push(t[n]=e(n).then((()=>{t[n]=0}),(e=>{throw delete t[n],e})))}}})(),(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],u=0;if(a.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);u<a.length;u++)s=a[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunk_nand2tetris_web=self.webpackChunk_nand2tetris_web||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{messages:()=>I});var i={};n.r(i),n.d(i,{messages:()=>C});var s=n(8878),a=n(4664);const o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}var u=n(8256),c=n(1391),p=n(910);const d=(e,t)=>{const n=String(e).split("."),r=!n[1],i=Number(n[0])==e,s=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?1==s&&11!=a?"one":2==s&&12!=a?"two":3==s&&13!=a?"few":"other":1==e&&r?"one":"other"};var h=n(8330),f=n(3229),m=n(8029);const g={comment:[[/[^/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]},y={tokenizer:{root:[[/(@)(.+)/,["operator","keyword"]],[/(\()(.+)(\))/,["operator","keyword","operator"]],{include:"@whitespace"}],...g}},v={keywords:["class","int","char","boolean","void","let","function","method","constructor","var","if","do","while","else","return","true","false","null","this","field","static"],tokenizer:{root:[[/[a-zA-Z_][a-zA-Z0-9_]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/\d+/,"number"],[/"[^"\n]*"/,"string"],{include:"@whitespace"}],...g}},b={defaultToken:"invalid",keywords:["CHIP","CPU","IN","OUT","PARTS","BUILTIN","CLOCKED"],chips:["Nand","Nand16","Not","Not16","And","And16","Or","Or16","Or8Way","XOr","XOr16","Xor","Xor16","Mux","Mux16","Mux4Way16","Mux8Way16","DMux","DMux4Way","DMux8Way","HalfAdder","FullAdder","Add16","Inc16","ALU","ALUNoStat","DFF","Bit","Register","ARegister","DRegister","PC","RAM8","RAM64","RAM512","RAM4K","RAM16K","ROM32K","Screen","Keyboard","CPU","Computer","Memory","ARegister","DRegister"],operators:["="],symbols:/[=]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-zA-Z][a-zA-Z0-9]*/,{cases:{"@keywords":"keyword","@chips":"keyword.chip","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[a-zA-Z_$][\w$]*/,{token:"annotation",log:"annotation token: $0"}],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+(..\d+)?/,"number"],[/[;:,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/@escapes/,"string.escape"],[/'/,"string.invalid"]],...g}},w={Add16:"Add16(a = , b = , out = );",ALU:"ALU(x= , y= , zx= , nx= , zy= , ny= , f= , no= , out= , zr= , ng= );",And:"And(a= , b= , out= );",And16:"And16(a= , b= , out= );",ARegister:"ARegister(in= , load= , out= );",Bit:"Bit(in= , load= , out= );",CPU:"CPU(inM= , instruction= , reset= , outM= , writeM= , addressM= , pc= );",DFF:"DFF(in= , out= );",DMux:"DMux(in= , sel= , a= , b= );",DMux4Way:"DMux4Way(in= , sel= , a= , b= , c= , d= );",DMux8Way:"DMux8Way(in= , sel= , a= , b= , c= , d= , e= , f= , g= , h= );",DRegister:"DRegister(in= , load= , out= );",HalfAdder:"HalfAdder(a= , b= , sum= , carry= );",FullAdder:"FullAdder(a= , b= , c= , sum= , carry= );",Inc16:"Inc16(in= , out= );",Keyboard:"Keyboard(out= );",Memory:"Memory(in= , load= , address= , out= );",Mux:"Mux(a= , b= , sel= , out= );",Mux16:"Mux16(a= , b= , sel= , out= );",Mux4Way16:"Mux4Way16(a= , b= , c= , d= , sel= , out= );",Mux8Way16:"Mux8Way16(a= , b= , c= , d= , e= , f= , g= , h= , sel= , out= );",Nand:"Nand(a= , b= , out= );",Not16:"Not16(in= , out= );",Not:"Not(in= , out= );",Or:"Or(a= , b= , out= );",Or8Way:"Or8Way(in= , out= );",Or16:"Or16(a= , b= , out= );",PC:"PC(in= , load= , inc= , reset= , out= );",RAM8:"RAM8(in= , load= , address= , out= );",RAM64:"RAM64(in= , load= , address= , out= );",RAM512:"RAM512(in= , load= , address= , out= );",RAM4K:"RAM4K(in= , load= , address= , out= );",RAM16K:"RAM16K(in= , load= , address= , out= );",Register:"Register(in= , load= , out= );",ROM32K:"ROM32K(address= , out= );",Screen:"Screen(in= , load= , address= , out= );",Xor:"Xor(a = , b = , out = );"},S={provideCompletionItems:()=>({suggestions:Object.entries(w).map((([e,t])=>({label:e,kind:1,insertText:t})))})},x={hdl:b,cmp:{tokenizer:{root:[[/[a-z_$][\w$]*/,"identifier"],[/[ \t\r\n]+/,"white"],[/\d+\+?/,"number"],[/[|]/,"delimiter"]]}},tst:{defaultToken:"invalid",keywords:["output-list","compare-to","output-file","set","eval","output","echo","clear-echo","repeat","while","load","resetRam"],tokenizer:{root:[[/%[BDSX]\d+\.\d+\.\d+/,"keyword"],[/ROM32K/,"keyword"],[/[a-zA-Z-]+/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/%X[0-9a-fA-F]+/,"number.hex"],[/(%D)?\d+/,"number"],[/%B[01]+/,"number"],{include:"@whitespace"},[/[{}]/,"@bracket"],[/<>/,"operator"],[/[[\].]/,"operator"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/[;:!,]/,"delimiter"]],comment:[[/[^/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[/*]/,"comment"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],string:[[/[^\\"]+/,"string"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]]}},vm:{keywords:["push","pop","add","sub","neg","lt","gt","eq","and","or","not","function","call","return","label","goto","if-goto","argument","local","static","constant","this","that","pointer","temp"],tokenizer:{root:[[/if-goto/,"keyword"],[/[_a-zA-Z][_a-zA-Z0-9.$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/\d+/,"number"],{include:"@whitespace"}],...g}},asm:y,jack:v},k={hdl:S};let _=!1;const I=JSON.parse('{"J/hVSQ":[["0"]],"pDgeaz":[["title"]],"Pza0F/":"Allocated memory size must be positive (Memory.alloc)","PH2rP+":"Allow anonymous interaction tracking","zh5lcC":"Array size must be positive (Array.new)","BUAJAb":"Binary Code","++LBSt":"Builtin","dEgA5A":"Cancel","RsyXWz":"Cannot compute square root of a negative number (Math.sqrt)","Ow/xRO":"Cannot test a chip that has syntax errors","C7rK3y":"Chip","+yPBXI":"Choose file","3rHyAJ":"Clock","RG3szS":"close","C/8KpY":"Close the locally opened projects folder, and instead store your files in the browser\'s local storage.","UV+b1H":"Compare Code","oXeVWH":"Create a new file in the currently opened folder","A2O3d/":"Current projects folder","pvnfJD":"Dark","iGq+of":"Division by zero (Math.divide)","mzI/c+":"Download","Ovrln6":"Download .hdl files","qqcblq":"Download all files in this folder into a zip","QiMEIu":"Download the projects folder","9dwWEz":"Duration must be positive (Sys.wait)","uBAxNB":"Editor","lYGfRP":"English","J3L683":"Eval","7Bj3x9":"Failed","A9bii0":"Failed to load local file system.","EqbNAN":"Heap overflow (Memory.alloc)","SLzG45":"Illegal center coordinates (Screen.drawCircle)","EQU4AC":"Illegal cursor location (Output.moveCursor)","y4CC1u":"Illegal line coordinates (Screen.drawLine)","Lo+J/U":"Illegal pixel coordinates (Screen.drawPixel)","ijwovO":"Illegal radius (Screen.drawCircle)","5tI3XX":"Illegal rectangle coordinates (Screen.drawRectangle)","fkP0ib":"Insufficient string capacity (String.setInt)","vXIe7J":"Language","1njn7W":"Light","1/5eLk":"Load the compiled code into the VM emulator","Ng9wMt":"Local Project Files","etZuY4":"Maximum length must be non-negative (String.new)","QtwpF9":"NAND2Tetris Project Files","aP3N/0":"Ok","FZeS2z":"Open a folder containing Jack file(s)","1tSpqV":"Parse Error","nqMwPi":"Passed","e0NrBM":"Project","E+NWKU":"Pseudolocale","9aloPG":"References","rdShiY":"Registers","OfhWJH":"Reset","rG3WVm":"Select","k3v5G3":"Select a different projects folder","9IPDcR":"Select a projects folder","Tz0i8g":"Settings","wdxz7K":"Source","GbPVvk":"String index out of bounds (String.charAt)","IgLZZI":"String index out of bounds (String.setCharAt)","RE1zuN":"String is empty (String.eraseLastChar)","CACwfm":"String is full (String.appendChar)","LWSJ0G":"Symbol Table","RFMyN+":"Syntax errors in the HDL code or test","D+NlUC":"System","NnH3pK":"Test","FEr96N":"Theme","U0HZma":"Tracking","SUTY2p":"Use browser storage","zQo0yv":"Use Monaco Editor","q3JCcX":"Visualization","1qK+lw":"VM Code","2BSTzk":"VM Structures","l75CjT":"Yes","hDh8R1":"Your files were reset"}'),C=JSON.parse('{"J/hVSQ":[["0"]],"pDgeaz":[["title"]],"Pza0F/":"\xc0\u013a\u013a\u014d\u0107\xe0\u0163\u0113\u010f \u1e3f\u0113\u1e3f\u014d\u0155\u0177 \u015b\u0129\u017a\u0113 \u1e3f\u0169\u015b\u0163 \u0180\u0113 \u01a5\u014d\u015b\u0129\u0163\u0129v\u0113 (\u1e3e\u0113\u1e3f\u014d\u0155\u0177.\xe0\u013a\u013a\u014d\u0107)","PH2rP+":"\xc0\u013a\u013a\u014d\u0175 \xe0\u0144\u014d\u0144\u0177\u1e3f\u014d\u0169\u015b \u0129\u0144\u0163\u0113\u0155\xe0\u0107\u0163\u0129\u014d\u0144 \u0163\u0155\xe0\u0107\u0137\u0129\u0144\u011d","zh5lcC":"\xc0\u0155\u0155\xe0\u0177 \u015b\u0129\u017a\u0113 \u1e3f\u0169\u015b\u0163 \u0180\u0113 \u01a5\u014d\u015b\u0129\u0163\u0129v\u0113 (\xc0\u0155\u0155\xe0\u0177.\u0144\u0113\u0175)","BUAJAb":"\xdf\u0129\u0144\xe0\u0155\u0177 \u0106\u014d\u010f\u0113","++LBSt":"\xdf\u0169\u0129\u013a\u0163\u0129\u0144","dEgA5A":"\u0106\xe0\u0144\u0107\u0113\u013a","RsyXWz":"\u0106\xe0\u0144\u0144\u014d\u0163 \u0107\u014d\u1e3f\u01a5\u0169\u0163\u0113 \u015b\u01eb\u0169\xe0\u0155\u0113 \u0155\u014d\u014d\u0163 \u014d\u0192 \xe0 \u0144\u0113\u011d\xe0\u0163\u0129v\u0113 \u0144\u0169\u1e3f\u0180\u0113\u0155 (\u1e3e\xe0\u0163\u0125.\u015b\u01eb\u0155\u0163)","Ow/xRO":"\u0106\xe0\u0144\u0144\u014d\u0163 \u0163\u0113\u015b\u0163 \xe0 \u0107\u0125\u0129\u01a5 \u0163\u0125\xe0\u0163 \u0125\xe0\u015b \u015b\u0177\u0144\u0163\xe0x \u0113\u0155\u0155\u014d\u0155\u015b","C7rK3y":"\u0106\u0125\u0129\u01a5","+yPBXI":"\u0106\u0125\u014d\u014d\u015b\u0113 \u0192\u0129\u013a\u0113","3rHyAJ":"\u0106\u013a\u014d\u0107\u0137","RG3szS":"\u0107\u013a\u014d\u015b\u0113","C/8KpY":"\u0106\u013a\u014d\u015b\u0113 \u0163\u0125\u0113 \u013a\u014d\u0107\xe0\u013a\u013a\u0177 \u014d\u01a5\u0113\u0144\u0113\u010f \u01a5\u0155\u014d\u0134\u0113\u0107\u0163\u015b \u0192\u014d\u013a\u010f\u0113\u0155, \xe0\u0144\u010f \u0129\u0144\u015b\u0163\u0113\xe0\u010f \u015b\u0163\u014d\u0155\u0113 \u0177\u014d\u0169\u0155 \u0192\u0129\u013a\u0113\u015b \u0129\u0144 \u0163\u0125\u0113 \u0180\u0155\u014d\u0175\u015b\u0113\u0155\'\u015b \u013a\u014d\u0107\xe0\u013a \u015b\u0163\u014d\u0155\xe0\u011d\u0113.","UV+b1H":"\u0106\u014d\u1e3f\u01a5\xe0\u0155\u0113 \u0106\u014d\u010f\u0113","oXeVWH":"\u0106\u0155\u0113\xe0\u0163\u0113 \xe0 \u0144\u0113\u0175 \u0192\u0129\u013a\u0113 \u0129\u0144 \u0163\u0125\u0113 \u0107\u0169\u0155\u0155\u0113\u0144\u0163\u013a\u0177 \u014d\u01a5\u0113\u0144\u0113\u010f \u0192\u014d\u013a\u010f\u0113\u0155","A2O3d/":"\u0106\u0169\u0155\u0155\u0113\u0144\u0163 \u01a5\u0155\u014d\u0134\u0113\u0107\u0163\u015b \u0192\u014d\u013a\u010f\u0113\u0155","pvnfJD":"\u010e\xe0\u0155\u0137","iGq+of":"\u010e\u0129v\u0129\u015b\u0129\u014d\u0144 \u0180\u0177 \u017a\u0113\u0155\u014d (\u1e3e\xe0\u0163\u0125.\u010f\u0129v\u0129\u010f\u0113)","mzI/c+":"\u010e\u014d\u0175\u0144\u013a\u014d\xe0\u010f","Ovrln6":"\u010e\u014d\u0175\u0144\u013a\u014d\xe0\u010f .\u0125\u010f\u013a \u0192\u0129\u013a\u0113\u015b","qqcblq":"\u010e\u014d\u0175\u0144\u013a\u014d\xe0\u010f \xe0\u013a\u013a \u0192\u0129\u013a\u0113\u015b \u0129\u0144 \u0163\u0125\u0129\u015b \u0192\u014d\u013a\u010f\u0113\u0155 \u0129\u0144\u0163\u014d \xe0 \u017a\u0129\u01a5","QiMEIu":"\u010e\u014d\u0175\u0144\u013a\u014d\xe0\u010f \u0163\u0125\u0113 \u01a5\u0155\u014d\u0134\u0113\u0107\u0163\u015b \u0192\u014d\u013a\u010f\u0113\u0155","9dwWEz":"\u010e\u0169\u0155\xe0\u0163\u0129\u014d\u0144 \u1e3f\u0169\u015b\u0163 \u0180\u0113 \u01a5\u014d\u015b\u0129\u0163\u0129v\u0113 (\u015a\u0177\u015b.\u0175\xe0\u0129\u0163)","uBAxNB":"\u0112\u010f\u0129\u0163\u014d\u0155","lYGfRP":"\u0112\u0144\u011d\u013a\u0129\u015b\u0125","J3L683":"\u0112v\xe0\u013a","7Bj3x9":"\u0191\xe0\u0129\u013a\u0113\u010f","A9bii0":"\u0191\xe0\u0129\u013a\u0113\u010f \u0163\u014d \u013a\u014d\xe0\u010f \u013a\u014d\u0107\xe0\u013a \u0192\u0129\u013a\u0113 \u015b\u0177\u015b\u0163\u0113\u1e3f.","EqbNAN":"\u0124\u0113\xe0\u01a5 \u014dv\u0113\u0155\u0192\u013a\u014d\u0175 (\u1e3e\u0113\u1e3f\u014d\u0155\u0177.\xe0\u013a\u013a\u014d\u0107)","SLzG45":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u0107\u0113\u0144\u0163\u0113\u0155 \u0107\u014d\u014d\u0155\u010f\u0129\u0144\xe0\u0163\u0113\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u0106\u0129\u0155\u0107\u013a\u0113)","EQU4AC":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u0107\u0169\u0155\u015b\u014d\u0155 \u013a\u014d\u0107\xe0\u0163\u0129\u014d\u0144 (\u014c\u0169\u0163\u01a5\u0169\u0163.\u1e3f\u014dv\u0113\u0106\u0169\u0155\u015b\u014d\u0155)","y4CC1u":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u013a\u0129\u0144\u0113 \u0107\u014d\u014d\u0155\u010f\u0129\u0144\xe0\u0163\u0113\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u0139\u0129\u0144\u0113)","Lo+J/U":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u01a5\u0129x\u0113\u013a \u0107\u014d\u014d\u0155\u010f\u0129\u0144\xe0\u0163\u0113\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u01a4\u0129x\u0113\u013a)","ijwovO":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u0155\xe0\u010f\u0129\u0169\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u0106\u0129\u0155\u0107\u013a\u0113)","5tI3XX":"\u0128\u013a\u013a\u0113\u011d\xe0\u013a \u0155\u0113\u0107\u0163\xe0\u0144\u011d\u013a\u0113 \u0107\u014d\u014d\u0155\u010f\u0129\u0144\xe0\u0163\u0113\u015b (\u015a\u0107\u0155\u0113\u0113\u0144.\u010f\u0155\xe0\u0175\u0154\u0113\u0107\u0163\xe0\u0144\u011d\u013a\u0113)","fkP0ib":"\u0128\u0144\u015b\u0169\u0192\u0192\u0129\u0107\u0129\u0113\u0144\u0163 \u015b\u0163\u0155\u0129\u0144\u011d \u0107\xe0\u01a5\xe0\u0107\u0129\u0163\u0177 (\u015a\u0163\u0155\u0129\u0144\u011d.\u015b\u0113\u0163\u0128\u0144\u0163)","vXIe7J":"\u0139\xe0\u0144\u011d\u0169\xe0\u011d\u0113","1njn7W":"\u0139\u0129\u011d\u0125\u0163","1/5eLk":"\u0139\u014d\xe0\u010f \u0163\u0125\u0113 \u0107\u014d\u1e3f\u01a5\u0129\u013a\u0113\u010f \u0107\u014d\u010f\u0113 \u0129\u0144\u0163\u014d \u0163\u0125\u0113 V\u1e3e \u0113\u1e3f\u0169\u013a\xe0\u0163\u014d\u0155","Ng9wMt":"\u0139\u014d\u0107\xe0\u013a \u01a4\u0155\u014d\u0134\u0113\u0107\u0163 \u0191\u0129\u013a\u0113\u015b","etZuY4":"\u1e3e\xe0x\u0129\u1e3f\u0169\u1e3f \u013a\u0113\u0144\u011d\u0163\u0125 \u1e3f\u0169\u015b\u0163 \u0180\u0113 \u0144\u014d\u0144-\u0144\u0113\u011d\xe0\u0163\u0129v\u0113 (\u015a\u0163\u0155\u0129\u0144\u011d.\u0144\u0113\u0175)","QtwpF9":"\u0143\xc0\u0143\u010e2\u0162\u0113\u0163\u0155\u0129\u015b \u01a4\u0155\u014d\u0134\u0113\u0107\u0163 \u0191\u0129\u013a\u0113\u015b","aP3N/0":"\u014c\u0137","FZeS2z":"\u014c\u01a5\u0113\u0144 \xe0 \u0192\u014d\u013a\u010f\u0113\u0155 \u0107\u014d\u0144\u0163\xe0\u0129\u0144\u0129\u0144\u011d \u0135\xe0\u0107\u0137 \u0192\u0129\u013a\u0113(\u015b)","1tSpqV":"\u01a4\xe0\u0155\u015b\u0113 \u0112\u0155\u0155\u014d\u0155","nqMwPi":"\u01a4\xe0\u015b\u015b\u0113\u010f","e0NrBM":"\u01a4\u0155\u014d\u0134\u0113\u0107\u0163","E+NWKU":"\u01a4\u015b\u0113\u0169\u010f\u014d\u013a\u014d\u0107\xe0\u013a\u0113","9aloPG":"\u0154\u0113\u0192\u0113\u0155\u0113\u0144\u0107\u0113\u015b","rdShiY":"\u0154\u0113\u011d\u0129\u015b\u0163\u0113\u0155\u015b","OfhWJH":"\u0154\u0113\u015b\u0113\u0163","rG3WVm":"\u015a\u0113\u013a\u0113\u0107\u0163","k3v5G3":"\u015a\u0113\u013a\u0113\u0107\u0163 \xe0 \u010f\u0129\u0192\u0192\u0113\u0155\u0113\u0144\u0163 \u01a5\u0155\u014d\u0134\u0113\u0107\u0163\u015b \u0192\u014d\u013a\u010f\u0113\u0155","9IPDcR":"\u015a\u0113\u013a\u0113\u0107\u0163 \xe0 \u01a5\u0155\u014d\u0134\u0113\u0107\u0163\u015b \u0192\u014d\u013a\u010f\u0113\u0155","Tz0i8g":"\u015a\u0113\u0163\u0163\u0129\u0144\u011d\u015b","wdxz7K":"\u015a\u014d\u0169\u0155\u0107\u0113","GbPVvk":"\u015a\u0163\u0155\u0129\u0144\u011d \u0129\u0144\u010f\u0113x \u014d\u0169\u0163 \u014d\u0192 \u0180\u014d\u0169\u0144\u010f\u015b (\u015a\u0163\u0155\u0129\u0144\u011d.\u0107\u0125\xe0\u0155\xc0\u0163)","IgLZZI":"\u015a\u0163\u0155\u0129\u0144\u011d \u0129\u0144\u010f\u0113x \u014d\u0169\u0163 \u014d\u0192 \u0180\u014d\u0169\u0144\u010f\u015b (\u015a\u0163\u0155\u0129\u0144\u011d.\u015b\u0113\u0163\u0106\u0125\xe0\u0155\xc0\u0163)","RE1zuN":"\u015a\u0163\u0155\u0129\u0144\u011d \u0129\u015b \u0113\u1e3f\u01a5\u0163\u0177 (\u015a\u0163\u0155\u0129\u0144\u011d.\u0113\u0155\xe0\u015b\u0113\u0139\xe0\u015b\u0163\u0106\u0125\xe0\u0155)","CACwfm":"\u015a\u0163\u0155\u0129\u0144\u011d \u0129\u015b \u0192\u0169\u013a\u013a (\u015a\u0163\u0155\u0129\u0144\u011d.\xe0\u01a5\u01a5\u0113\u0144\u010f\u0106\u0125\xe0\u0155)","LWSJ0G":"\u015a\u0177\u1e3f\u0180\u014d\u013a \u0162\xe0\u0180\u013a\u0113","RFMyN+":"\u015a\u0177\u0144\u0163\xe0x \u0113\u0155\u0155\u014d\u0155\u015b \u0129\u0144 \u0163\u0125\u0113 \u0124\u010e\u0139 \u0107\u014d\u010f\u0113 \u014d\u0155 \u0163\u0113\u015b\u0163","D+NlUC":"\u015a\u0177\u015b\u0163\u0113\u1e3f","NnH3pK":"\u0162\u0113\u015b\u0163","FEr96N":"\u0162\u0125\u0113\u1e3f\u0113","U0HZma":"\u0162\u0155\xe0\u0107\u0137\u0129\u0144\u011d","SUTY2p":"\u0168\u015b\u0113 \u0180\u0155\u014d\u0175\u015b\u0113\u0155 \u015b\u0163\u014d\u0155\xe0\u011d\u0113","zQo0yv":"\u0168\u015b\u0113 \u1e3e\u014d\u0144\xe0\u0107\u014d \u0112\u010f\u0129\u0163\u014d\u0155","q3JCcX":"V\u0129\u015b\u0169\xe0\u013a\u0129\u017a\xe0\u0163\u0129\u014d\u0144","1qK+lw":"V\u1e3e \u0106\u014d\u010f\u0113","2BSTzk":"V\u1e3e \u015a\u0163\u0155\u0169\u0107\u0163\u0169\u0155\u0113\u015b","l75CjT":"\u0176\u0113\u015b","hDh8R1":"\u0176\u014d\u0169\u0155 \u0192\u0129\u013a\u0113\u015b \u0175\u0113\u0155\u0113 \u0155\u0113\u015b\u0113\u0163"}'),A=r,E=i;var O=n(6073),P=n(782);const L=function(){const{status:e}=(0,s.useContext)(p.L);return(0,P.jsx)("div",{children:e})},R=()=>(0,P.jsx)("footer",{className:"flex row justify-between",children:(0,P.jsx)(L,{})});var T=n(3600),N=n(3015),F=n(3499);function M(e,t,n){return{href:e.href,tool:e.tool,tooltip:null!==n&&void 0!==n?n:e.tool&&Object.keys(F.It).includes(e.tool)?F.It[e.tool]:"",icon:t,target:e.target}}const j={chip:"user_guide/chip.pdf",cpu:"user_guide/cpu.pdf",asm:"user_guide/asm.pdf",vm:"user_guide/vm.pdf",compiler:"user_guide/compiler.pdf"},D="Guide not available for this tool";const $=[M(F.Ay.chip,"memory"),M(F.Ay.cpu,"developer_board"),M(F.Ay.asm,"list_alt"),M(F.Ay.vm,"computer"),M(F.Ay.compiler,"code"),M(F.Ay.bitmap,"grid_on"),M(F.Ay.util,"function","Converter Tool"),{onClick:async function(e){if(!j[e.pathname])return void e.baseContext.setStatus(D);const t=j[e.pathname];404!==(await fetch(t)).status?window.open(t,"_blank","width=1000,height=800"):e.baseContext.setStatus(D)},tooltip:"Guide",icon:"menu_book"},{href:"https://github.com/nand2tetris/web-ide/issues/new/choose",icon:"bug_report",tooltip:"Bug Report"},{onClick:e=>{e.appContext.settings.open()},icon:"settings",tooltip:"Settings"},M(F.Ay.about,"info","About")],z=()=>{const e=(0,s.useContext)(m.BR),t=(0,s.useContext)(p.L),{title:n,setTool:r}=(0,s.useContext)(T.NQ),{setStatus:i}=(0,s.useContext)(p.L),a={};for(const l of $)l.href&&(a[l.href]=(0,s.useRef)(null));const o=(0,f.zy)().pathname.replaceAll("/","");return(0,P.jsx)("header",{children:(0,P.jsxs)("nav",{style:{width:"100%"},children:[(0,P.jsx)("ul",{children:(0,P.jsxs)("li",{children:[(0,P.jsx)("strong",{children:(0,P.jsx)("a",{href:"https://nand2tetris.org",target:"_blank",rel:"noreferrer",children:"NAND2Tetris"})}),F.It[o]&&` / ${F.It[o]}`,n&&` / ${n}`]})}),(0,P.jsx)("ul",{className:"icon-list",children:$.map((({href:n,icon:s,onClick:l,tooltip:u,target:c,tool:p})=>(0,P.jsxs)("li",{"data-tooltip":u,"data-placement":"bottom",onClick:()=>{var s;(r(p),i(""),l)?null===l||void 0===l||l({appContext:e,baseContext:t,pathname:o}):n&&(c&&localStorage.setItem(F.p3,n),null===(s=a[n].current)||void 0===s||s.click())},children:[(0,P.jsx)(N.I,{name:s}),n&&(c?(0,P.jsx)(h.N_,{to:n,ref:a[n],style:{display:"none"}}):(0,P.jsx)("a",{href:n,target:"new",ref:a[n],style:{display:"none"}}))]},s)))})]})})};var V=n(172),U=n(5270),B=n(5777);const W="version",H=13;function G(){var e;return Number(null!==(e=localStorage.getItem(W))&&void 0!==e?e:"0")}function q(e){localStorage.setItem(W,e.toString())}let K;const Q={0:async e=>{for(const n of["hdl","cmp","tst"])try{await e.writeFile(`/projects/01/Xor/Xor.${n}`,await e.readFile(`/projects/01/XOr/XOr.${n}`))}catch(t){}},1:async e=>{await(0,B.resetFiles)(e,["4"])},2:async e=>{await(0,B.resetTests)(e,["1"])},3:async e=>{await(0,B.resetTests)(e)},4:async e=>{await(0,B.resetFiles)(e,["7","8"])},5:async e=>{await(0,B.resetTests)(e,["3","5"])},6:async e=>{await(0,B.resetTests)(e,["4"])},7:async e=>{await(0,B.resetTests)(e,["1"])},8:async e=>{await(0,B.resetFiles)(e,["6"])},9:async e=>{await(0,B.resetTests)(e,["5"])},10:async e=>{await(0,B.resetTests)(e,["5"])},11:async e=>{await(0,B.resetTests)(e,["1"])},12:async e=>{for(const n of["hdl","cmp","tst"])try{await e.rm(`/projects/01/Xor/Xor.${n}`)}catch(t){}}},Y=()=>{const{stores:e}=(0,s.useContext)(T.NQ),{fs:t,setStatus:r,canUpgradeFs:i,upgradeFs:a,closeFs:o,localFsRoot:l,permissionPrompt:d,requestPermission:h,loadFs:f}=(0,s.useContext)(p.L),{settings:g,monaco:y,theme:v,setTheme:b,tracking:w}=(0,s.useContext)(m.BR),[S,x]=(0,s.useState)(!1),k=(0,s.useMemo)((()=>e=>{l||(u.Ru.activate(e),t.writeFile("/locale",e))}),[t]);(0,s.useEffect)((()=>{l||t.readFile("/locale").then((e=>u.Ru.activate(e))).catch((()=>k("en")))}),[t,k]);const _=(0,V.s)(),I=(0,V.s)(),C=(0,P.jsx)("dialog",{open:d.isOpen,children:(0,P.jsx)("article",{children:(0,P.jsxs)("main",{children:[(0,P.jsx)("div",{style:{margin:"10px"},children:"Please grant permissions to use your local projects folder"}),(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"30px"},children:[(0,P.jsx)("button",{style:{width:"100px"},onClick:async()=>{await h(),f(),d.close()},children:"Ok"}),(0,P.jsx)("button",{style:{width:"100px"},onClick:()=>{d.close()},children:"Cancel"})]})]})})}),A=(0,P.jsx)("dialog",{open:_.isOpen,children:(0,P.jsx)("article",{children:(0,P.jsxs)("main",{children:[(0,P.jsx)("div",{style:{margin:"10px"},children:'The "reset files" action will result in erasing all the HDL files kept in your browser\'s memory, replacing them with a fresh set of skeletal HDL files. You may want to back-up your files before resetting them. Are you sure that you want to reset the files?'}),(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"30px"},children:[(0,P.jsx)("button",{style:{width:"100px"},onClick:async()=>{await(async()=>{const r=G();localStorage.clear(),q(r),localStorage["/chip/project"]="01",localStorage["/chip/chip"]="Not";const i=await Promise.resolve().then(n.bind(n,5777));await i.resetFiles(t),e.cpu.actions.clear(),e.asm.actions.clear(),e.vm.actions.initialize(),e.compiler.actions.reset()})(),_.close(),I.open()},children:(0,P.jsx)(c.x6,{id:"l75CjT"})}),(0,P.jsx)("button",{style:{width:"100px"},onClick:()=>{_.close()},children:(0,P.jsx)(c.x6,{id:"dEgA5A"})})]})]})})}),E=(0,P.jsx)("dialog",{open:I.isOpen,children:(0,P.jsxs)("article",{children:[(0,P.jsx)("header",{children:(0,P.jsx)(c.x6,{id:"hDh8R1"})}),(0,P.jsx)("main",{children:(0,P.jsx)("button",{onClick:I.close,children:(0,P.jsx)(c.x6,{id:"aP3N/0"})})})]})});return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("dialog",{open:g.isOpen,children:(0,P.jsxs)("article",{className:"settings-dialog",children:[(0,P.jsxs)("header",{children:[(0,P.jsx)("p",{children:(0,P.jsx)(c.x6,{id:"Tz0i8g"})}),(0,P.jsx)("a",{className:"close",href:"#root",onClick:e=>{e.preventDefault(),g.close()}})]}),(0,P.jsx)("main",{children:(0,P.jsxs)("dl",{children:[(0,P.jsx)("header",{children:(0,P.jsx)(c.x6,{id:"e0NrBM"})}),(0,P.jsx)("dt",{children:(0,P.jsx)(c.x6,{id:"9aloPG"})}),(0,P.jsxs)("dd",{children:[(0,P.jsx)("div",{children:(0,P.jsx)("a",{href:"https://nand2tetris.org",target:"_blank",rel:"noreferrer",children:"nand2tetris.org"})}),(0,P.jsx)("div",{children:(0,P.jsx)("a",{href:"https://github.com/davidsouther/nand2tetris",target:"_blank",rel:"noreferrer",children:"GitHub"})})]}),(0,P.jsx)("dt",{children:(0,P.jsx)(c.x6,{id:"QtwpF9"})}),(0,P.jsx)("dd",{children:(0,P.jsx)("a",{role:"button",href:"https://drive.google.com/open?id=1oD0WMJRq1UPEFEXWphKXR6paFwWpBS4o",target:"_blank",rel:"noreferrer",download:"projects.zip",children:(0,P.jsx)(c.x6,{id:"QiMEIu"})})}),(0,P.jsx)("dt",{children:(0,P.jsx)(c.x6,{id:"Ng9wMt"})}),(0,P.jsxs)("dd",{children:[i&&(0,P.jsxs)(P.Fragment,{children:[l&&(0,P.jsxs)("p",{children:[(0,P.jsx)(c.x6,{id:"A2O3d/"}),(0,P.jsx)("code",{children:l})]}),(0,P.jsx)("button",{disabled:S,onClick:async()=>{(async e=>{x(!0);try{await a(void 0!=l,e)}catch(t){console.error("Failed to upgrade FS",{err:t}),r(u.Ru._({id:"A9bii0"}))}x(!1)})()},"data-tooltip":"Load a nand2tetris project folder stored on your device","data-placement":"bottom",children:l?(0,P.jsx)(c.x6,{id:"k3v5G3"}):(0,P.jsx)(c.x6,{id:"9IPDcR"})}),l&&(0,P.jsx)("button",{onClick:async()=>{await o()},"data-tooltip":u.Ru._({id:"C/8KpY"}),"data-placement":"bottom",children:(0,P.jsx)(c.x6,{id:"SUTY2p"})})]}),!l&&(0,P.jsx)("button",{onClick:async()=>{_.open()},children:(0,P.jsx)(c.x6,{id:"OfhWJH"})})]}),(0,P.jsx)("dt",{children:(0,P.jsx)(c.x6,{id:"vXIe7J"})}),(0,P.jsxs)("dd",{children:[(0,P.jsx)("button",{onClick:()=>k("en"),children:(0,P.jsx)(c.x6,{id:"lYGfRP"})}),(0,P.jsx)("button",{onClick:()=>k("en-PL"),children:(0,P.jsx)(c.x6,{id:"E+NWKU"})})]}),(0,P.jsx)("dt",{children:(0,P.jsx)(c.x6,{id:"uBAxNB"})}),(0,P.jsx)("dd",{children:(0,P.jsxs)("label",{children:[(0,P.jsx)("input",{type:"checkbox",name:"switch",role:"switch",checked:y.wants,disabled:!y.canUse,onChange:e=>y.toggle(e.target.checked)}),(0,P.jsx)(c.x6,{id:"zQo0yv"})]})}),(0,P.jsx)("dt",{children:(0,P.jsx)(c.x6,{id:"FEr96N"})}),(0,P.jsx)("dd",{children:(0,P.jsxs)("fieldset",{role:"group",children:[(0,P.jsxs)("label",{role:"button","aria-current":"light"===v,children:[(0,P.jsx)("input",{type:"radio",name:"theme",value:"light",checked:"light"===v,onChange:()=>b("light")}),(0,P.jsx)(c.x6,{id:"1njn7W"})]}),(0,P.jsxs)("label",{role:"button","aria-current":"dark"===v,children:[(0,P.jsx)("input",{type:"radio",name:"theme",value:"dark",checked:"dark"===v,onChange:()=>b("dark")}),(0,P.jsx)(c.x6,{id:"pvnfJD"})]}),(0,P.jsxs)("label",{role:"button","aria-current":"system"===v,children:[(0,P.jsx)("input",{type:"radio",name:"theme",value:"system",checked:"system"===v,onChange:()=>b("system")}),(0,P.jsx)(c.x6,{id:"D+NlUC"})]})]})}),(0,P.jsx)("dt",{children:(0,P.jsx)(c.x6,{id:"U0HZma"})}),(0,P.jsx)("dd",{children:(0,P.jsxs)("label",{children:[(0,P.jsx)("input",{type:"checkbox",name:"switch",role:"switch",checked:w.canTrack,onChange:e=>{e.target.checked?w.accept():w.reject()}}),(0,P.jsx)(c.x6,{id:"PH2rP+"}),(0,P.jsx)(U.dQ,{})]})})]})})]})}),C,A,E]})};class X extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?this.props.fallback({error:this.state.error}):this.props.children}}const J=({error:e})=>{var t;return e?(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:[(0,P.jsxs)("b",{children:[null!==(t=e.name)&&void 0!==t?t:"Error",":"]})," ",e.message]}),e.stack&&(0,P.jsx)("pre",{children:(0,P.jsx)("code",{children:e.stack})}),e.cause?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{children:(0,P.jsx)("em",{children:"Caused by"})}),(0,P.jsx)(J,{error:e.cause})]}):(0,P.jsx)(P.Fragment,{})]}):(0,P.jsx)("p",{children:"Unknown Error"})},Z=()=>{const[e,t]=(0,s.useState)();return(0,s.useEffect)((()=>{var e;const n=null!==(e=localStorage.getItem(F.p3))&&void 0!==e?e:"/chip";t(n)}),[]),e?(0,P.jsx)(f.C5,{to:e}):(0,P.jsx)(P.Fragment,{})};u.Ru.load("en",A.messages),u.Ru.load("en-PL",E.messages),u.Ru.loadLocaleData({en:{plurals:d},"en-US":{plurals:d},"en-PL":{plurals:d}}),u.Ru.activate(navigator.language);const ee=function(){const e=(0,p.A)(),t=(0,m.Us)(),r=(0,s.useRef)("none"),[i,a]=(0,s.useState)(!1),o=e.fs;return(0,s.useEffect)((()=>{!async function(){if(_)return;_=!0,_=!0;const{loader:e}=await n.e(983).then(n.bind(n,7983)),{languages:t}=await e.init();for(const[n,r]of Object.entries(x))t.register({id:n}),t.setMonarchTokensProvider(n,r),k[n]&&t.registerCompletionItemProvider(n,k[n]);_=!1}()}),[]),(0,s.useEffect)((()=>{"none"==r.current&&(r.current="initializing",Promise.resolve().then((async()=>{await async function(e){if(void 0!==K)return K==H;K=G();try{for(await e.stat("/projects/01/Not.hdl");K<H;K++)try{await Q[K](e)}catch(t){console.warn(`Error loading files at version ${K}`,t)}}catch(t){await(0,B.resetFiles)(e)}return q(K),K==H}(o),r.current="initialized",a(!0)})))}),[o,r]),(0,s.useEffect)((()=>{document.children[0].dataset.theme="system"===t.theme?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t.theme}),[t.theme]),(0,P.jsx)(c.CY,{i18n:u.Ru,children:(0,P.jsx)(p.L.Provider,{value:e,children:(0,P.jsx)(m.BR.Provider,{value:t,children:i?(0,P.jsxs)(T.qK,{children:[(0,P.jsx)(Y,{}),(0,P.jsx)(O.Nk,{}),(0,P.jsxs)(h.Kd,{basename:"/web-ide",children:[(0,P.jsx)(z,{}),(0,P.jsx)("main",{className:"flex flex-1",children:(0,P.jsx)(X,{fallback:J,children:(0,P.jsx)(s.Suspense,{fallback:(0,P.jsx)("div",{children:"Loading..."}),children:(0,P.jsxs)(f.BV,{children:[(0,P.jsx)(f.qh,{path:"/",element:(0,P.jsx)(Z,{})}),Object.values(F.Ay).map((({href:e,target:t})=>(0,P.jsx)(f.qh,{path:e,element:t},e)))]})})})}),(0,P.jsx)(R,{}),(0,P.jsx)(U.w,{})]})]}):(0,P.jsx)("div",{children:"Initializing..."})})})})},te=e=>{e&&e instanceof Function&&n.e(510).then(n.bind(n,510)).then((({getCLS:t,getFID:n,getFCP:r,getLCP:i,getTTFB:s})=>{t(e),n(e),r(e),i(e),s(e)}))};a.createRoot(document.getElementById("root")).render((0,P.jsx)(s.StrictMode,{children:(0,P.jsx)(ee,{})})),function(e){if("serviceWorker"in navigator){if(new URL("/web-ide",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="/web-ide/service-worker.js";o?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):l(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):l(t,e)}))}}(),te()})();
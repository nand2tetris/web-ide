@use "./page.scss";

.BitmapPage {
    grid-template-areas: "canvas code" "controls controls";
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr auto;

    .canvas-panel {
        grid-area: canvas;
        overflow: auto;
    }

    .code-panel {
        grid-area: code;
        min-width: 400px;
    }

    .controls-panel {
        grid-area: controls;
    }

    // Canvas size header controls
    .canvas-size-controls {
        display: flex;
        flex-wrap: nowrap;
        gap: var(--spacing);
        align-items: center;
        padding: var(--spacing);

        input[type="text"] {
            width: 3rem;
            margin: 0;
            padding: var(--spacing);
        }

        label {
            margin: 0;
            font-weight: normal;
            font-size: 0.85rem;
        }

        button {
            padding: var(--spacing) calc(var(--spacing) * 2);
            font-size: 0.85rem;
        }
    }

    // Tab button group for Jack/Hack
    .tab-container {
        display: flex;
        gap: 0;

        .tab-button {
            padding: calc(var(--spacing) * 2) calc(var(--spacing) * 4);
            border: 1px solid var(--card-border-color);
            background-color: var(--secondary);
            color: var(--secondary-inverse);
            cursor: pointer;
            margin-bottom: -1px;
            position: relative;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            font-weight: normal;

            &.active {
                background-color: var(--primary);
                color: var(--primary-inverse);
                border-bottom: 1px solid var(--primary);
                font-weight: bold;
            }

            &:hover:not(.active) {
                background-color: var(--secondary-hover);
            }
        }
    }

    // Canvas grid styling
    .canvas-grid {
        border-collapse: collapse;
        user-select: none;

        td {
            padding: 0;
            border: 1px solid var(--light-grey);

            &.cell {
                cursor: crosshair;

                &.filled {
                    background-color: var(--text-color);
                }

                &.empty {
                    background-color: var(--card-background-color);
                }
            }

            &.row-label,
            &.col-label {
                text-align: center;
                font-size: 10px;
                color: var(--light-grey);
                padding: 2px;
                width: auto;
                min-width: 0;
            }

            &.row-label {
                width: 20px;
                max-width: 20px;
            }
        }

        // Word edge styling (when obvious styling is enabled)
        &.obvious-edges {
            td.word-edge {
                border-left: 2px solid red !important;
            }
        }
    }

    // Generated code textarea
    .generated-code {
        width: 100%;
        height: 100%;
        min-height: 400px;
        resize: none;
        font-family: var(--font-family-monospace);
        font-size: var(--font-size-monospace);
    }

    // Control rows
    .control-row {
        display: flex;
        flex-wrap: wrap;
        gap: var(--spacing);
        align-items: center;
        padding: var(--spacing);
        border-top: 1px solid var(--card-border-color);

        &:first-child {
            border-top: none;
        }

        // Button groups
        .button-group {
            display: flex;
            gap: var(--spacing);
            align-items: center;
        }

        // Checkbox/radio groups
        .checkbox-group,
        .radio-group {
            display: flex;
            gap: calc(var(--spacing) * 3);
            align-items: center;

            label {
                display: flex;
                align-items: center;
                gap: var(--spacing);
                margin: 0;
                cursor: pointer;
                font-weight: normal;

                input {
                    margin: 0;
                }
            }
        }

        // Spacer
        .spacer {
            width: calc(var(--spacing) * 4);
        }

        // Input with label
        .input-group {
            display: flex;
            align-items: center;
            gap: var(--spacing);

            label {
                margin: 0;
                font-weight: normal;
                white-space: nowrap;
            }

            input[type="text"] {
                width: 3rem;
                margin: 0;
            }
        }
    }

    // Buttons
    button {
        margin: 0;
        padding: var(--spacing) calc(var(--spacing) * 2);
        white-space: nowrap;
        font-size: 0.85rem;
    }

    // Hidden file input
    .hidden-file-input {
        display: none;
    }
}

// Responsive layouts
@media (max-width: 1200px) {
    .BitmapPage {
        grid-template-areas: "canvas" "code" "controls";
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr auto;

        .code-panel {
            min-width: unset;
        }

        .generated-code {
            min-height: 200px;
        }
    }
}

@media (max-width: 768px) {
    .BitmapPage {
        .control-row {
            .button-group {
                flex-wrap: wrap;
            }
        }
    }
}
